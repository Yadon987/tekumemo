# ==========================================
# Rails開発環境用 sudo NOPASSWD設定
# 作成日: 2025-12-30
# 対象: 個人開発環境（WSL2 Ubuntu）
# Level 2: 開発ツール関連のみパスワードレス
# ==========================================

# --- Docker関連（最頻出）---
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/service docker start
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/service docker stop
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/service docker restart
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/service docker status
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/docker *
nukon999 ALL=(ALL) NOPASSWD: /usr/local/bin/docker-compose *

# --- ファイル権限関連（Rails開発で頻出）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/chown *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/chmod *

# --- パッケージ管理（gem, npm依存関係インストール時）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt update
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt upgrade
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt install *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt remove *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt autoremove
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt-get update
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt-get upgrade
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt-get install *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/apt-get remove *

# --- サービス管理（PostgreSQL, Redis等）---
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/service postgresql *
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/service redis-server *
nukon999 ALL=(ALL) NOPASSWD: /bin/systemctl start *
nukon999 ALL=(ALL) NOPASSWD: /bin/systemctl stop *
nukon999 ALL=(ALL) NOPASSWD: /bin/systemctl restart *
nukon999 ALL=(ALL) NOPASSWD: /bin/systemctl status *
nukon999 ALL=(ALL) NOPASSWD: /bin/systemctl enable *
nukon999 ALL=(ALL) NOPASSWD: /bin/systemctl disable *

# --- プロセス管理（ハングしたプロセス終了時）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/kill *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/killall *

# --- ネットワーク診断（開発時のデバッグ）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/netstat *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/ss *
nukon999 ALL=(ALL) NOPASSWD: /usr/sbin/lsof *

# --- ログ確認（本番ログ調査時）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/tail *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/less *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/cat /var/log/*

# --- 環境変数・設定ファイル編集（Rails環境設定）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/nano *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/vim *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/vi *

# --- Node.js / Yarn（フロントエンド開発）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/npm *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/yarn *

# --- Ruby / Bundler（gem依存関係）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/gem install *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/bundle *

# --- ファイルシステム（WSL2特有の権限問題対応）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/mount *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/umount *

# --- クリーンアップ（ディスク容量管理）---
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/du *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/df *
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/rm -rf /tmp/*
nukon999 ALL=(ALL) NOPASSWD: /usr/bin/rm -rf /var/tmp/*
