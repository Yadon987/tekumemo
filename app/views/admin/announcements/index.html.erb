<div class="min-h-screen bg-gradient-to-b from-sky-50 to-slate-50 dark:bg-gradient-to-b dark:from-slate-900 dark:via-slate-900 dark:to-indigo-950 py-8">
  <div class="max-w-6xl mx-auto px-4">
    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <div class="flex justify-between items-center mb-6">
      <h1 class="text-2xl font-bold text-gray-900 dark:text-white">
        üì¢ „ÅäÁü•„Çâ„ÅõÁÆ°ÁêÜ
      </h1>
      <%= link_to new_admin_announcement_path, class: "inline-flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-700 hover:bg-gray-50 dark:hover:bg-slate-600 text-gray-900 dark:text-white font-medium rounded-lg transition-colors shadow-sm" do %>
        <span class="material-symbols-outlined text-lg">add</span>
        <span>Êñ∞Ë¶è‰ΩúÊàê</span>
      <% end %>
    </div>

    <!-- Ê§úÁ¥¢„Éª„Éï„Ç£„É´„Çø„Éï„Ç©„Éº„É† -->
    <div class="mb-6 bg-white dark:bg-slate-800 rounded-lg shadow p-4">
      <%= form_with url: admin_announcements_path, method: :get, class: "flex flex-wrap gap-4 items-center", local: true do |f| %>
        <!-- „Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢ -->
        <div class="flex-1 min-w-[200px]">
          <div class="relative">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <span class="material-symbols-outlined text-gray-400">search</span>
            </div>
            <%= f.text_field :q, value: params[:q], placeholder: "„Çø„Ç§„Éà„É´„Åæ„Åü„ÅØÊú¨Êñá„ÅßÊ§úÁ¥¢...", class: "pl-10 block w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500 sm:text-sm" %>
          </div>
        </div>

        <!-- Á®ÆÈ°û„Éï„Ç£„É´„Çø -->
        <div class="w-32">
          <%= f.select :type, Announcement::ANNOUNCEMENT_TYPES.map { |k, v| [v, k] }, { include_blank: 'ÂÖ®„Å¶„ÅÆÁ®ÆÈ°û', selected: params[:type] }, { class: "block w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500 sm:text-sm" } %>
        </div>

        <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„Éï„Ç£„É´„Çø -->
        <div class="w-32">
          <%= f.select :status, [['ÂÖ¨Èñã‰∏≠', 'published'], ['‰∏ãÊõ∏„Åç', 'draft']], { include_blank: 'ÂÖ®„Å¶„ÅÆÁä∂ÊÖã', selected: params[:status] }, { class: "block w-full rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-slate-800 text-gray-900 dark:text-white focus:ring-blue-500 focus:border-blue-500 sm:text-sm" } %>
        </div>

        <!-- Ê§úÁ¥¢„Éú„Çø„É≥ -->
        <%= f.button type: :submit, class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" do %>
          Ê§úÁ¥¢
        <% end %>

        <!-- „ÇØ„É™„Ç¢„Éú„Çø„É≥ -->
        <% if params[:q].present? || params[:type].present? || params[:status].present? %>
          <%= link_to admin_announcements_path, class: "text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" do %>
            „ÇØ„É™„Ç¢
          <% end %>
        <% end %>
      <% end %>
    </div>

    <!-- „ÅäÁü•„Çâ„Åõ‰∏ÄË¶ß -->
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl p-6">
      <% if @announcements.any? %>
        <div class="space-y-4">
          <% @announcements.each do |announcement| %>
            <div class="border border-gray-200 dark:border-slate-700 rounded-xl p-4 hover:shadow-md transition-shadow">
              <div class="flex justify-between items-start gap-4">
                <!-- „ÅäÁü•„Çâ„ÅõÊÉÖÂ†± -->
                <div class="flex-1">
                  <div class="flex items-center gap-2 mb-2">
                    <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„ÉÉ„Ç∏ -->
                    <% if announcement.active? %>
                      <span class="px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 text-xs rounded-full">
                        ÂÖ¨Èñã‰∏≠
                      </span>
                    <% elsif announcement.is_published %>
                      <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 text-xs rounded-full">
                        ÊúüÈôêÂàá„Çå
                      </span>
                    <% else %>
                      <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded-full">
                        ‰∏ãÊõ∏„Åç
                      </span>
                    <% end %>

                    <!-- Á®ÆÈ°û„Éê„ÉÉ„Ç∏ -->
                    <% case announcement.announcement_type %>
                    <% when 'urgent' %>
                      <span class="px-2 py-1 bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 text-xs rounded-full">
                        üö® Á∑äÊÄ•
                      </span>
                    <% when 'warning' %>
                      <span class="px-2 py-1 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-xs rounded-full">
                        ‚ö†Ô∏è ÈáçË¶Å
                      </span>
                    <% else %>
                      <span class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs rounded-full">
                        ‚ÑπÔ∏è „ÅäÁü•„Çâ„Åõ
                      </span>
                    <% end %>
                  </div>

                  <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-1">
                    <%= announcement.title %>
                  </h3>

                  <p class="text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-2">
                    <%= announcement.content.truncate(100) %>
                  </p>

                  <div class="text-xs text-gray-500 dark:text-gray-500">
                    <% if announcement.published_at %>
                      ÂÖ¨ÈñãÊó•: <%= announcement.published_at.strftime('%Y/%m/%d %H:%M') %>
                    <% end %>
                    <% if announcement.expires_at %>
                      | ÊúâÂäπÊúüÈôê: <%= announcement.expires_at.strftime('%Y/%m/%d %H:%M') %>
                    <% end %>
                  </div>
                </div>

                <!--„Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ -->
                <div class="flex gap-2">
                  <%= link_to edit_admin_announcement_path(announcement), class: "p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors" do %>
                    <span class="material-symbols-outlined text-xl">edit</span>
                  <% end %>

                  <% if announcement.is_published %>
                    <%= button_to unpublish_admin_announcement_path(announcement), method: :patch, class: "p-2 text-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors" do %>
                      <span class="material-symbols-outlined text-xl">visibility_off</span>
                    <% end %>
                  <% else %>
                    <%= button_to publish_admin_announcement_path(announcement), method: :patch, class: "p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors" do %>
                      <span class="material-symbols-outlined text-xl">visibility</span>
                    <% end %>
                  <% end %>

                  <%= button_to admin_announcement_path(announcement), method: :delete, data: { confirm: 'Êú¨ÂΩì„Å´ÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü' }, class: "p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors" do %>
                    <span class="material-symbols-outlined text-xl">delete</span>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>

        <!-- „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ -->
        <div class="mt-6">
          <%= paginate @announcements %>
        </div>
      <% else %>
        <div class="text-center py-12">
          <p class="text-gray-500 dark:text-gray-400">„ÅäÁü•„Çâ„Åõ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
        </div>
      <% end %>
    </div>


  </div>
</div>
