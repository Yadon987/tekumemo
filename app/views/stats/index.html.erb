<div class="min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 py-8 px-4 sm:px-6 lg:px-8">
  <div class="max-w-7xl mx-auto">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <div class="mb-8">
      <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-2">
        ğŸ“Š çµ±è¨ˆãƒ»åˆ†æ
      </h1>
      <p class="text-gray-600 dark:text-gray-400">
        ã‚ãªãŸã®æ•£æ­©ãƒ‡ãƒ¼ã‚¿ã‚’è©³ã—ãåˆ†æã—ã¾ã™
      </p>
    </div>

    <!-- åŸºæœ¬çµ±è¨ˆã‚«ãƒ¼ãƒ‰ (6ã¤) -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
      <!-- ç´¯è¨ˆè·é›¢ -->
      <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-transform duration-200">
        <div class="flex items-center justify-between mb-4">
          <div class="text-blue-100 text-4xl">ğŸ¯</div>
          <div class="text-right">
            <p class="text-blue-100 text-sm font-medium">ç´¯è¨ˆè·é›¢</p>
            <p class="text-4xl font-bold"><%= number_with_delimiter(@total_distance) %></p>
            <p class="text-blue-100 text-xs">km</p>
          </div>
        </div>
      </div>

      <!-- ç´¯è¨ˆæ—¥æ•° -->
      <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-transform duration-200">
        <div class="flex items-center justify-between mb-4">
          <div class="text-green-100 text-4xl">ğŸ“…</div>
          <div class="text-right">
            <p class="text-green-100 text-sm font-medium">ç´¯è¨ˆæ•£æ­©æ—¥æ•°</p>
            <p class="text-4xl font-bold"><%= @total_days %></p>
            <p class="text-green-100 text-xs">æ—¥</p>
          </div>
        </div>
      </div>

      <!-- é€£ç¶šè¨˜éŒ²æ—¥æ•° -->
      <div class="bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-transform duration-200">
        <div class="flex items-center justify-between mb-4">
          <div class="text-orange-100 text-4xl">ğŸ”¥</div>
          <div class="text-right">
            <p class="text-orange-100 text-sm font-medium">é€£ç¶šè¨˜éŒ²</p>
            <p class="text-4xl font-bold"><%= @current_streak %></p>
            <p class="text-orange-100 text-xs">æ—¥é€£ç¶š</p>
          </div>
        </div>
      </div>

      <!-- å¹³å‡è·é›¢ -->
      <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-transform duration-200">
        <div class="flex items-center justify-between mb-4">
          <div class="text-purple-100 text-4xl">ğŸ“ˆ</div>
          <div class="text-right">
            <p class="text-purple-100 text-sm font-medium">å¹³å‡è·é›¢/æ—¥</p>
            <p class="text-4xl font-bold"><%= @average_distance %></p>
            <p class="text-purple-100 text-xs">km</p>
          </div>
        </div>
      </div>

      <!-- æœ€é•·è¨˜éŒ² -->
      <div class="bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-transform duration-200">
        <div class="flex items-center justify-between mb-4">
          <div class="text-pink-100 text-4xl">ğŸ†</div>
          <div class="text-right">
            <p class="text-pink-100 text-sm font-medium">æœ€é•·è¨˜éŒ²</p>
            <p class="text-4xl font-bold"><%= @max_distance %></p>
            <p class="text-pink-100 text-xs">km</p>
          </div>
        </div>
      </div>

      <!-- ç›®æ¨™é”æˆç‡ -->
      <div class="bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl shadow-lg p-6 text-white transform hover:scale-105 transition-transform duration-200">
        <div class="flex items-center justify-between mb-4">
          <div class="text-amber-100 text-4xl">âœ¨</div>
          <div class="text-right">
            <p class="text-amber-100 text-sm font-medium">ä»Šæœˆã®ç›®æ¨™é”æˆç‡</p>
            <p class="text-4xl font-bold"><%= @monthly_goal_rate %>%</p>
            <p class="text-amber-100 text-xs">æœˆé–“ç›®æ¨™</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ã‚°ãƒ©ãƒ•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div
      data-controller="stats-chart"
      data-stats-chart-daily-url-value="<%= stats_chart_data_path(type: 'daily') %>"
      data-stats-chart-weekly-url-value="<%= stats_chart_data_path(type: 'weekly') %>"
      data-stats-chart-monthly-url-value="<%= stats_chart_data_path(type: 'monthly') %>"
      data-stats-chart-weekday-url-value="<%= stats_chart_data_path(type: 'weekday') %>"
      data-stats-chart-pace-url-value="<%= stats_chart_data_path(type: 'pace') %>"
      data-stats-chart-calories-url-value="<%= stats_chart_data_path(type: 'calories') %>"
      class="space-y-8"
    >
      <!-- æ™‚ç³»åˆ—ã‚°ãƒ©ãƒ• (ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ) -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
          ğŸ“ˆ è·é›¢ã®æ¨ç§»
        </h2>

        <!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="flex space-x-2 mb-6 border-b border-gray-200 dark:border-gray-700">
          <button
            class="tab-button active px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600 dark:text-blue-400 dark:border-blue-400"
            data-tab="daily-chart"
            onclick="switchTab(event, 'daily-chart')"
          >
            æ—¥åˆ¥ (30æ—¥)
          </button>
          <button
            class="tab-button px-4 py-2 font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
            data-tab="weekly-chart"
            onclick="switchTab(event, 'weekly-chart')"
          >
            é€±åˆ¥ (12é€±)
          </button>
          <button
            class="tab-button px-4 py-2 font-medium text-gray-500 border-b-2 border-transparent hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"
            data-tab="monthly-chart"
            onclick="switchTab(event, 'monthly-chart')"
          >
            æœˆåˆ¥ (12ãƒ¶æœˆ)
          </button>
        </div>

        <!-- ã‚°ãƒ©ãƒ•ã‚¨ãƒªã‚¢ -->
        <div class="tab-content" id="daily-chart">
          <div class="h-80">
            <canvas data-stats-chart-target="dailyCanvas"></canvas>
          </div>
        </div>

        <div class="tab-content hidden" id="weekly-chart">
          <div class="h-80">
            <canvas data-stats-chart-target="weeklyCanvas"></canvas>
          </div>
        </div>

        <div class="tab-content hidden" id="monthly-chart">
          <div class="h-80">
            <canvas data-stats-chart-target="monthlyCanvas"></canvas>
          </div>
        </div>
      </div>

      <!-- æ›œæ—¥åˆ¥åˆ†æ -->
      <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
          ğŸ“Š æ›œæ—¥åˆ¥ã®å‚¾å‘
        </h2>
        <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">
          ã©ã®æ›œæ—¥ã«æ•£æ­©ã—ã¦ã„ã¾ã™ã‹?å¹³å‡è·é›¢ã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ã‚‡ã†
        </p>
        <div class="h-80">
          <canvas data-stats-chart-target="weekdayCanvas"></canvas>
        </div>
      </div>

      <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- ãƒšãƒ¼ã‚¹æ¨ç§» -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6">
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
            â±ï¸ ãƒšãƒ¼ã‚¹ã®æ¨ç§»
          </h2>
          <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">
            éå»30æ—¥é–“ã®å¹³å‡ãƒšãƒ¼ã‚¹ (åˆ†/km)
          </p>
          <div class="h-64">
            <canvas data-stats-chart-target="paceCanvas"></canvas>
          </div>
        </div>

        <!-- ã‚«ãƒ­ãƒªãƒ¼æ¨ç§» -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6">
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">
            ğŸ”¥ ã‚«ãƒ­ãƒªãƒ¼æ¶ˆè²»ã®æ¨ç§»
          </h2>
          <p class="text-gray-600 dark:text-gray-400 mb-4 text-sm">
            éå»30æ—¥é–“ã®æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼
          </p>
          <div class="h-64">
            <canvas data-stats-chart-target="caloriesCanvas"></canvas>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
<script>
  function switchTab(event, tabId) {
    // å…¨ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã¨ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
    document.querySelectorAll('.tab-button').forEach(btn => {
      btn.classList.remove('active', 'text-blue-600', 'border-blue-600', 'dark:text-blue-400', 'dark:border-blue-400')
      btn.classList.add('text-gray-500', 'border-transparent', 'dark:text-gray-400')
    })
    document.querySelectorAll('.tab-content').forEach(content => {
      content.classList.add('hidden')
    })

    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–åŒ–
    event.target.classList.remove('text-gray-500', 'border-transparent', 'dark:text-gray-400')
    event.target.classList.add('active', 'text-blue-600', 'border-blue-600', 'dark:text-blue-400', 'dark:border-blue-400')
    document.getElementById(tabId).classList.remove('hidden')
  }
</script>
