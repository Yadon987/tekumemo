diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
index 4ba1a6b..1002ef2 100644
--- a/.github/workflows/ci.yml
+++ b/.github/workflows/ci.yml
@@ -1,91 +1,91 @@
-name: CI
-
-on:
-  pull_request:
-  push:
-    branches: [main]
-
-jobs:
-  scan_ruby:
-    runs-on: ubuntu-latest
-
-    steps:
-      - name: Checkout code
-        uses: actions/checkout@v6
-
-      - name: Set up Ruby
-        uses: ruby/setup-ruby@v1
-        with:
-          ruby-version: .ruby-version
-          bundler-cache: true
-
-      - name: Scan for common Rails security vulnerabilities using static analysis
-        run: bin/brakeman --no-pager
-
-  lint:
-    runs-on: ubuntu-latest
-    steps:
-      - name: Checkout code
-        uses: actions/checkout@v6
-
-      - name: Set up Ruby
-        uses: ruby/setup-ruby@v1
-        with:
-          ruby-version: .ruby-version
-          bundler-cache: true
-
-      - name: Lint code for consistent style
-        run: bin/rubocop -f github
-
-  test:
-    runs-on: ubuntu-latest
-
-    services:
-      postgres:
-        image: postgres
-        env:
-          POSTGRES_USER: postgres
-          POSTGRES_PASSWORD: postgres
-        ports:
-          - 5432:5432
-        options: --health-cmd="pg_isready" --health-interval=10s --health-timeout=5s --health-retries=3
-
-      # redis:
-      #   image: redis
-      #   ports:
-      #     - 6379:6379
-      #   options: --health-cmd "redis-cli ping" --health-interval 10s --health-timeout 5s --health-retries 5
-
-    steps:
-      - name: Install packages
-        run: sudo apt-get update && sudo apt-get install --no-install-recommends -y google-chrome-stable curl libjemalloc2 libvips postgresql-client imagemagick
-
-      - name: Checkout code
-        uses: actions/checkout@v6
-
-      - name: Set up Ruby
-        uses: ruby/setup-ruby@v1
-        with:
-          ruby-version: .ruby-version
-          bundler-cache: true
-
-      - name: Run tests
-        env:
-          RAILS_ENV: test
-          CI: true
-          DATABASE_URL: postgres://postgres:postgres@localhost:5432
-          # REDIS_URL: redis://localhost:6379/0
-        run: |
-          yarn install
-          yarn build:css
-          bin/rails assets:precompile
-          bin/rails db:create db:migrate
-          bundle exec rspec
-
-      - name: Keep screenshots from failed system tests
-        uses: actions/upload-artifact@v6
-        if: failure()
-        with:
-          name: screenshots
-          path: ${{ github.workspace }}/tmp/screenshots
-          if-no-files-found: ignore
+name: CI
+
+on:
+  pull_request:
+  push:
+    branches: [main]
+
+jobs:
+  scan_ruby:
+    runs-on: ubuntu-latest
+
+    steps:
+      - name: Checkout code
+        uses: actions/checkout@v6
+
+      - name: Set up Ruby
+        uses: ruby/setup-ruby@v1
+        with:
+          ruby-version: .ruby-version
+          bundler-cache: true
+
+      - name: Scan for common Rails security vulnerabilities using static analysis
+        run: bin/brakeman --no-pager
+
+  lint:
+    runs-on: ubuntu-latest
+    steps:
+      - name: Checkout code
+        uses: actions/checkout@v6
+
+      - name: Set up Ruby
+        uses: ruby/setup-ruby@v1
+        with:
+          ruby-version: .ruby-version
+          bundler-cache: true
+
+      - name: Lint code for consistent style
+        run: bin/rubocop -f github
+
+  test:
+    runs-on: ubuntu-latest
+
+    services:
+      postgres:
+        image: postgres
+        env:
+          POSTGRES_USER: postgres
+          POSTGRES_PASSWORD: postgres
+        ports:
+          - 5432:5432
+        options: --health-cmd="pg_isready" --health-interval=10s --health-timeout=5s --health-retries=3
+
+      # redis:
+      #   image: redis
+      #   ports:
+      #     - 6379:6379
+      #   options: --health-cmd "redis-cli ping" --health-interval 10s --health-timeout 5s --health-retries 5
+
+    steps:
+      - name: Install packages
+        run: sudo apt-get update && sudo apt-get install --no-install-recommends -y google-chrome-stable curl libjemalloc2 libvips postgresql-client imagemagick
+
+      - name: Checkout code
+        uses: actions/checkout@v6
+
+      - name: Set up Ruby
+        uses: ruby/setup-ruby@v1
+        with:
+          ruby-version: .ruby-version
+          bundler-cache: true
+
+      - name: Run tests
+        env:
+          RAILS_ENV: test
+          CI: true
+          DATABASE_URL: postgres://postgres:postgres@localhost:5432
+          # REDIS_URL: redis://localhost:6379/0
+        run: |
+          yarn install
+          yarn build:css
+          bin/rails assets:precompile
+          bin/rails db:create db:migrate
+          bundle exec rspec
+
+      - name: Keep screenshots from failed system tests
+        uses: actions/upload-artifact@v6
+        if: failure()
+        with:
+          name: screenshots
+          path: ${{ github.workspace }}/tmp/screenshots
+          if-no-files-found: ignore
diff --git a/.repomixignore b/.repomixignore
index c63e5bc..7360398 100644
--- a/.repomixignore
+++ b/.repomixignore
@@ -1,4 +1,4 @@
-# Add patterns to ignore here, one per line
-# Example:
-# *.log
-# tmp/
+# Add patterns to ignore here, one per line
+# Example:
+# *.log
+# tmp/
diff --git a/app/assets/stylesheets/application.css b/app/assets/stylesheets/application.css
index 00ad2ba..fedc36d 100644
--- a/app/assets/stylesheets/application.css
+++ b/app/assets/stylesheets/application.css
@@ -1,266 +1,266 @@
-/* Tailwind CSSのベースディレクティブ */
-@tailwind base;
-@tailwind components;
-@tailwind utilities;
-
-/* Material Symbols アイコンフォント設定 */
-/* アイコンの見た目を統一するための設定 */
-.material-symbols-outlined {
-  font-variation-settings: "FILL" 0,
-    /* アイコンを塗りつぶす（1 = 塗りつぶし、0 = 線のみ） */
-    "wght" 400,
-    /* 太さ（100〜700の範囲） */
-    "GRAD" 0,
-    /* グラデーション効果（-25〜200の範囲） */
-    "opsz" 24;
-  /* 光学サイズ（20〜48の範囲） */
-}
-
-/* ===== カスタムコンポーネント ===== */
-@layer components {
-
-  /* ボタンのカーソルスタイル */
-  button[type="submit"],
-  input[type="submit"],
-  button[type="button"] {
-    @apply cursor-pointer;
-  }
-
-  button[type="submit"]:disabled,
-  input[type="submit"]:disabled,
-  button[type="button"]:disabled {
-    @apply cursor-not-allowed opacity-50;
-  }
-
-  /* ===== Crystal Claymorphism Components ===== */
-
-  /* Base Card Style */
-  .crystal-card {
-    @apply relative overflow-hidden !rounded-[3.75rem] p-6 transition-transform duration-200 hover:scale-105 border-2;
-
-    /* CSS Variables for customization */
-    --crystal-bg-end: #f3f4f6;
-    --crystal-shadow-color: rgba(0, 0, 0, 0.05);
-    --crystal-inset-shadow: rgba(0, 0, 0, 0.05);
-    --crystal-border-color: rgba(255, 255, 255, 0.6);
-
-    /* Light Mode Styles */
-    background: radial-gradient(ellipse 120% 120% at 35% 35%,
-        #ffffff 30%,
-        var(--crystal-bg-end) 90%);
-    box-shadow: 20px 20px 60px var(--crystal-shadow-color),
-      -20px -20px 60px #ffffff, inset -5px -5px 15px var(--crystal-inset-shadow),
-      inset 5px 5px 15px rgba(255, 255, 255, 0.7);
-    border-color: var(--crystal-border-color);
-  }
-
-  /* Dark Mode Reset & Styles */
-  :is(.dark .crystal-card) {
-    background: none;
-    box-shadow: none;
-    border-color: transparent;
-    @apply bg-gray-800 border-gray-700 shadow-xl;
-  }
-
-  /* Color Variants */
-  .crystal-blue {
-    --crystal-bg-end: #dbeafe;
-    /* blue-100 */
-    --crystal-shadow-color: rgba(59, 130, 246, 0.2);
-    --crystal-inset-shadow: rgba(59, 130, 246, 0.1);
-    --crystal-border-color: rgba(191, 219, 254, 0.6);
-  }
-
-  .crystal-purple {
-    --crystal-bg-end: #f3e8ff;
-    /* purple-100 */
-    --crystal-shadow-color: rgba(168, 85, 247, 0.2);
-    --crystal-inset-shadow: rgba(168, 85, 247, 0.1);
-    --crystal-border-color: rgba(233, 213, 255, 0.6);
-  }
-
-  .crystal-emerald {
-    --crystal-bg-end: #d1fae5;
-    /* emerald-100 */
-    --crystal-shadow-color: rgba(16, 185, 129, 0.2);
-    --crystal-inset-shadow: rgba(16, 185, 129, 0.1);
-    --crystal-border-color: rgba(167, 243, 208, 0.6);
-  }
-
-  .crystal-orange {
-    --crystal-bg-end: #ffedd5;
-    /* orange-100 */
-    --crystal-shadow-color: rgba(249, 115, 22, 0.2);
-    --crystal-inset-shadow: rgba(249, 115, 22, 0.1);
-    --crystal-border-color: rgba(254, 215, 170, 0.6);
-  }
-
-  .crystal-pink {
-    --crystal-bg-end: #fce7f3;
-    /* pink-100 */
-    --crystal-shadow-color: rgba(236, 72, 153, 0.2);
-    --crystal-inset-shadow: rgba(236, 72, 153, 0.1);
-    --crystal-border-color: rgba(251, 207, 232, 0.6);
-  }
-
-  .crystal-amber {
-    --crystal-bg-end: #fef3c7;
-    /* amber-100 */
-    --crystal-shadow-color: rgba(245, 158, 11, 0.2);
-    --crystal-inset-shadow: rgba(245, 158, 11, 0.1);
-    --crystal-border-color: rgba(253, 230, 138, 0.6);
-  }
-
-  /* ===== Cloud Animation Background ===== */
-  .cloud {
-    background: linear-gradient(to bottom,
-        #ffffff 40%,
-        #dbeafe 100%);
-    /* 白から淡いブルー(#dbeafe)へのグラデーション */
-    border-radius: 50%;
-    position: absolute;
-    filter: blur(12px);
-    opacity: 0.95;
-  }
-
-  .cloud:after,
-  .cloud:before {
-    content: "";
-    position: absolute;
-    background: inherit;
-    border-radius: 50%;
-  }
-
-  .cloud:after {
-    width: 40%;
-    height: 40%;
-    top: -20%;
-    left: 15%;
-  }
-
-  .cloud:before {
-    width: 60%;
-    height: 60%;
-    top: -30%;
-    right: 10%;
-  }
-
-  .animate-cloud-1 {
-    animation: float-cloud 60s linear infinite;
-  }
-
-  .animate-cloud-2 {
-    animation: float-cloud 90s linear infinite;
-    animation-delay: -30s;
-  }
-
-  .animate-cloud-3 {
-    animation: float-cloud 75s linear infinite;
-    animation-delay: -10s;
-  }
-}
-
-@keyframes float-cloud {
-  0% {
-    transform: translateX(100vw);
-  }
-
-  100% {
-    transform: translateX(-100%);
-  }
-}
-
-/* ===== Cyber Grid & Stardust (Dark Mode Background) ===== */
-
-/* グリッドパターン: 40px間隔の方眼紙状の線 */
-.bg-cyber-grid {
-  background-size: 40px 40px;
-  background-image:
-    linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
-    linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
-  -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, transparent 80%);
-  mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, transparent 80%);
-}
-
-/* 蛍のような光の点滅（パルスアニメーション） */
-@keyframes cyber-pulse {
-
-  0%,
-  100% {
-    opacity: 0;
-    transform: scale(0.8);
-  }
-
-  50% {
-    opacity: 1;
-    transform: scale(1.5);
-    box-shadow: 0 0 10px 2px currentColor;
-  }
-}
-
-/* データ粒子の上昇（スターダストアニメーション） */
-@keyframes data-float {
-  0% {
-    transform: translateY(0) scale(1);
-    opacity: 0;
-  }
-
-  10% {
-    opacity: 0.7;
-  }
-
-  90% {
-    opacity: 0.7;
-  }
-
-  100% {
-    transform: translateY(-100vh) scale(0.5);
-    opacity: 0;
-  }
-}
-
-/* ===== カスタムユーティリティ ===== */
-@layer utilities {
-
-  /* グラデーションテキスト用 */
-  .bg-clip-text {
-    -webkit-background-clip: text;
-    background-clip: text;
-  }
-
-  .text-fill-transparent {
-    -webkit-text-fill-color: transparent;
-  }
-
-  /* テキストシャドウ（白文字の視認性向上用） */
-  .text-shadow {
-    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
-  }
-
-  /* カスタムスクロールバー（Webkit系） */
-  .scrollbar-thin::-webkit-scrollbar {
-    width: 6px;
-    height: 6px;
-  }
-
-  .scrollbar-thin::-webkit-scrollbar-track {
-    background: transparent;
-  }
-
-  .scrollbar-thin::-webkit-scrollbar-thumb {
-    background-color: rgba(156, 163, 175, 0.5);
-    /* gray-400/50 */
-    border-radius: 20px;
-  }
-
-  /* ダークモード用スクロールバー */
-  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
-    background-color: rgba(87, 83, 78, 0.8);
-    /* stone-600/80 */
-  }
-
-  .dark .scrollbar-thin::-webkit-scrollbar-track {
-    background-color: rgba(41, 37, 36, 0.3);
-    /* stone-900/30 */
-  }
+/* Tailwind CSSのベースディレクティブ */
+@tailwind base;
+@tailwind components;
+@tailwind utilities;
+
+/* Material Symbols アイコンフォント設定 */
+/* アイコンの見た目を統一するための設定 */
+.material-symbols-outlined {
+  font-variation-settings: "FILL" 0,
+    /* アイコンを塗りつぶす（1 = 塗りつぶし、0 = 線のみ） */
+    "wght" 400,
+    /* 太さ（100〜700の範囲） */
+    "GRAD" 0,
+    /* グラデーション効果（-25〜200の範囲） */
+    "opsz" 24;
+  /* 光学サイズ（20〜48の範囲） */
+}
+
+/* ===== カスタムコンポーネント ===== */
+@layer components {
+
+  /* ボタンのカーソルスタイル */
+  button[type="submit"],
+  input[type="submit"],
+  button[type="button"] {
+    @apply cursor-pointer;
+  }
+
+  button[type="submit"]:disabled,
+  input[type="submit"]:disabled,
+  button[type="button"]:disabled {
+    @apply cursor-not-allowed opacity-50;
+  }
+
+  /* ===== Crystal Claymorphism Components ===== */
+
+  /* Base Card Style */
+  .crystal-card {
+    @apply relative overflow-hidden !rounded-[3.75rem] p-6 transition-transform duration-200 hover:scale-105 border-2;
+
+    /* CSS Variables for customization */
+    --crystal-bg-end: #f3f4f6;
+    --crystal-shadow-color: rgba(0, 0, 0, 0.05);
+    --crystal-inset-shadow: rgba(0, 0, 0, 0.05);
+    --crystal-border-color: rgba(255, 255, 255, 0.6);
+
+    /* Light Mode Styles */
+    background: radial-gradient(ellipse 120% 120% at 35% 35%,
+        #ffffff 30%,
+        var(--crystal-bg-end) 90%);
+    box-shadow: 20px 20px 60px var(--crystal-shadow-color),
+      -20px -20px 60px #ffffff, inset -5px -5px 15px var(--crystal-inset-shadow),
+      inset 5px 5px 15px rgba(255, 255, 255, 0.7);
+    border-color: var(--crystal-border-color);
+  }
+
+  /* Dark Mode Reset & Styles */
+  :is(.dark .crystal-card) {
+    background: none;
+    box-shadow: none;
+    border-color: transparent;
+    @apply bg-gray-800 border-gray-700 shadow-xl;
+  }
+
+  /* Color Variants */
+  .crystal-blue {
+    --crystal-bg-end: #dbeafe;
+    /* blue-100 */
+    --crystal-shadow-color: rgba(59, 130, 246, 0.2);
+    --crystal-inset-shadow: rgba(59, 130, 246, 0.1);
+    --crystal-border-color: rgba(191, 219, 254, 0.6);
+  }
+
+  .crystal-purple {
+    --crystal-bg-end: #f3e8ff;
+    /* purple-100 */
+    --crystal-shadow-color: rgba(168, 85, 247, 0.2);
+    --crystal-inset-shadow: rgba(168, 85, 247, 0.1);
+    --crystal-border-color: rgba(233, 213, 255, 0.6);
+  }
+
+  .crystal-emerald {
+    --crystal-bg-end: #d1fae5;
+    /* emerald-100 */
+    --crystal-shadow-color: rgba(16, 185, 129, 0.2);
+    --crystal-inset-shadow: rgba(16, 185, 129, 0.1);
+    --crystal-border-color: rgba(167, 243, 208, 0.6);
+  }
+
+  .crystal-orange {
+    --crystal-bg-end: #ffedd5;
+    /* orange-100 */
+    --crystal-shadow-color: rgba(249, 115, 22, 0.2);
+    --crystal-inset-shadow: rgba(249, 115, 22, 0.1);
+    --crystal-border-color: rgba(254, 215, 170, 0.6);
+  }
+
+  .crystal-pink {
+    --crystal-bg-end: #fce7f3;
+    /* pink-100 */
+    --crystal-shadow-color: rgba(236, 72, 153, 0.2);
+    --crystal-inset-shadow: rgba(236, 72, 153, 0.1);
+    --crystal-border-color: rgba(251, 207, 232, 0.6);
+  }
+
+  .crystal-amber {
+    --crystal-bg-end: #fef3c7;
+    /* amber-100 */
+    --crystal-shadow-color: rgba(245, 158, 11, 0.2);
+    --crystal-inset-shadow: rgba(245, 158, 11, 0.1);
+    --crystal-border-color: rgba(253, 230, 138, 0.6);
+  }
+
+  /* ===== Cloud Animation Background ===== */
+  .cloud {
+    background: linear-gradient(to bottom,
+        #ffffff 40%,
+        #dbeafe 100%);
+    /* 白から淡いブルー(#dbeafe)へのグラデーション */
+    border-radius: 50%;
+    position: absolute;
+    filter: blur(12px);
+    opacity: 0.95;
+  }
+
+  .cloud:after,
+  .cloud:before {
+    content: "";
+    position: absolute;
+    background: inherit;
+    border-radius: 50%;
+  }
+
+  .cloud:after {
+    width: 40%;
+    height: 40%;
+    top: -20%;
+    left: 15%;
+  }
+
+  .cloud:before {
+    width: 60%;
+    height: 60%;
+    top: -30%;
+    right: 10%;
+  }
+
+  .animate-cloud-1 {
+    animation: float-cloud 60s linear infinite;
+  }
+
+  .animate-cloud-2 {
+    animation: float-cloud 90s linear infinite;
+    animation-delay: -30s;
+  }
+
+  .animate-cloud-3 {
+    animation: float-cloud 75s linear infinite;
+    animation-delay: -10s;
+  }
+}
+
+@keyframes float-cloud {
+  0% {
+    transform: translateX(100vw);
+  }
+
+  100% {
+    transform: translateX(-100%);
+  }
+}
+
+/* ===== Cyber Grid & Stardust (Dark Mode Background) ===== */
+
+/* グリッドパターン: 40px間隔の方眼紙状の線 */
+.bg-cyber-grid {
+  background-size: 40px 40px;
+  background-image:
+    linear-gradient(to right, rgba(255, 255, 255, 0.03) 1px, transparent 1px),
+    linear-gradient(to bottom, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
+  -webkit-mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, transparent 80%);
+  mask-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, transparent 80%);
+}
+
+/* 蛍のような光の点滅（パルスアニメーション） */
+@keyframes cyber-pulse {
+
+  0%,
+  100% {
+    opacity: 0;
+    transform: scale(0.8);
+  }
+
+  50% {
+    opacity: 1;
+    transform: scale(1.5);
+    box-shadow: 0 0 10px 2px currentColor;
+  }
+}
+
+/* データ粒子の上昇（スターダストアニメーション） */
+@keyframes data-float {
+  0% {
+    transform: translateY(0) scale(1);
+    opacity: 0;
+  }
+
+  10% {
+    opacity: 0.7;
+  }
+
+  90% {
+    opacity: 0.7;
+  }
+
+  100% {
+    transform: translateY(-100vh) scale(0.5);
+    opacity: 0;
+  }
+}
+
+/* ===== カスタムユーティリティ ===== */
+@layer utilities {
+
+  /* グラデーションテキスト用 */
+  .bg-clip-text {
+    -webkit-background-clip: text;
+    background-clip: text;
+  }
+
+  .text-fill-transparent {
+    -webkit-text-fill-color: transparent;
+  }
+
+  /* テキストシャドウ（白文字の視認性向上用） */
+  .text-shadow {
+    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
+  }
+
+  /* カスタムスクロールバー（Webkit系） */
+  .scrollbar-thin::-webkit-scrollbar {
+    width: 6px;
+    height: 6px;
+  }
+
+  .scrollbar-thin::-webkit-scrollbar-track {
+    background: transparent;
+  }
+
+  .scrollbar-thin::-webkit-scrollbar-thumb {
+    background-color: rgba(156, 163, 175, 0.5);
+    /* gray-400/50 */
+    border-radius: 20px;
+  }
+
+  /* ダークモード用スクロールバー */
+  .dark .scrollbar-thin::-webkit-scrollbar-thumb {
+    background-color: rgba(87, 83, 78, 0.8);
+    /* stone-600/80 */
+  }
+
+  .dark .scrollbar-thin::-webkit-scrollbar-track {
+    background-color: rgba(41, 37, 36, 0.3);
+    /* stone-900/30 */
+  }
 }
\ No newline at end of file
diff --git a/app/models/user.rb b/app/models/user.rb
index 0f48d9e..40b5493 100644
--- a/app/models/user.rb
+++ b/app/models/user.rb
@@ -1,479 +1,479 @@
-class User < ApplicationRecord
-  # Include default devise modules. Others available are:
-  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable
-  devise :database_authenticatable, :registerable,
-         :recoverable, :rememberable, :validatable, :trackable,
-         :omniauthable, omniauth_providers: [ :google_oauth2 ]
-  # ユーザー権限（0: 一般, 1: 管理者, 2: ゲスト管理者）
-  # guest: 管理画面へアクセス可だが、閲覧のみ等の制限あり
-  enum :role, { general: 0, admin: 1, guest: 2 }
-
-  # 散歩記録との関連付け（1人のユーザーは複数の散歩記録を持つ）
-  # dependent: :destroy は、ユーザーが削除されたときに関連する散歩記録も一緒に削除する
-  has_many :walks, dependent: :destroy
-
-  # SNS機能の関連付け
-  has_many :posts, dependent: :destroy
-  has_many :reactions, dependent: :destroy
-
-  # 通知機能の関連付け
-  has_many :notifications, dependent: :destroy
-  has_many :web_push_subscriptions, dependent: :destroy
-
-  # 実績機能の関連付け
-  has_many :user_achievements, dependent: :destroy
-  has_many :achievements, through: :user_achievements
-
-  # Active Storage: ランキングOGP画像の添付
-  has_one_attached :ranking_ogp_image
-
-  # Active Storage: Googleアバター画像のキャッシュ（OGP生成高速化のため）
-  has_one_attached :cached_avatar
-
-  # Active Storage: ユーザーアップロードのアバター画像
-  has_one_attached :uploaded_avatar
-
-  # アバターの種類（0: デフォルト, 1: Google画像, 2: アップロード画像）
-  enum :avatar_type, { default: 0, google: 1, uploaded: 2 }
-
-  # ユーザー名のバリデーション
-  validates :name, presence: true
-
-  # 目標距離のバリデーション
-  # 1. 必須であること（デフォルト値があるため通常は問題ないが、念のため）
-  # 2. 数値であること
-  # 3. 0より大きいこと
-  validates :target_distance, presence: true, numericality: { only_integer: true, greater_than: 0, less_than_or_equal_to: 100_000 }
-
-  # 通知設定のバリデーション
-  validates :inactive_days_threshold, numericality: { only_integer: true, greater_than_or_equal_to: 1, less_than_or_equal_to: 30 }
-  validates :walk_reminder_time, presence: true, if: :walk_reminder_enabled?
-
-  # アバター画像のバリデーション
-  validate :validate_uploaded_avatar
-
-  private
-
-  def validate_uploaded_avatar
-    return unless uploaded_avatar.attached?
-
-    # ファイルサイズ制限 (5MB)
-    if uploaded_avatar.blob.byte_size > 5.megabytes
-      errors.add(:uploaded_avatar, "は5MB以下にしてください")
-    end
-
-    # ファイル形式制限
-    unless uploaded_avatar.content_type.in?(%w[image/jpeg image/png image/gif image/webp])
-      errors.add(:uploaded_avatar, "は画像ファイル（JPG, PNG, GIF, WEBP）のみアップロード可能です")
-    end
-  end
-
-  public
-
-  # 表示するアバターURLを決定するメソッド
-  # 優先順位: uploaded > google > default
-  # ただし、avatar_typeの設定に従って返す
-  def display_avatar_url
-    if uploaded?
-      uploaded_avatar if uploaded_avatar.attached?
-    elsif google?
-      avatar_url if avatar_url.present?
-    else
-      nil # デフォルト（イニシャル画像など）を表示
-    end
-  end
-
-  # Google OAuth2認証のコールバック処理
-  # OmniAuthから返されたデータを使って、ユーザー情報とトークンを保存する
-  def self.from_omniauth(auth)
-    # Google UIDでユーザーを検索
-    # メールアドレスでの自動紐付けは行わない（セキュリティと意図しない連携を防ぐため）
-    user = User.find_by(google_uid: auth.uid)
-
-    if user
-      # 既存ユーザー（連携済み）の場合、Google認証情報を更新
-      user.update(
-        google_uid: auth.uid,
-        google_token: auth.credentials.token,
-        google_refresh_token: auth.credentials.refresh_token,
-        google_expires_at: Time.at(auth.credentials.expires_at),
-        avatar_url: auth.info.image, # アバター画像を更新
-        avatar_type: :google # アバター種別をGoogleに設定
-      )
-    end
-
-    user
-  end
-
-  # ポートフォリオ閲覧用ゲストユーザーを作成
-  # 管理者（Admin）のデータをコピーして、リッチな体験を提供する
-  def self.create_portfolio_guest
-    # 古いゲストユーザーをお掃除（作成から24時間以上経過）
-    cleanup_old_guests
-
-    # コピー元となるユーザーを取得
-    # 1. 散歩記録が多い管理者を優先（リッチなデータをコピーするため）
-    # 2. いなければ管理者の最初
-    admin_user = User.admin.joins(:walks).group("users.id").order("COUNT(walks.id) DESC").first || User.admin.first
-
-    # 互換性のため、ID:2が存在し、かつデータがあるならそれを使う手もあるが、動的なデータ量を優先する
-
-    Rails.logger.info "Guest Mode: Selected admin user candidate ID: #{admin_user&.id}"
-
-    # 万が一管理者がいない場合は、最低限のゲストを作成して返す
-    unless admin_user
-      return create_fallback_guest
-    end
-
-    # トランザクションで一括処理
-    transaction do
-      # ゲストユーザー作成
-      guest_email = "guest_#{Time.current.to_i}_#{SecureRandom.hex(4)}@example.com"
-      guest = User.create!(
-        email: guest_email,
-        password: SecureRandom.urlsafe_base64,
-        name: "ゲストユーザー",
-        role: :guest,
-        target_distance: admin_user.target_distance,
-        avatar_type: :default,
-        # 通知設定などはデフォルトでOK
-      )
-
-      # === データコピー処理 (直近3ヶ月分) ===
-
-      # 1. 散歩記録（Walks）のコピー
-      # コピー対象期間
-      range = 3.months.ago.to_date..Date.current
-
-      source_walks = admin_user.walks.where(walked_on: range)
-      Rails.logger.info "Guest Mode: Cloning data from Admin ID: #{admin_user.id}"
-      Rails.logger.info "Guest Mode: Copying #{source_walks.count} walks..."
-
-      # insert_allのためのハッシュ配列を作成
-      walks_data = source_walks.map do |walk|
-        walk.attributes.except("id", "user_id", "created_at", "updated_at").merge(
-          "user_id" => guest.id,
-          "created_at" => Time.current,
-          "updated_at" => Time.current
-        )
-      end
-
-      # 一括挿入（バリデーションスキップ・高速化）
-      Walk.insert_all(walks_data) if walks_data.present?
-
-      # 新しく挿入されたゲストのWalkを取得し、walked_onとdistanceでマッピング用のハッシュを作成
-      # キー: [walked_on, distance], 値: ゲストのWalk ID
-      guest_walks = guest.walks.reload.index_by { |w| [w.walked_on, w.distance] }
-
-      # 2. 投稿（Posts）のコピー
-      # タイムスタンプも維持したいので、created_atもコピーする
-      source_posts = admin_user.posts.where(created_at: 3.months.ago..Time.current)
-
-      posts_data = source_posts.map do |post|
-        # walk_idをゲストのWalkにマッピング
-        new_walk_id = if post.walk_id
-                        original_walk = Walk.find_by(id: post.walk_id)
-                        if original_walk
-                          guest_walk = guest_walks[[original_walk.walked_on, original_walk.distance]]
-                          guest_walk&.id
-                        end
-        end
-
-        post.attributes.except("id", "user_id", "walk_id").merge(
-          "user_id" => guest.id,
-          "walk_id" => new_walk_id  # ゲストのWalk IDにマッピング
-        )
-      end
-
-      Post.insert_all(posts_data) if posts_data.present?
-      Rails.logger.info "Guest Mode: Copied #{posts_data.size} posts" if posts_data.present?
-
-      # 3. 実績（Achievements）のコピー
-      # 中間テーブル UserAchievement をコピー
-      source_achievements = admin_user.user_achievements
-
-      achievements_data = source_achievements.map do |ua|
-        ua.attributes.except("id", "user_id", "created_at", "updated_at").merge(
-          "user_id" => guest.id,
-          "created_at" => Time.current,
-          "updated_at" => Time.current
-        )
-      end
-
-      UserAchievement.insert_all(achievements_data) if achievements_data.present?
-      Rails.logger.info "Guest Mode: Copied #{achievements_data.size} achievements" if achievements_data.present?
-
-      # 作成したゲストユーザーを返す
-      guest
-    rescue ActiveRecord::RecordInvalid => e
-      Rails.logger.error "Guest creation validation failed: #{e.message}"
-      raise  # トランザクションロールバック
-    rescue => e
-      Rails.logger.error "Guest creation failed: #{e.class} - #{e.message}"
-      raise
-    end
-  end
-
-  # 管理者がいない場合のフォールバック用ゲスト作成
-  def self.create_fallback_guest
-    guest_email = "guest_#{Time.current.to_i}@example.com"
-    User.create!(
-      email: guest_email,
-      password: SecureRandom.urlsafe_base64,
-      name: "ゲストユーザー",
-      role: :guest,
-      target_distance: 5000,
-      avatar_type: :default
-    )
-  end
-
-  # 古いゲストアカウントのお掃除
-  def self.cleanup_old_guests
-    # role: guest かつ 作成から24時間以上経過したユーザーを削除
-    User.where(role: :guest).where("created_at < ?", 24.hours.ago).destroy_all
-  end
-
-  def google_token_valid?
-    google_token_status == :valid
-  end
-
-  # Googleトークンの詳細なステータスを返す
-  # @return [Symbol] :valid, :not_connected, :expired_need_reauth, :temporary_error
-  def google_token_status
-    # ゲストユーザーは常に連携済み（ダミーデータを使用するため）
-    return :valid if guest?
-
-    # 管理者も一般ユーザーと同様にトークンチェックを行う
-    # （トークンがクリアされた場合は再連携を促す）
-
-    # トークンの存在確認を強化
-    return :not_connected unless google_token.present?
-    return :not_connected unless google_refresh_token.present?
-
-    # 有効期限が未設定の場合は再認証必要（不完全なトークン状態）
-    return :expired_need_reauth unless google_expires_at.present?
-
-    # トークンの有効期限をチェック
-    if google_expires_at > Time.current
-      :valid
-    else
-      # 期限切れの場合、リフレッシュトークンで自動更新を試みる
-      case refresh_google_token!
-      when true then :valid
-      when :reauth_required then :expired_need_reauth
-      else :temporary_error
-      end
-    end
-  end
-
-  # リフレッシュトークンを使用してアクセストークンを更新する
-  # @return [Boolean, Symbol] true:成功, :reauth_required:再認証が必要, false:その他エラー
-  def refresh_google_token!
-    return false unless google_refresh_token.present?
-
-    require "net/http"
-    require "json"
-
-    # Google OAuth2のトークンエンドポイント
-    uri = URI("https://oauth2.googleapis.com/token")
-
-    # リフレッシュリクエストのパラメータ
-    google_creds = Rails.application.credentials.google || {}
-    params = {
-      client_id: google_creds[:client_id],
-      client_secret: google_creds[:client_secret],
-      refresh_token: google_refresh_token,
-      grant_type: "refresh_token"
-    }
-
-    begin
-      # POSTリクエストを送信
-      response = Net::HTTP.post_form(uri, params)
-      data = JSON.parse(response.body)
-
-      if response.is_a?(Net::HTTPSuccess) && data["access_token"]
-        # 新しいトークン情報で更新
-        update!(
-          google_token: data["access_token"],
-          google_expires_at: Time.current + data["expires_in"].to_i.seconds
-        )
-
-        Rails.logger.info "Google token refreshed successfully for user #{id}"
-        true
-      else
-        error_type = data["error"]
-        if error_type == "invalid_grant"
-          # リフレッシュトークンが無効化された（許可剥奪など）
-          Rails.logger.error "Google refresh token revoked for user #{id}"
-          :reauth_required
-        else
-          Rails.logger.error "Failed to refresh Google token for user #{id}: #{error_type}"
-          false
-        end
-      end
-    rescue StandardError => e
-      Rails.logger.error "Error refreshing Google token for user #{id}: #{e.message}"
-      false
-    end
-  end
-
-  # 連続して散歩した日数を計算する
-  # 注意: 今日の記録がある場合は今日から、ない場合は昨日から遡ってカウントする
-  #       これにより、今日歩いた瞬間に+1日として反映され、
-  #       今日歩いていなくても昨日までの連続記録が維持される
-  def consecutive_walk_days
-    # 今日の記録があるかチェック
-    has_walked_today = walks.exists?(walked_on: Date.current)
-
-    # カウント開始日を決定（今日歩いた場合は今日から、そうでなければ昨日から）
-    start_date = has_walked_today ? Date.current : Date.yesterday
-
-    # N+1対策: ループ内でのクエリ発行を避けるため、必要な日付データを一括取得
-    # 開始日以前の記録の日付を重複なしで降順（新しい順）に取得
-    walk_dates = walks.where("walked_on <= ?", start_date)
-                      .select(:walked_on)
-                      .distinct
-                      .order(walked_on: :desc)
-                      .pluck(:walked_on)
-
-    consecutive_count = 0
-    check_date = start_date
-
-    walk_dates.each do |date|
-      if date == check_date
-        # 日付が一致すればカウントアップし、チェック対象を前日にずらす
-        consecutive_count += 1
-        check_date -= 1.day
-      else
-        # 日付が連続していない（飛んでいる）場合、そこで終了
-        break
-      end
-    end
-
-    consecutive_count
-  end
-
-  # 過去の最大連続記録日数を計算する
-  def max_consecutive_walk_days
-    # 日付のみを取得してソート（重複排除）
-    dates = walks.order(walked_on: :asc).pluck(:walked_on).uniq
-
-    return 0 if dates.empty?
-
-    max_streak = 0
-    current_streak = 0
-    prev_date = nil
-
-    dates.each do |date|
-      if prev_date.nil? || date == prev_date + 1.day
-        current_streak += 1
-      else
-        # 連続が途切れた場合、最大値を更新してリセット
-        max_streak = [ max_streak, current_streak ].max
-        current_streak = 1
-      end
-      prev_date = date
-    end
-
-    # 最後のストリークも含めて最大値を返す
-    [ max_streak, current_streak ].max
-  end
-
-  # ランキング用クラスメソッド
-  # 期間ごとの距離を集計して降順に並べる
-  # @param period [String] 期間（weekly, monthly, all_time）
-  def self.ranking(period: "weekly", limit: 100)
-    # 期間に応じた日付範囲を取得
-    start_date = case period
-    when "weekly"
-                   Date.current.beginning_of_week
-    when "monthly"
-                   Date.current.beginning_of_month
-    when "yearly"
-                   Date.current.beginning_of_year
-    when "all_time"
-                   nil # 全期間
-    else
-                   Date.current.beginning_of_week
-    end
-
-    # 実際に歩いた距離を集計
-    relation = joins(:walks)
-
-    relation = relation.where(walks: { walked_on: start_date..Date.current }) if start_date
-
-    relation
-      .group(:id)
-      .select("users.*, SUM(walks.distance) as total_distance")
-      .order(Arel.sql("total_distance DESC"))
-      .limit(limit) # 制限行数
-  end
-
-  # 閲覧ユーザーに応じたランキングスコープ
-  # ゲスト以外が見る場合、ゲストユーザーはランキングから除外して「汚染」を防ぐ
-  # ゲスト自身が見る場合、自分（と他のゲスト）も含めて表示し、自分の順位を確認できるようにする
-  scope :ranking_for, ->(user, period: "weekly") {
-    if user&.guest?
-      # ゲストが見る場合: 全ユーザーを対象（現在のランキングロジックそのまま）
-      ranking(period: period)
-    else
-      # 一般ユーザー/未ログインが見る場合: ゲストを除外
-      ranking(period: period).where.not(role: :guest)
-    end
-  }
-
-  # 未読通知数を取得
-  def unread_notifications_count
-    notifications.unread.count
-  end
-
-  # ランキングOGP画像生成用の週間統計情報を取得
-  def weekly_ranking_stats
-    start_date = Date.current.beginning_of_week
-    end_date = Date.current.end_of_week
-
-    # 週間データ集計
-    weekly_walks = walks.reload.where(walked_on: start_date..end_date)
-    total_distance = weekly_walks.sum(:distance)
-    total_steps = weekly_walks.sum(:steps)
-
-    # 順位計算
-    # 自分より距離が長いユーザーの数をカウント + 1 = 順位
-    higher_rank_users_count = User.joins(:walks)
-                                  .where(walks: { walked_on: start_date..end_date })
-                                  .group("users.id")
-                                  .having("SUM(walks.distance) > ?", total_distance)
-                                  .pluck("users.id")
-                                  .count
-
-    rank = higher_rank_users_count + 1
-
-    # 英語の序数を生成（ロケール設定に依存しないように自前で処理）
-    suffix = case rank % 100
-    when 11, 12, 13 then "th"
-    else
-               case rank % 10
-               when 1 then "st"
-               when 2 then "nd"
-               when 3 then "rd"
-               else "th"
-               end
-    end
-    rank_with_ordinal = "#{rank}#{suffix}"
-
-    # レベル計算
-    level = StatsService.new(self).level
-
-    {
-      level: level,
-      date: "#{start_date.strftime('%m/%d')} - #{end_date.strftime('%m/%d')}",
-      label1: "RANK",
-      value1: rank_with_ordinal,
-      label2: "STEPS",
-      value2: ActiveSupport::NumberHelper.number_to_delimited(total_steps),
-      label3: "DISTANCE",
-      value3: "#{total_distance.round(1)} km",
-      period_key: "#{start_date.strftime('%Y%m%d')}_#{end_date.strftime('%Y%m%d')}"
-    }
-  end
-end
+class User < ApplicationRecord
+  # Include default devise modules. Others available are:
+  # :confirmable, :lockable, :timeoutable, :trackable and :omniauthable
+  devise :database_authenticatable, :registerable,
+         :recoverable, :rememberable, :validatable, :trackable,
+         :omniauthable, omniauth_providers: [ :google_oauth2 ]
+  # ユーザー権限（0: 一般, 1: 管理者, 2: ゲスト管理者）
+  # guest: 管理画面へアクセス可だが、閲覧のみ等の制限あり
+  enum :role, { general: 0, admin: 1, guest: 2 }
+
+  # 散歩記録との関連付け（1人のユーザーは複数の散歩記録を持つ）
+  # dependent: :destroy は、ユーザーが削除されたときに関連する散歩記録も一緒に削除する
+  has_many :walks, dependent: :destroy
+
+  # SNS機能の関連付け
+  has_many :posts, dependent: :destroy
+  has_many :reactions, dependent: :destroy
+
+  # 通知機能の関連付け
+  has_many :notifications, dependent: :destroy
+  has_many :web_push_subscriptions, dependent: :destroy
+
+  # 実績機能の関連付け
+  has_many :user_achievements, dependent: :destroy
+  has_many :achievements, through: :user_achievements
+
+  # Active Storage: ランキングOGP画像の添付
+  has_one_attached :ranking_ogp_image
+
+  # Active Storage: Googleアバター画像のキャッシュ（OGP生成高速化のため）
+  has_one_attached :cached_avatar
+
+  # Active Storage: ユーザーアップロードのアバター画像
+  has_one_attached :uploaded_avatar
+
+  # アバターの種類（0: デフォルト, 1: Google画像, 2: アップロード画像）
+  enum :avatar_type, { default: 0, google: 1, uploaded: 2 }
+
+  # ユーザー名のバリデーション
+  validates :name, presence: true
+
+  # 目標距離のバリデーション
+  # 1. 必須であること（デフォルト値があるため通常は問題ないが、念のため）
+  # 2. 数値であること
+  # 3. 0より大きいこと
+  validates :target_distance, presence: true, numericality: { only_integer: true, greater_than: 0, less_than_or_equal_to: 100_000 }
+
+  # 通知設定のバリデーション
+  validates :inactive_days_threshold, numericality: { only_integer: true, greater_than_or_equal_to: 1, less_than_or_equal_to: 30 }
+  validates :walk_reminder_time, presence: true, if: :walk_reminder_enabled?
+
+  # アバター画像のバリデーション
+  validate :validate_uploaded_avatar
+
+  private
+
+  def validate_uploaded_avatar
+    return unless uploaded_avatar.attached?
+
+    # ファイルサイズ制限 (5MB)
+    if uploaded_avatar.blob.byte_size > 5.megabytes
+      errors.add(:uploaded_avatar, "は5MB以下にしてください")
+    end
+
+    # ファイル形式制限
+    unless uploaded_avatar.content_type.in?(%w[image/jpeg image/png image/gif image/webp])
+      errors.add(:uploaded_avatar, "は画像ファイル（JPG, PNG, GIF, WEBP）のみアップロード可能です")
+    end
+  end
+
+  public
+
+  # 表示するアバターURLを決定するメソッド
+  # 優先順位: uploaded > google > default
+  # ただし、avatar_typeの設定に従って返す
+  def display_avatar_url
+    if uploaded?
+      uploaded_avatar if uploaded_avatar.attached?
+    elsif google?
+      avatar_url if avatar_url.present?
+    else
+      nil # デフォルト（イニシャル画像など）を表示
+    end
+  end
+
+  # Google OAuth2認証のコールバック処理
+  # OmniAuthから返されたデータを使って、ユーザー情報とトークンを保存する
+  def self.from_omniauth(auth)
+    # Google UIDでユーザーを検索
+    # メールアドレスでの自動紐付けは行わない（セキュリティと意図しない連携を防ぐため）
+    user = User.find_by(google_uid: auth.uid)
+
+    if user
+      # 既存ユーザー（連携済み）の場合、Google認証情報を更新
+      user.update(
+        google_uid: auth.uid,
+        google_token: auth.credentials.token,
+        google_refresh_token: auth.credentials.refresh_token,
+        google_expires_at: Time.at(auth.credentials.expires_at),
+        avatar_url: auth.info.image, # アバター画像を更新
+        avatar_type: :google # アバター種別をGoogleに設定
+      )
+    end
+
+    user
+  end
+
+  # ポートフォリオ閲覧用ゲストユーザーを作成
+  # 管理者（Admin）のデータをコピーして、リッチな体験を提供する
+  def self.create_portfolio_guest
+    # 古いゲストユーザーをお掃除（作成から24時間以上経過）
+    cleanup_old_guests
+
+    # コピー元となるユーザーを取得
+    # 1. 散歩記録が多い管理者を優先（リッチなデータをコピーするため）
+    # 2. いなければ管理者の最初
+    admin_user = User.admin.joins(:walks).group("users.id").order("COUNT(walks.id) DESC").first || User.admin.first
+
+    # 互換性のため、ID:2が存在し、かつデータがあるならそれを使う手もあるが、動的なデータ量を優先する
+
+    Rails.logger.info "Guest Mode: Selected admin user candidate ID: #{admin_user&.id}"
+
+    # 万が一管理者がいない場合は、最低限のゲストを作成して返す
+    unless admin_user
+      return create_fallback_guest
+    end
+
+    # トランザクションで一括処理
+    transaction do
+      # ゲストユーザー作成
+      guest_email = "guest_#{Time.current.to_i}_#{SecureRandom.hex(4)}@example.com"
+      guest = User.create!(
+        email: guest_email,
+        password: SecureRandom.urlsafe_base64,
+        name: "ゲストユーザー",
+        role: :guest,
+        target_distance: admin_user.target_distance,
+        avatar_type: :default,
+        # 通知設定などはデフォルトでOK
+      )
+
+      # === データコピー処理 (直近3ヶ月分) ===
+
+      # 1. 散歩記録（Walks）のコピー
+      # コピー対象期間
+      range = 3.months.ago.to_date..Date.current
+
+      source_walks = admin_user.walks.where(walked_on: range)
+      Rails.logger.info "Guest Mode: Cloning data from Admin ID: #{admin_user.id}"
+      Rails.logger.info "Guest Mode: Copying #{source_walks.count} walks..."
+
+      # insert_allのためのハッシュ配列を作成
+      walks_data = source_walks.map do |walk|
+        walk.attributes.except("id", "user_id", "created_at", "updated_at").merge(
+          "user_id" => guest.id,
+          "created_at" => Time.current,
+          "updated_at" => Time.current
+        )
+      end
+
+      # 一括挿入（バリデーションスキップ・高速化）
+      Walk.insert_all(walks_data) if walks_data.present?
+
+      # 新しく挿入されたゲストのWalkを取得し、walked_onとdistanceでマッピング用のハッシュを作成
+      # キー: [walked_on, distance], 値: ゲストのWalk ID
+      guest_walks = guest.walks.reload.index_by { |w| [w.walked_on, w.distance] }
+
+      # 2. 投稿（Posts）のコピー
+      # タイムスタンプも維持したいので、created_atもコピーする
+      source_posts = admin_user.posts.where(created_at: 3.months.ago..Time.current)
+
+      posts_data = source_posts.map do |post|
+        # walk_idをゲストのWalkにマッピング
+        new_walk_id = if post.walk_id
+                        original_walk = Walk.find_by(id: post.walk_id)
+                        if original_walk
+                          guest_walk = guest_walks[[original_walk.walked_on, original_walk.distance]]
+                          guest_walk&.id
+                        end
+        end
+
+        post.attributes.except("id", "user_id", "walk_id").merge(
+          "user_id" => guest.id,
+          "walk_id" => new_walk_id  # ゲストのWalk IDにマッピング
+        )
+      end
+
+      Post.insert_all(posts_data) if posts_data.present?
+      Rails.logger.info "Guest Mode: Copied #{posts_data.size} posts" if posts_data.present?
+
+      # 3. 実績（Achievements）のコピー
+      # 中間テーブル UserAchievement をコピー
+      source_achievements = admin_user.user_achievements
+
+      achievements_data = source_achievements.map do |ua|
+        ua.attributes.except("id", "user_id", "created_at", "updated_at").merge(
+          "user_id" => guest.id,
+          "created_at" => Time.current,
+          "updated_at" => Time.current
+        )
+      end
+
+      UserAchievement.insert_all(achievements_data) if achievements_data.present?
+      Rails.logger.info "Guest Mode: Copied #{achievements_data.size} achievements" if achievements_data.present?
+
+      # 作成したゲストユーザーを返す
+      guest
+    rescue ActiveRecord::RecordInvalid => e
+      Rails.logger.error "Guest creation validation failed: #{e.message}"
+      raise  # トランザクションロールバック
+    rescue => e
+      Rails.logger.error "Guest creation failed: #{e.class} - #{e.message}"
+      raise
+    end
+  end
+
+  # 管理者がいない場合のフォールバック用ゲスト作成
+  def self.create_fallback_guest
+    guest_email = "guest_#{Time.current.to_i}@example.com"
+    User.create!(
+      email: guest_email,
+      password: SecureRandom.urlsafe_base64,
+      name: "ゲストユーザー",
+      role: :guest,
+      target_distance: 5000,
+      avatar_type: :default
+    )
+  end
+
+  # 古いゲストアカウントのお掃除
+  def self.cleanup_old_guests
+    # role: guest かつ 作成から24時間以上経過したユーザーを削除
+    User.where(role: :guest).where("created_at < ?", 24.hours.ago).destroy_all
+  end
+
+  def google_token_valid?
+    google_token_status == :valid
+  end
+
+  # Googleトークンの詳細なステータスを返す
+  # @return [Symbol] :valid, :not_connected, :expired_need_reauth, :temporary_error
+  def google_token_status
+    # ゲストユーザーは常に連携済み（ダミーデータを使用するため）
+    return :valid if guest?
+
+    # 管理者も一般ユーザーと同様にトークンチェックを行う
+    # （トークンがクリアされた場合は再連携を促す）
+
+    # トークンの存在確認を強化
+    return :not_connected unless google_token.present?
+    return :not_connected unless google_refresh_token.present?
+
+    # 有効期限が未設定の場合は再認証必要（不完全なトークン状態）
+    return :expired_need_reauth unless google_expires_at.present?
+
+    # トークンの有効期限をチェック
+    if google_expires_at > Time.current
+      :valid
+    else
+      # 期限切れの場合、リフレッシュトークンで自動更新を試みる
+      case refresh_google_token!
+      when true then :valid
+      when :reauth_required then :expired_need_reauth
+      else :temporary_error
+      end
+    end
+  end
+
+  # リフレッシュトークンを使用してアクセストークンを更新する
+  # @return [Boolean, Symbol] true:成功, :reauth_required:再認証が必要, false:その他エラー
+  def refresh_google_token!
+    return false unless google_refresh_token.present?
+
+    require "net/http"
+    require "json"
+
+    # Google OAuth2のトークンエンドポイント
+    uri = URI("https://oauth2.googleapis.com/token")
+
+    # リフレッシュリクエストのパラメータ
+    google_creds = Rails.application.credentials.google || {}
+    params = {
+      client_id: google_creds[:client_id],
+      client_secret: google_creds[:client_secret],
+      refresh_token: google_refresh_token,
+      grant_type: "refresh_token"
+    }
+
+    begin
+      # POSTリクエストを送信
+      response = Net::HTTP.post_form(uri, params)
+      data = JSON.parse(response.body)
+
+      if response.is_a?(Net::HTTPSuccess) && data["access_token"]
+        # 新しいトークン情報で更新
+        update!(
+          google_token: data["access_token"],
+          google_expires_at: Time.current + data["expires_in"].to_i.seconds
+        )
+
+        Rails.logger.info "Google token refreshed successfully for user #{id}"
+        true
+      else
+        error_type = data["error"]
+        if error_type == "invalid_grant"
+          # リフレッシュトークンが無効化された（許可剥奪など）
+          Rails.logger.error "Google refresh token revoked for user #{id}"
+          :reauth_required
+        else
+          Rails.logger.error "Failed to refresh Google token for user #{id}: #{error_type}"
+          false
+        end
+      end
+    rescue StandardError => e
+      Rails.logger.error "Error refreshing Google token for user #{id}: #{e.message}"
+      false
+    end
+  end
+
+  # 連続して散歩した日数を計算する
+  # 注意: 今日の記録がある場合は今日から、ない場合は昨日から遡ってカウントする
+  #       これにより、今日歩いた瞬間に+1日として反映され、
+  #       今日歩いていなくても昨日までの連続記録が維持される
+  def consecutive_walk_days
+    # 今日の記録があるかチェック
+    has_walked_today = walks.exists?(walked_on: Date.current)
+
+    # カウント開始日を決定（今日歩いた場合は今日から、そうでなければ昨日から）
+    start_date = has_walked_today ? Date.current : Date.yesterday
+
+    # N+1対策: ループ内でのクエリ発行を避けるため、必要な日付データを一括取得
+    # 開始日以前の記録の日付を重複なしで降順（新しい順）に取得
+    walk_dates = walks.where("walked_on <= ?", start_date)
+                      .select(:walked_on)
+                      .distinct
+                      .order(walked_on: :desc)
+                      .pluck(:walked_on)
+
+    consecutive_count = 0
+    check_date = start_date
+
+    walk_dates.each do |date|
+      if date == check_date
+        # 日付が一致すればカウントアップし、チェック対象を前日にずらす
+        consecutive_count += 1
+        check_date -= 1.day
+      else
+        # 日付が連続していない（飛んでいる）場合、そこで終了
+        break
+      end
+    end
+
+    consecutive_count
+  end
+
+  # 過去の最大連続記録日数を計算する
+  def max_consecutive_walk_days
+    # 日付のみを取得してソート（重複排除）
+    dates = walks.order(walked_on: :asc).pluck(:walked_on).uniq
+
+    return 0 if dates.empty?
+
+    max_streak = 0
+    current_streak = 0
+    prev_date = nil
+
+    dates.each do |date|
+      if prev_date.nil? || date == prev_date + 1.day
+        current_streak += 1
+      else
+        # 連続が途切れた場合、最大値を更新してリセット
+        max_streak = [ max_streak, current_streak ].max
+        current_streak = 1
+      end
+      prev_date = date
+    end
+
+    # 最後のストリークも含めて最大値を返す
+    [ max_streak, current_streak ].max
+  end
+
+  # ランキング用クラスメソッド
+  # 期間ごとの距離を集計して降順に並べる
+  # @param period [String] 期間（weekly, monthly, all_time）
+  def self.ranking(period: "weekly", limit: 100)
+    # 期間に応じた日付範囲を取得
+    start_date = case period
+    when "weekly"
+                   Date.current.beginning_of_week
+    when "monthly"
+                   Date.current.beginning_of_month
+    when "yearly"
+                   Date.current.beginning_of_year
+    when "all_time"
+                   nil # 全期間
+    else
+                   Date.current.beginning_of_week
+    end
+
+    # 実際に歩いた距離を集計
+    relation = joins(:walks)
+
+    relation = relation.where(walks: { walked_on: start_date..Date.current }) if start_date
+
+    relation
+      .group(:id)
+      .select("users.*, SUM(walks.distance) as total_distance")
+      .order(Arel.sql("total_distance DESC"))
+      .limit(limit) # 制限行数
+  end
+
+  # 閲覧ユーザーに応じたランキングスコープ
+  # ゲスト以外が見る場合、ゲストユーザーはランキングから除外して「汚染」を防ぐ
+  # ゲスト自身が見る場合、自分（と他のゲスト）も含めて表示し、自分の順位を確認できるようにする
+  scope :ranking_for, ->(user, period: "weekly") {
+    if user&.guest?
+      # ゲストが見る場合: 全ユーザーを対象（現在のランキングロジックそのまま）
+      ranking(period: period)
+    else
+      # 一般ユーザー/未ログインが見る場合: ゲストを除外
+      ranking(period: period).where.not(role: :guest)
+    end
+  }
+
+  # 未読通知数を取得
+  def unread_notifications_count
+    notifications.unread.count
+  end
+
+  # ランキングOGP画像生成用の週間統計情報を取得
+  def weekly_ranking_stats
+    start_date = Date.current.beginning_of_week
+    end_date = Date.current.end_of_week
+
+    # 週間データ集計
+    weekly_walks = walks.reload.where(walked_on: start_date..end_date)
+    total_distance = weekly_walks.sum(:distance)
+    total_steps = weekly_walks.sum(:steps)
+
+    # 順位計算
+    # 自分より距離が長いユーザーの数をカウント + 1 = 順位
+    higher_rank_users_count = User.joins(:walks)
+                                  .where(walks: { walked_on: start_date..end_date })
+                                  .group("users.id")
+                                  .having("SUM(walks.distance) > ?", total_distance)
+                                  .pluck("users.id")
+                                  .count
+
+    rank = higher_rank_users_count + 1
+
+    # 英語の序数を生成（ロケール設定に依存しないように自前で処理）
+    suffix = case rank % 100
+    when 11, 12, 13 then "th"
+    else
+               case rank % 10
+               when 1 then "st"
+               when 2 then "nd"
+               when 3 then "rd"
+               else "th"
+               end
+    end
+    rank_with_ordinal = "#{rank}#{suffix}"
+
+    # レベル計算
+    level = StatsService.new(self).level
+
+    {
+      level: level,
+      date: "#{start_date.strftime('%m/%d')} - #{end_date.strftime('%m/%d')}",
+      label1: "RANK",
+      value1: rank_with_ordinal,
+      label2: "STEPS",
+      value2: ActiveSupport::NumberHelper.number_to_delimited(total_steps),
+      label3: "DISTANCE",
+      value3: "#{total_distance.round(1)} km",
+      period_key: "#{start_date.strftime('%Y%m%d')}_#{end_date.strftime('%Y%m%d')}"
+    }
+  end
+end
diff --git a/app/views/devise/registrations/new.html.erb b/app/views/devise/registrations/new.html.erb
index 3c55b7b..4792c7c 100644
--- a/app/views/devise/registrations/new.html.erb
+++ b/app/views/devise/registrations/new.html.erb
@@ -1,129 +1,129 @@
-<% content_for :title, "てくメモ - 新規登録" %>
-
-<div class="flex flex-1 flex-col items-center justify-center p-4 pb-24 relative overflow-hidden">
-
-  <div class="w-full max-w-md bg-[radial-gradient(120%_120%_at_50%_50%,rgba(255,255,255,0.9)_0%,rgba(255,255,255,0.6)_100%)] dark:bg-none dark:bg-slate-950/60 backdrop-blur-xl border border-white/60 dark:border-white/10 shadow-[20px_20px_60px_rgba(59,130,246,0.15),-20px_-20px_60px_rgba(255,255,255,0.8),inset_0_0_0_1px_rgba(255,255,255,0.5)] dark:shadow-[0_0_50px_rgba(0,0,0,0.5),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.2),inset_0_-20px_30px_-10px_rgba(6,182,212,0.15)] rounded-[2.5rem] p-6 sm:p-8 transition-all duration-300 relative overflow-hidden group before:absolute before:inset-0 before:bg-gradient-to-b before:from-white/5 before:to-transparent before:opacity-0 dark:before:opacity-100 before:pointer-events-none before:animate-pulse">
-
-    <!-- Header -->
-    <div class="mb-8 flex flex-col items-center">
-      <h1 class="text-3xl font-bold text-gray-800 dark:text-slate-50">ようこそ!</h1>
-      <p class="mt-2 text-base text-gray-600 dark:text-slate-400">アカウントを作成して始めましょう</p>
-    </div>
-
-    <!-- Registration Form -->
-    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "space-y-6" }) do |f| %>
-
-      <!-- Error Messages -->
-      <%= render "devise/shared/error_messages", resource: resource %>
-
-      <!-- Name Field -->
-      <div class="space-y-2">
-        <%= f.label :name, "ユーザー名（表示名）", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
-        <div class="relative">
-          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">badge</span>
-          <%= f.text_field :name,
-              autofocus: true,
-              autocomplete: "name",
-              placeholder: "表示名（例: てくメモ太郎）",
-              class: "block w-full h-14 pl-12 pr-4 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
-        </div>
-      </div>
-
-      <!-- Email Field -->
-      <div class="space-y-2">
-        <%= f.label :email, "メールアドレス", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
-        <div class="relative">
-          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">mail</span>
-          <%= f.email_field :email,
-              autocomplete: "email",
-              placeholder: "メールアドレス",
-              class: "block w-full h-14 pl-12 pr-4 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
-        </div>
-      </div>
-
-      <!-- Password Field -->
-      <div class="space-y-2">
-        <%= f.label :password, "パスワード", for: "register-password-field", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
-        <% if @minimum_password_length %>
-          <p class="text-xs text-gray-500 dark:text-slate-400">(<%= @minimum_password_length %>文字以上)</p>
-        <% end %>
-        <div class="relative">
-          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">lock</span>
-          <%= f.password_field :password,
-              autocomplete: "new-password",
-              placeholder: "パスワード",
-              id: "register-password-field",
-              class: "block w-full h-14 pl-12 pr-12 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
-          <button type="button"
-                  onclick="togglePasswordVisibility('register-password-field', 'register-password-icon')"
-                  class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500 hover:text-gray-600 dark:hover:text-slate-300 transition-colors">
-            <span class="material-symbols-outlined" id="register-password-icon">visibility</span>
-          </button>
-        </div>
-      </div>
-
-      <!-- Password Confirmation Field -->
-      <div class="space-y-2">
-        <%= f.label :password_confirmation, "パスワード(確認用)", for: "register-password-confirmation-field", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
-        <div class="relative">
-          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">lock</span>
-          <%= f.password_field :password_confirmation,
-              autocomplete: "new-password",
-              placeholder: "パスワード(確認用)",
-              id: "register-password-confirmation-field",
-              class: "block w-full h-14 pl-12 pr-12 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
-          <button type="button"
-                  onclick="togglePasswordVisibility('register-password-confirmation-field', 'register-password-confirmation-icon')"
-                  class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500 hover:text-gray-600 dark:hover:text-slate-300 transition-colors">
-            <span class="material-symbols-outlined" id="register-password-confirmation-icon">visibility</span>
-          </button>
-        </div>
-      </div>
-
-      <!-- 注意書き -->
-      <p class="text-xs text-red-500 dark:text-red-400 mt-2 mb-4">
-        ※パスワード再設定メールはMVPでは未実装です。パスワードは忘れないよう管理してください。
-      </p>
-
-      <!-- Submit Button -->
-      <div>
-        <%= f.submit "登録する",
-            class: "w-full h-14 bg-[radial-gradient(ellipse_110%_110%_at_30%_30%,#22d3ee_15%,#0ea5e9_90%)] dark:bg-gradient-to-r dark:from-cyan-500 dark:to-blue-600 hover:scale-[1.02] active:scale-95 text-white text-base font-bold rounded-full shadow-[8px_8px_16px_rgba(6,182,212,0.4),-8px_-8px_16px_rgba(255,255,255,1),inset_-2px_-2px_5px_rgba(8,145,178,0.4),inset_2px_2px_5px_rgba(165,243,252,0.5)] dark:shadow-[0_0_20px_rgba(6,182,212,0.5),inset_0_1px_0_rgba(255,255,255,0.4),inset_0_-2px_5px_rgba(0,0,0,0.3)] dark:hover:shadow-[0_0_30px_rgba(6,182,212,0.7),inset_0_1px_0_rgba(255,255,255,0.6)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 dark:ring-offset-slate-900 relative overflow-hidden" %>
-      </div>
-    <% end %>
-
-    <!-- Divider -->
-    <div class="my-8 flex items-center">
-      <div class="flex-1 border-t border-gray-300 dark:border-white/10"></div>
-      <span class="px-4 text-sm text-gray-500 dark:text-slate-400">または</span>
-      <div class="flex-1 border-t border-gray-300 dark:border-white/10"></div>
-    </div>
-
-
-
-    <!-- Login Link -->
-    <div class="mt-8 text-center">
-      <p class="text-base text-gray-600 dark:text-slate-400">すでにアカウントをお持ちですか?</p>
-      <%= link_to "ログイン", new_session_path(resource_name), class: "inline-block mt-2 font-bold text-lg text-cyan-600 dark:text-cyan-400 hover:underline" %>
-    </div>
-
-  </div>
-</div>
-
-
-<script>
-function togglePasswordVisibility(fieldId, iconId) {
-  const field = document.getElementById(fieldId);
-  const icon = document.getElementById(iconId);
-
-  if (!field || !icon) return;
-
-  if (field.type === 'password') {
-    field.type = 'text';
-    icon.textContent = 'visibility_off';
-  } else {
-    field.type = 'password';
-    icon.textContent = 'visibility';
-  }
-}
-</script>
+<% content_for :title, "てくメモ - 新規登録" %>
+
+<div class="flex flex-1 flex-col items-center justify-center p-4 pb-24 relative overflow-hidden">
+
+  <div class="w-full max-w-md bg-[radial-gradient(120%_120%_at_50%_50%,rgba(255,255,255,0.9)_0%,rgba(255,255,255,0.6)_100%)] dark:bg-none dark:bg-slate-950/60 backdrop-blur-xl border border-white/60 dark:border-white/10 shadow-[20px_20px_60px_rgba(59,130,246,0.15),-20px_-20px_60px_rgba(255,255,255,0.8),inset_0_0_0_1px_rgba(255,255,255,0.5)] dark:shadow-[0_0_50px_rgba(0,0,0,0.5),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.2),inset_0_-20px_30px_-10px_rgba(6,182,212,0.15)] rounded-[2.5rem] p-6 sm:p-8 transition-all duration-300 relative overflow-hidden group before:absolute before:inset-0 before:bg-gradient-to-b before:from-white/5 before:to-transparent before:opacity-0 dark:before:opacity-100 before:pointer-events-none before:animate-pulse">
+
+    <!-- Header -->
+    <div class="mb-8 flex flex-col items-center">
+      <h1 class="text-3xl font-bold text-gray-800 dark:text-slate-50">ようこそ!</h1>
+      <p class="mt-2 text-base text-gray-600 dark:text-slate-400">アカウントを作成して始めましょう</p>
+    </div>
+
+    <!-- Registration Form -->
+    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "space-y-6" }) do |f| %>
+
+      <!-- Error Messages -->
+      <%= render "devise/shared/error_messages", resource: resource %>
+
+      <!-- Name Field -->
+      <div class="space-y-2">
+        <%= f.label :name, "ユーザー名（表示名）", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
+        <div class="relative">
+          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">badge</span>
+          <%= f.text_field :name,
+              autofocus: true,
+              autocomplete: "name",
+              placeholder: "表示名（例: てくメモ太郎）",
+              class: "block w-full h-14 pl-12 pr-4 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
+        </div>
+      </div>
+
+      <!-- Email Field -->
+      <div class="space-y-2">
+        <%= f.label :email, "メールアドレス", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
+        <div class="relative">
+          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">mail</span>
+          <%= f.email_field :email,
+              autocomplete: "email",
+              placeholder: "メールアドレス",
+              class: "block w-full h-14 pl-12 pr-4 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
+        </div>
+      </div>
+
+      <!-- Password Field -->
+      <div class="space-y-2">
+        <%= f.label :password, "パスワード", for: "register-password-field", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
+        <% if @minimum_password_length %>
+          <p class="text-xs text-gray-500 dark:text-slate-400">(<%= @minimum_password_length %>文字以上)</p>
+        <% end %>
+        <div class="relative">
+          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">lock</span>
+          <%= f.password_field :password,
+              autocomplete: "new-password",
+              placeholder: "パスワード",
+              id: "register-password-field",
+              class: "block w-full h-14 pl-12 pr-12 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
+          <button type="button"
+                  onclick="togglePasswordVisibility('register-password-field', 'register-password-icon')"
+                  class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500 hover:text-gray-600 dark:hover:text-slate-300 transition-colors">
+            <span class="material-symbols-outlined" id="register-password-icon">visibility</span>
+          </button>
+        </div>
+      </div>
+
+      <!-- Password Confirmation Field -->
+      <div class="space-y-2">
+        <%= f.label :password_confirmation, "パスワード(確認用)", for: "register-password-confirmation-field", class: "block text-base font-medium text-gray-700 dark:text-slate-300" %>
+        <div class="relative">
+          <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500">lock</span>
+          <%= f.password_field :password_confirmation,
+              autocomplete: "new-password",
+              placeholder: "パスワード(確認用)",
+              id: "register-password-confirmation-field",
+              class: "block w-full h-14 pl-12 pr-12 text-base text-gray-900 bg-white dark:bg-slate-950/50 border border-black/5 dark:border-white/10 rounded-2xl shadow-inner dark:shadow-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent dark:text-white dark:placeholder-slate-500 dark:focus:shadow-[0_0_15px_rgba(6,182,212,0.4)] transition-all duration-200" %>
+          <button type="button"
+                  onclick="togglePasswordVisibility('register-password-confirmation-field', 'register-password-confirmation-icon')"
+                  class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-slate-500 hover:text-gray-600 dark:hover:text-slate-300 transition-colors">
+            <span class="material-symbols-outlined" id="register-password-confirmation-icon">visibility</span>
+          </button>
+        </div>
+      </div>
+
+      <!-- 注意書き -->
+      <p class="text-xs text-red-500 dark:text-red-400 mt-2 mb-4">
+        ※パスワード再設定メールはMVPでは未実装です。パスワードは忘れないよう管理してください。
+      </p>
+
+      <!-- Submit Button -->
+      <div>
+        <%= f.submit "登録する",
+            class: "w-full h-14 bg-[radial-gradient(ellipse_110%_110%_at_30%_30%,#22d3ee_15%,#0ea5e9_90%)] dark:bg-gradient-to-r dark:from-cyan-500 dark:to-blue-600 hover:scale-[1.02] active:scale-95 text-white text-base font-bold rounded-full shadow-[8px_8px_16px_rgba(6,182,212,0.4),-8px_-8px_16px_rgba(255,255,255,1),inset_-2px_-2px_5px_rgba(8,145,178,0.4),inset_2px_2px_5px_rgba(165,243,252,0.5)] dark:shadow-[0_0_20px_rgba(6,182,212,0.5),inset_0_1px_0_rgba(255,255,255,0.4),inset_0_-2px_5px_rgba(0,0,0,0.3)] dark:hover:shadow-[0_0_30px_rgba(6,182,212,0.7),inset_0_1px_0_rgba(255,255,255,0.6)] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:ring-offset-2 dark:ring-offset-slate-900 relative overflow-hidden" %>
+      </div>
+    <% end %>
+
+    <!-- Divider -->
+    <div class="my-8 flex items-center">
+      <div class="flex-1 border-t border-gray-300 dark:border-white/10"></div>
+      <span class="px-4 text-sm text-gray-500 dark:text-slate-400">または</span>
+      <div class="flex-1 border-t border-gray-300 dark:border-white/10"></div>
+    </div>
+
+
+
+    <!-- Login Link -->
+    <div class="mt-8 text-center">
+      <p class="text-base text-gray-600 dark:text-slate-400">すでにアカウントをお持ちですか?</p>
+      <%= link_to "ログイン", new_session_path(resource_name), class: "inline-block mt-2 font-bold text-lg text-cyan-600 dark:text-cyan-400 hover:underline" %>
+    </div>
+
+  </div>
+</div>
+
+
+<script>
+function togglePasswordVisibility(fieldId, iconId) {
+  const field = document.getElementById(fieldId);
+  const icon = document.getElementById(iconId);
+
+  if (!field || !icon) return;
+
+  if (field.type === 'password') {
+    field.type = 'text';
+    icon.textContent = 'visibility_off';
+  } else {
+    field.type = 'password';
+    icon.textContent = 'visibility';
+  }
+}
+</script>
diff --git a/app/views/shared/_animated_background.html.erb b/app/views/shared/_animated_background.html.erb
index bf05f99..654ae6f 100644
--- a/app/views/shared/_animated_background.html.erb
+++ b/app/views/shared/_animated_background.html.erb
@@ -1,72 +1,72 @@
-<!-- Inline CSS for guaranteed animation (avoids CSS build issues) -->
-<style>
-  .bg-cyber-grid {
-    background-size: 40px 40px;
-    background-image: 
-      linear-gradient(to right, rgba(56, 189, 248, 0.10) 1px, transparent 1px),
-      linear-gradient(to bottom, rgba(56, 189, 248, 0.10) 1px, transparent 1px);
-    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, transparent 80%);
-    mask-image: linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, transparent 80%);
-  }
-  @keyframes cyber-pulse {
-    0%, 100% { opacity: 0.3; transform: scale(1); box-shadow: 0 0 4px 1px rgba(56, 189, 248, 0.5); }
-    50% { opacity: 1; transform: scale(1.8); box-shadow: 0 0 20px 6px rgba(56, 189, 248, 0.8); }
-  }
-  @keyframes data-float {
-    0% { transform: translateY(0) scale(1); opacity: 0.5; }
-    20% { opacity: 0.8; }
-    80% { opacity: 0.8; }
-    100% { transform: translateY(-100vh) scale(0.5); opacity: 0; }
-  }
-</style>
-
-<!-- Animated Background (Light Mode Only) -->
-<div class="fixed inset-0 bg-gradient-to-br from-sky-200 via-sky-50 to-amber-50 animate-gradient-xy dark:hidden pointer-events-none overflow-hidden -z-50">
-  <!-- Cloud 1: 大きめ、上部 -->
-  <div class="cloud w-64 h-24 top-12 opacity-80 animate-cloud-1"></div>
-  <!-- Cloud 2: さらに大きく、下部 -->
-  <div class="cloud w-96 h-32 top-[60%] opacity-60 animate-cloud-2"></div>
-  <!-- Cloud 3: 中くらい、中央付近 -->
-  <div class="cloud w-48 h-20 top-[30%] opacity-70 animate-cloud-3" style="animation-duration: 80s;"></div>
-
-  <!-- Cloud 4: 小さめ、最下部 -->
-  <div class="cloud w-32 h-16 top-[85%] opacity-50 animate-cloud-1" style="animation-duration: 120s; animation-delay: -5s;"></div>
-  <!-- Cloud 5: 中くらい、上部（Cloud 1とは別タイミング） -->
-  <div class="cloud w-56 h-24 top-[15%] opacity-70 animate-cloud-2" style="animation-duration: 50s; animation-delay: -40s;"></div>
-  <!-- Cloud 6: 左下に追加 -->
-  <div class="cloud w-40 h-20 top-[90%] opacity-60 animate-cloud-3" style="animation-duration: 90s; animation-delay: -20s;"></div>
-</div>
-
-<!-- Dark Mode: Cyber Grid & Stardust -->
-<div class="fixed inset-0 overflow-hidden pointer-events-none z-0 hidden dark:block">
-  
-
-
-
-  <!-- Layer 2: Glowing Intersections (光の交差点) -->
-  <div class="absolute w-2 h-2 rounded-full bg-sky-400" style="left: 15%; top: 20%; animation: cyber-pulse 4s ease-in-out infinite;"></div>
-  <div class="absolute w-1.5 h-1.5 rounded-full bg-cyan-300" style="left: 45%; top: 35%; animation: cyber-pulse 6s ease-in-out infinite 1s;"></div>
-  <div class="absolute w-2 h-2 rounded-full bg-indigo-400" style="left: 75%; top: 55%; animation: cyber-pulse 5s ease-in-out infinite 2.5s;"></div>
-  <div class="absolute w-1.5 h-1.5 rounded-full bg-sky-300" style="left: 25%; top: 70%; animation: cyber-pulse 7s ease-in-out infinite 0.5s;"></div>
-  <div class="absolute w-1.5 h-1.5 rounded-full bg-blue-400" style="left: 85%; top: 15%; animation: cyber-pulse 5.5s ease-in-out infinite 3s;"></div>
-  <div class="absolute w-2 h-2 rounded-full bg-violet-400" style="left: 60%; top: 45%; animation: cyber-pulse 6.5s ease-in-out infinite 1.8s;"></div>
-
-  <!-- Layer 3: Stardust / Data Particles (スターダスト) - 画面全体に分散 (12個) -->
-  <!-- 左側 (5%-30%) -->
-  <div class="absolute w-1 h-1 rounded-full bg-white/80" style="left: 5%; bottom: 0; animation: data-float 18s linear infinite -2s;"></div>
-  <div class="absolute w-1.5 h-1.5 rounded-full bg-sky-200/60" style="left: 12%; bottom: 0; animation: data-float 22s linear infinite -8s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-white/70" style="left: 20%; bottom: 0; animation: data-float 15s linear infinite -5s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-cyan-100/60" style="left: 28%; bottom: 0; animation: data-float 20s linear infinite -12s;"></div>
-  
-  <!-- 中央 (35%-65%) -->
-  <div class="absolute w-1.5 h-1.5 rounded-full bg-indigo-300/50" style="left: 38%; bottom: 0; animation: data-float 25s linear infinite -7s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-white/60" style="left: 48%; bottom: 0; animation: data-float 19s linear infinite -15s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-sky-100/70" style="left: 55%; bottom: 0; animation: data-float 17s linear infinite -3s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-white/75" style="left: 62%; bottom: 0; animation: data-float 16s linear infinite -1s;"></div>
-
-  <!-- 右側 (70%-95%) -->
-  <div class="absolute w-1 h-1 rounded-full bg-white/80" style="left: 74%; bottom: 0; animation: data-float 21s linear infinite -9s;"></div>
-  <div class="absolute w-1.5 h-1.5 rounded-full bg-sky-200/60" style="left: 82%; bottom: 0; animation: data-float 23s linear infinite -2s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-white/70" style="left: 88%; bottom: 0; animation: data-float 15s linear infinite -13s;"></div>
-  <div class="absolute w-1 h-1 rounded-full bg-cyan-100/60" style="left: 94%; bottom: 0; animation: data-float 18s linear infinite -6s;"></div>
-</div>
+<!-- Inline CSS for guaranteed animation (avoids CSS build issues) -->
+<style>
+  .bg-cyber-grid {
+    background-size: 40px 40px;
+    background-image: 
+      linear-gradient(to right, rgba(56, 189, 248, 0.10) 1px, transparent 1px),
+      linear-gradient(to bottom, rgba(56, 189, 248, 0.10) 1px, transparent 1px);
+    -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, transparent 80%);
+    mask-image: linear-gradient(to bottom, rgba(0,0,0,0.6) 0%, transparent 80%);
+  }
+  @keyframes cyber-pulse {
+    0%, 100% { opacity: 0.3; transform: scale(1); box-shadow: 0 0 4px 1px rgba(56, 189, 248, 0.5); }
+    50% { opacity: 1; transform: scale(1.8); box-shadow: 0 0 20px 6px rgba(56, 189, 248, 0.8); }
+  }
+  @keyframes data-float {
+    0% { transform: translateY(0) scale(1); opacity: 0.5; }
+    20% { opacity: 0.8; }
+    80% { opacity: 0.8; }
+    100% { transform: translateY(-100vh) scale(0.5); opacity: 0; }
+  }
+</style>
+
+<!-- Animated Background (Light Mode Only) -->
+<div class="fixed inset-0 bg-gradient-to-br from-sky-200 via-sky-50 to-amber-50 animate-gradient-xy dark:hidden pointer-events-none overflow-hidden -z-50">
+  <!-- Cloud 1: 大きめ、上部 -->
+  <div class="cloud w-64 h-24 top-12 opacity-80 animate-cloud-1"></div>
+  <!-- Cloud 2: さらに大きく、下部 -->
+  <div class="cloud w-96 h-32 top-[60%] opacity-60 animate-cloud-2"></div>
+  <!-- Cloud 3: 中くらい、中央付近 -->
+  <div class="cloud w-48 h-20 top-[30%] opacity-70 animate-cloud-3" style="animation-duration: 80s;"></div>
+
+  <!-- Cloud 4: 小さめ、最下部 -->
+  <div class="cloud w-32 h-16 top-[85%] opacity-50 animate-cloud-1" style="animation-duration: 120s; animation-delay: -5s;"></div>
+  <!-- Cloud 5: 中くらい、上部（Cloud 1とは別タイミング） -->
+  <div class="cloud w-56 h-24 top-[15%] opacity-70 animate-cloud-2" style="animation-duration: 50s; animation-delay: -40s;"></div>
+  <!-- Cloud 6: 左下に追加 -->
+  <div class="cloud w-40 h-20 top-[90%] opacity-60 animate-cloud-3" style="animation-duration: 90s; animation-delay: -20s;"></div>
+</div>
+
+<!-- Dark Mode: Cyber Grid & Stardust -->
+<div class="fixed inset-0 overflow-hidden pointer-events-none z-0 hidden dark:block">
+  
+
+
+
+  <!-- Layer 2: Glowing Intersections (光の交差点) -->
+  <div class="absolute w-2 h-2 rounded-full bg-sky-400" style="left: 15%; top: 20%; animation: cyber-pulse 4s ease-in-out infinite;"></div>
+  <div class="absolute w-1.5 h-1.5 rounded-full bg-cyan-300" style="left: 45%; top: 35%; animation: cyber-pulse 6s ease-in-out infinite 1s;"></div>
+  <div class="absolute w-2 h-2 rounded-full bg-indigo-400" style="left: 75%; top: 55%; animation: cyber-pulse 5s ease-in-out infinite 2.5s;"></div>
+  <div class="absolute w-1.5 h-1.5 rounded-full bg-sky-300" style="left: 25%; top: 70%; animation: cyber-pulse 7s ease-in-out infinite 0.5s;"></div>
+  <div class="absolute w-1.5 h-1.5 rounded-full bg-blue-400" style="left: 85%; top: 15%; animation: cyber-pulse 5.5s ease-in-out infinite 3s;"></div>
+  <div class="absolute w-2 h-2 rounded-full bg-violet-400" style="left: 60%; top: 45%; animation: cyber-pulse 6.5s ease-in-out infinite 1.8s;"></div>
+
+  <!-- Layer 3: Stardust / Data Particles (スターダスト) - 画面全体に分散 (12個) -->
+  <!-- 左側 (5%-30%) -->
+  <div class="absolute w-1 h-1 rounded-full bg-white/80" style="left: 5%; bottom: 0; animation: data-float 18s linear infinite -2s;"></div>
+  <div class="absolute w-1.5 h-1.5 rounded-full bg-sky-200/60" style="left: 12%; bottom: 0; animation: data-float 22s linear infinite -8s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-white/70" style="left: 20%; bottom: 0; animation: data-float 15s linear infinite -5s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-cyan-100/60" style="left: 28%; bottom: 0; animation: data-float 20s linear infinite -12s;"></div>
+  
+  <!-- 中央 (35%-65%) -->
+  <div class="absolute w-1.5 h-1.5 rounded-full bg-indigo-300/50" style="left: 38%; bottom: 0; animation: data-float 25s linear infinite -7s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-white/60" style="left: 48%; bottom: 0; animation: data-float 19s linear infinite -15s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-sky-100/70" style="left: 55%; bottom: 0; animation: data-float 17s linear infinite -3s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-white/75" style="left: 62%; bottom: 0; animation: data-float 16s linear infinite -1s;"></div>
+
+  <!-- 右側 (70%-95%) -->
+  <div class="absolute w-1 h-1 rounded-full bg-white/80" style="left: 74%; bottom: 0; animation: data-float 21s linear infinite -9s;"></div>
+  <div class="absolute w-1.5 h-1.5 rounded-full bg-sky-200/60" style="left: 82%; bottom: 0; animation: data-float 23s linear infinite -2s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-white/70" style="left: 88%; bottom: 0; animation: data-float 15s linear infinite -13s;"></div>
+  <div class="absolute w-1 h-1 rounded-full bg-cyan-100/60" style="left: 94%; bottom: 0; animation: data-float 18s linear infinite -6s;"></div>
+</div>
diff --git a/app/views/walks/index.html.erb b/app/views/walks/index.html.erb
index beb27d1..098f631 100644
--- a/app/views/walks/index.html.erb
+++ b/app/views/walks/index.html.erb
@@ -1,243 +1,243 @@
-<% content_for :title, "散歩記録一覧 - てくメモ" %>
-
-<div class="flex-1 p-4 pb-24 w-full max-w-2xl mx-auto">
-  <%# Google Fit再連携バナー（連携切れ時のみ表示、ゲストは除外） %>
-  <% unless current_user.guest? %>
-    <% token_status = current_user.google_token_status %>
-    <% if token_status == :expired_need_reauth %>
-      <div class="mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-l-4 border-yellow-400 dark:border-yellow-500 rounded-xl p-4 shadow-sm">
-        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
-          <div class="flex items-center gap-3">
-            <div class="bg-yellow-100 dark:bg-yellow-900/40 p-2 rounded-full">
-              <span class="material-symbols-outlined text-yellow-600 dark:text-yellow-400">link_off</span>
-            </div>
-            <div>
-              <p class="font-bold text-yellow-800 dark:text-yellow-300 text-sm">Google Fit連携の再設定が必要です</p>
-              <p class="text-xs text-yellow-600/80 dark:text-yellow-400/70 mt-0.5">認証の有効期限が切れました</p>
-            </div>
-          </div>
-          <%= link_to user_google_oauth2_omniauth_authorize_path,
-              data: { turbo: false },
-              class: "inline-flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-white font-bold px-4 py-2 rounded-full shadow-md hover:shadow-lg transition-all text-sm whitespace-nowrap" do %>
-            <span class="material-symbols-outlined text-lg">add_link</span>
-            <span>再連携する</span>
-          <% end %>
-        </div>
-      </div>
-    <% elsif token_status == :not_connected %>
-      <div class="mb-6 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border-l-4 border-blue-400 dark:border-blue-500 rounded-xl p-4 shadow-sm">
-        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
-          <div class="flex items-center gap-3">
-            <div class="bg-blue-100 dark:bg-blue-900/40 p-2 rounded-full">
-              <svg class="w-5 h-5" viewBox="0 0 24 24">
-                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
-                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
-                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
-                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
-              </svg>
-            </div>
-            <div>
-              <p class="font-bold text-blue-800 dark:text-blue-300 text-sm">Google Fitと連携しませんか？</p>
-              <p class="text-xs text-blue-600/80 dark:text-blue-400/70 mt-0.5">散歩データを自動で取り込めます</p>
-            </div>
-          </div>
-          <%= link_to user_google_oauth2_omniauth_authorize_path,
-              data: { turbo: false },
-              class: "inline-flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-4 py-2 rounded-full shadow-md hover:shadow-lg transition-all text-sm whitespace-nowrap" do %>
-            <span class="material-symbols-outlined text-lg">add_link</span>
-            <span>連携する</span>
-          <% end %>
-        </div>
-      </div>
-    <% end %>
-  <% end %>
-  <!-- ページタイトル（レスポンシブ） -->
-  <div class="mb-6 md:mb-8 flex items-center justify-between">
-    <div class="flex-1">
-      <!-- PC用: 大きなタイトルとサブタイトル -->
-      <div class="hidden md:block">
-        <h1 class="text-3xl font-bold text-gray-800 dark:text-white flex items-center space-x-3">
-          <span class="material-symbols-outlined text-4xl text-orange-400 dark:text-purple-400 drop-shadow-sm dark:drop-shadow-[0_0_10px_rgba(168,85,247,0.8)] animate-bounce-slow">footprint</span>
-          <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-400 dark:to-pink-400 drop-shadow-sm">散歩記録</span>
-        </h1>
-        <p class="text-sm text-gray-500 dark:text-purple-200/70 mt-1 ml-1 font-medium">あなたの足跡、ひとつひとつ。</p>
-      </div>
-
-      <!-- スマホ用: シンプルなタイトル -->
-      <div class="md:hidden">
-        <h1 class="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-400 dark:to-pink-400 tracking-tight drop-shadow-sm">
-          散歩記録
-        </h1>
-      </div>
-    </div>
-
-    <!-- スマホ用: 小さな記録ボタン（右上）-->
-    <div class="md:hidden flex items-center gap-2">
-      <%= link_to import_google_fit_walks_path, data: { turbo_method: :post, turbo_confirm: "直近30日分のデータをGoogle Fitから取り込みますか？" }, class: "flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 text-white shadow-sm hover:shadow-md transition-all active:scale-95" do %>
-        <%= image_tag "google_fit_logo.png", class: "w-5 h-5 object-contain rounded-full bg-white p-0.5 shadow-sm", alt: "Google Fit" %>
-      <% end %>
-
-      <%= link_to new_walk_path, class: "flex items-center gap-1 px-3 py-1.5 rounded-full bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-600 dark:to-pink-600 text-white text-xs font-bold shadow-sm hover:shadow-md transition-all active:scale-95" do %>
-        <span class="material-symbols-outlined text-sm">add</span>
-        <span>記録</span>
-      <% end %>
-    </div>
-  </div>
-
-  <!-- 新規作成ボタン（PCのみ） -->
-  <div class="mb-10 hidden md:block">
-    <div class="flex items-center gap-4">
-      <%= link_to new_walk_path,
-          class: "group relative w-full sm:w-auto inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-500 to-pink-500 dark:from-purple-700 dark:via-fuchsia-800 dark:to-pink-800 hover:from-purple-400 hover:to-pink-400 dark:hover:from-purple-600 dark:hover:via-fuchsia-700 dark:hover:to-pink-700 text-white font-bold py-4 px-8 rounded-full border-2 border-white/30 dark:border-purple-400/30 shadow-[0_10px_25px_rgba(168,85,247,0.4),inset_0_1px_0_rgba(255,255,255,0.4)] dark:shadow-[0_0_25px_rgba(168,85,247,0.5),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] hover:shadow-[0_15px_35px_rgba(168,85,247,0.6),inset_0_1px_0_rgba(255,255,255,0.6)] dark:hover:shadow-[0_0_40px_rgba(168,85,247,0.7),inset_0_0_0_1px_rgba(255,255,255,0.3)] transition-all duration-300 transform hover:-translate-y-1 active:scale-95 overflow-hidden before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/30 before:to-transparent before:rounded-t-full before:pointer-events-none" do %>
-        <span class="material-symbols-outlined text-2xl group-hover:rotate-90 transition-transform duration-300 relative z-10 drop-shadow-md">add</span>
-        <span class="text-lg relative z-10 drop-shadow-sm">新しい散歩を記録する</span>
-      <% end %>
-
-      <%= link_to import_google_fit_walks_path,
-          data: { turbo_method: :post, turbo_confirm: "直近30日分のデータをGoogle Fitから取り込みますか？\n\n・既存より数値が大きい項目のみ更新されます\n・サイクリングは早歩き相当の歩数に換算されます" },
-          class: "group relative w-full sm:w-auto inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-green-600 dark:from-green-700 dark:via-green-800 dark:to-green-900 hover:from-green-400 hover:to-green-500 dark:hover:from-green-600 dark:hover:via-green-700 dark:hover:to-green-800 text-white font-bold py-4 px-6 rounded-full border-2 border-white/30 dark:border-green-400/30 shadow-[0_10px_25px_rgba(34,197,94,0.4),inset_0_1px_0_rgba(255,255,255,0.4)] dark:shadow-[0_0_25px_rgba(34,197,94,0.5),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] hover:shadow-[0_15px_35px_rgba(34,197,94,0.6),inset_0_1px_0_rgba(255,255,255,0.6)] dark:hover:shadow-[0_0_40px_rgba(34,197,94,0.7),inset_0_0_0_1px_rgba(255,255,255,0.3)] transition-all duration-300 transform hover:-translate-y-1 active:scale-95 overflow-hidden before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/30 before:to-transparent before:rounded-t-full before:pointer-events-none" do %>
-        <%= image_tag "google_fit_logo.png", class: "w-8 h-8 object-contain rounded-full bg-white p-1 shadow-sm relative z-10", alt: "Google Fit" %>
-        <span class="text-lg relative z-10 drop-shadow-sm">Fit一括取込</span>
-      <% end %>
-    </div>
-  </div>
-
-  <!-- ページネーション（上部） -->
-  <div class="mb-4 flex justify-center">
-    <%= paginate @walks %>
-  </div>
-
-  <!-- 散歩記録一覧 -->
-  <div class="grid grid-cols-1 gap-8">
-    <% if @walks.any? %>
-      <% @walks.each do |walk| %>
-        <!-- 各散歩記録カード (Claymorphism / Neon Noir) -->
-        <%= link_to walk_path(walk), class: "block group relative transform transition-all duration-300 hover:-translate-y-2 hover:scale-105" do %>
-          <div class="relative overflow-hidden bg-[radial-gradient(ellipse_120%_120%_at_35%_35%,#ffffff_30%,#ffedd5_90%)] dark:bg-none dark:bg-[#1a0b2e]/80 backdrop-blur-xl border-2 border-white/60 dark:border-purple-500/30 dark:border-t-white/40 rounded-[3.75rem] shadow-[20px_20px_60px_rgba(249,115,22,0.2),-20px_-20px_60px_#ffffff,inset_-5px_-5px_15px_rgba(249,115,22,0.1),inset_5px_5px_15px_rgba(255,255,255,0.7)] dark:shadow-[0_0_20px_rgba(168,85,247,0.2),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] p-6 transition-all duration-300 hover:shadow-[25px_25px_70px_rgba(249,115,22,0.3),-25px_-25px_70px_#ffffff,inset_-5px_-5px_15px_rgba(249,115,22,0.1),inset_5px_5px_15px_rgba(255,255,255,0.7)] hover:dark:shadow-[0_0_40px_rgba(168,85,247,0.4),inset_0_0_0_1px_rgba(255,255,255,0.3),inset_0_1px_0_rgba(255,255,255,0.5)] before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/40 before:to-transparent before:rounded-t-[3.75rem] before:pointer-events-none before:animate-pulse">
-
-            <!-- 装飾用背景（パステルカラーのオーブ / ネオンの光） -->
-            <div class="absolute -top-10 -right-10 w-40 h-40 bg-orange-100/50 dark:bg-purple-600/20 rounded-full blur-3xl pointer-events-none group-hover:bg-orange-200/50 dark:group-hover:bg-purple-500/30 transition-colors duration-300"></div>
-            <div class="absolute bottom-[-10%] left-[-10%] w-32 h-32 bg-blue-100/50 dark:bg-pink-600/10 rounded-full blur-3xl pointer-events-none group-hover:bg-blue-200/50 dark:group-hover:bg-pink-500/20 transition-colors duration-300"></div>
-
-            <!-- 背景アクセントアイコン（足跡） -->
-            <div class="absolute -top-6 -right-6 pointer-events-none opacity-[0.04] dark:opacity-[0.03] transform transition-transform duration-500 group-hover:rotate-12 group-hover:scale-110">
-              <span class="material-symbols-outlined text-[9rem] text-slate-600 dark:text-white">footprint</span>
-            </div>
-
-            <!-- ヘッダー部分（日付・曜日） -->
-            <div class="flex items-center justify-between mb-4 relative z-10">
-              <div class="flex items-center space-x-4">
-                <div class="bg-orange-50 dark:bg-[#2e1a47] p-3 rounded-2xl text-orange-500 dark:text-purple-300 shadow-inner border border-orange-100 dark:border-purple-500/30 dark:shadow-[0_0_10px_rgba(168,85,247,0.2)]">
-                  <span class="material-symbols-outlined text-2xl dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(192,132,252,0.8)]">calendar_month</span>
-                </div>
-                <div>
-                  <p class="text-xl font-bold text-gray-700 dark:text-purple-100">
-                    <%= walk.walked_on.strftime('%Y/%m/%d') %>
-                  </p>
-                  <p class="text-sm text-orange-400 dark:text-purple-400 font-bold">
-                    <%= %w[日 月 火 水 木 金 土][walk.walked_on.wday] %>曜日
-                  </p>
-                </div>
-              </div>
-
-              <!-- 詳細へ矢印 (円形ボタン風) -->
-              <div class="w-10 h-10 rounded-full bg-white dark:bg-white/10 flex items-center justify-center shadow-[4px_4px_8px_rgba(166,175,195,0.2),-4px_-4px_8px_rgba(255,255,255,0.9)] dark:shadow-none group-hover:scale-110 transition-transform duration-300">
-                <span class="material-symbols-outlined text-gray-400 dark:text-purple-300 group-hover:text-orange-500 dark:group-hover:text-pink-400 transition-colors">arrow_forward_ios</span>
-              </div>
-            </div>
-
-            <!-- 場所 -->
-            <div class="flex items-center space-x-2 mb-4 relative z-10 pl-1">
-              <span class="material-symbols-outlined text-gray-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(192,132,252,0.8)]">location_on</span>
-              <span class="font-bold text-gray-600 dark:text-purple-200 line-clamp-1"><%= walk.location %></span>
-            </div>
-
-            <!-- スタッツグリッド (統合・横並び・レスポンシブ最適化) -->
-            <div class="relative z-10 bg-slate-50 dark:bg-[#0b0514]/40 rounded-3xl shadow-inner border border-black/5 dark:border-purple-500/20 dark:shadow-none p-3 sm:p-4 flex items-center justify-between">
-              <!-- 距離 -->
-              <div class="flex flex-col items-center flex-1">
-                <div class="flex items-center space-x-0.5 sm:space-x-1 mb-1">
-                  <span class="material-symbols-outlined text-base sm:text-lg text-blue-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-cyan-300 dark:to-blue-300 dark:drop-shadow-[0_0_8px_rgba(34,211,238,0.8)]">straighten</span>
-                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-300/70 font-bold">距離</span>
-                </div>
-                <div class="flex items-baseline">
-                  <span class="font-bold text-gray-700 dark:text-cyan-200 text-base sm:text-lg mr-0.5 sm:mr-1">
-                    <%= walk.distance || 0 %>
-                  </span>
-                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-400/60">km</span>
-                </div>
-              </div>
-
-              <!-- 区切り線 -->
-              <div class="w-px h-6 sm:h-8 bg-gray-200 dark:bg-white/10"></div>
-
-              <!-- 時間 -->
-              <div class="flex flex-col items-center flex-1">
-                <div class="flex items-center space-x-0.5 sm:space-x-1 mb-1">
-                  <span class="material-symbols-outlined text-base sm:text-lg text-green-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-green-300 dark:to-emerald-300 dark:drop-shadow-[0_0_8px_rgba(74,222,128,0.8)]">timer</span>
-                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-300/70 font-bold">時間</span>
-                </div>
-                <div class="flex items-baseline">
-                  <span class="font-bold text-gray-700 dark:text-green-200 text-base sm:text-lg mr-0.5 sm:mr-1">
-                    <%= walk.duration || 0 %>
-                  </span>
-                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-400/60">分</span>
-                </div>
-              </div>
-
-              <!-- 区切り線 -->
-              <div class="w-px h-6 sm:h-8 bg-gray-200 dark:bg-white/10"></div>
-
-              <!-- 歩数 -->
-              <div class="flex flex-col items-center flex-1">
-                <div class="flex items-center space-x-0.5 sm:space-x-1 mb-1">
-                  <span class="material-symbols-outlined text-base sm:text-lg text-purple-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-fuchsia-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(232,121,249,0.8)]">footprint</span>
-                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-300/70 font-bold">歩数</span>
-                </div>
-                <div class="flex items-baseline">
-                  <span class="font-bold text-gray-700 dark:text-fuchsia-200 text-base sm:text-lg mr-0.5 sm:mr-1">
-                    <%= number_with_delimiter(walk.steps || 0) %>
-                  </span>
-                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-400/60">歩</span>
-                </div>
-              </div>
-            </div>
-
-            <!-- メモ（あれば） -->
-            <% if walk.notes.present? %>
-              <div class="mt-4 pt-4 border-t border-gray-100 dark:border-white/10 relative z-10">
-                <div class="flex items-start space-x-2 text-gray-500 dark:text-purple-200/80">
-                  <span class="material-symbols-outlined text-sm mt-0.5 text-gray-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(192,132,252,0.8)]">edit_note</span>
-                  <p class="text-sm line-clamp-1"><%= walk.notes %></p>
-                </div>
-              </div>
-            <% end %>
-          </div>
-        <% end %>
-      <% end %>
-
-    <!-- ページネーション -->
-    <div class="mt-8 flex justify-center">
-      <%= paginate @walks %>
-    </div>
-
-    <% else %>
-      <!-- 記録がない場合のメッセージ (Claymorphism / Neon Noir) -->
-      <div class="col-span-1 bg-[radial-gradient(ellipse_120%_120%_at_35%_35%,#ffffff_30%,#ffedd5_90%)] dark:bg-none dark:bg-[#1a0b2e]/80 backdrop-blur-xl p-12 rounded-[3.75rem] shadow-[20px_20px_60px_rgba(249,115,22,0.2),-20px_-20px_60px_#ffffff,inset_-5px_-5px_15px_rgba(249,115,22,0.1),inset_5px_5px_15px_rgba(255,255,255,0.7)] dark:shadow-[0_0_20px_rgba(168,85,247,0.2),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] border-2 border-white/60 dark:border-purple-500/30 dark:border-t-white/40 text-center relative overflow-hidden before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/40 before:to-transparent before:rounded-t-[3.75rem] before:pointer-events-none before:animate-pulse">
-        <div class="bg-orange-50 dark:bg-[#2e1a47] w-28 h-28 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner animate-pulse-slow dark:shadow-[0_0_20px_rgba(168,85,247,0.3)] relative z-10">
-          <span class="material-symbols-outlined text-6xl text-orange-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_10px_rgba(168,85,247,0.8)]">hiking</span>
-        </div>
-        <h3 class="text-2xl font-bold text-gray-700 dark:text-purple-100 mb-3">さあ、冒険に出かけよう！</h3>
-        <p class="text-gray-500 dark:text-purple-200/70 mb-10 text-base leading-relaxed">
-          まだ散歩の記録がありません。<br>
-          最初の足跡を刻んで、思い出を作りませんか？
-        </p>
-        <%= link_to new_walk_path,
-            class: "inline-flex items-center space-x-2 bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-600 dark:to-pink-600 hover:from-orange-500 hover:to-pink-600 dark:hover:from-purple-500 dark:hover:to-pink-500 text-white font-bold py-4 px-8 rounded-full shadow-[6px_6px_12px_rgba(166,175,195,0.4),-6px_-6px_12px_rgba(255,255,255,0.9)] dark:shadow-[0_0_20px_rgba(168,85,247,0.5)] transition-all duration-300 transform hover:-translate-y-1 active:scale-95 active:shadow-inner" do %>
-          <span class="material-symbols-outlined">arrow_forward</span>
-          <span>最初の記録を作成する</span>
-        <% end %>
-      </div>
-    <% end %>
-  </div>
-</div>
+<% content_for :title, "散歩記録一覧 - てくメモ" %>
+
+<div class="flex-1 p-4 pb-24 w-full max-w-2xl mx-auto">
+  <%# Google Fit再連携バナー（連携切れ時のみ表示、ゲストは除外） %>
+  <% unless current_user.guest? %>
+    <% token_status = current_user.google_token_status %>
+    <% if token_status == :expired_need_reauth %>
+      <div class="mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border-l-4 border-yellow-400 dark:border-yellow-500 rounded-xl p-4 shadow-sm">
+        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
+          <div class="flex items-center gap-3">
+            <div class="bg-yellow-100 dark:bg-yellow-900/40 p-2 rounded-full">
+              <span class="material-symbols-outlined text-yellow-600 dark:text-yellow-400">link_off</span>
+            </div>
+            <div>
+              <p class="font-bold text-yellow-800 dark:text-yellow-300 text-sm">Google Fit連携の再設定が必要です</p>
+              <p class="text-xs text-yellow-600/80 dark:text-yellow-400/70 mt-0.5">認証の有効期限が切れました</p>
+            </div>
+          </div>
+          <%= link_to user_google_oauth2_omniauth_authorize_path,
+              data: { turbo: false },
+              class: "inline-flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-400 hover:from-yellow-500 hover:to-orange-500 text-white font-bold px-4 py-2 rounded-full shadow-md hover:shadow-lg transition-all text-sm whitespace-nowrap" do %>
+            <span class="material-symbols-outlined text-lg">add_link</span>
+            <span>再連携する</span>
+          <% end %>
+        </div>
+      </div>
+    <% elsif token_status == :not_connected %>
+      <div class="mb-6 bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 border-l-4 border-blue-400 dark:border-blue-500 rounded-xl p-4 shadow-sm">
+        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
+          <div class="flex items-center gap-3">
+            <div class="bg-blue-100 dark:bg-blue-900/40 p-2 rounded-full">
+              <svg class="w-5 h-5" viewBox="0 0 24 24">
+                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
+                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
+                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
+                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
+              </svg>
+            </div>
+            <div>
+              <p class="font-bold text-blue-800 dark:text-blue-300 text-sm">Google Fitと連携しませんか？</p>
+              <p class="text-xs text-blue-600/80 dark:text-blue-400/70 mt-0.5">散歩データを自動で取り込めます</p>
+            </div>
+          </div>
+          <%= link_to user_google_oauth2_omniauth_authorize_path,
+              data: { turbo: false },
+              class: "inline-flex items-center justify-center gap-2 bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white font-bold px-4 py-2 rounded-full shadow-md hover:shadow-lg transition-all text-sm whitespace-nowrap" do %>
+            <span class="material-symbols-outlined text-lg">add_link</span>
+            <span>連携する</span>
+          <% end %>
+        </div>
+      </div>
+    <% end %>
+  <% end %>
+  <!-- ページタイトル（レスポンシブ） -->
+  <div class="mb-6 md:mb-8 flex items-center justify-between">
+    <div class="flex-1">
+      <!-- PC用: 大きなタイトルとサブタイトル -->
+      <div class="hidden md:block">
+        <h1 class="text-3xl font-bold text-gray-800 dark:text-white flex items-center space-x-3">
+          <span class="material-symbols-outlined text-4xl text-orange-400 dark:text-purple-400 drop-shadow-sm dark:drop-shadow-[0_0_10px_rgba(168,85,247,0.8)] animate-bounce-slow">footprint</span>
+          <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-400 dark:to-pink-400 drop-shadow-sm">散歩記録</span>
+        </h1>
+        <p class="text-sm text-gray-500 dark:text-purple-200/70 mt-1 ml-1 font-medium">あなたの足跡、ひとつひとつ。</p>
+      </div>
+
+      <!-- スマホ用: シンプルなタイトル -->
+      <div class="md:hidden">
+        <h1 class="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-400 dark:to-pink-400 tracking-tight drop-shadow-sm">
+          散歩記録
+        </h1>
+      </div>
+    </div>
+
+    <!-- スマホ用: 小さな記録ボタン（右上）-->
+    <div class="md:hidden flex items-center gap-2">
+      <%= link_to import_google_fit_walks_path, data: { turbo_method: :post, turbo_confirm: "直近30日分のデータをGoogle Fitから取り込みますか？" }, class: "flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-r from-green-500 to-green-600 dark:from-green-600 dark:to-green-700 text-white shadow-sm hover:shadow-md transition-all active:scale-95" do %>
+        <%= image_tag "google_fit_logo.png", class: "w-5 h-5 object-contain rounded-full bg-white p-0.5 shadow-sm", alt: "Google Fit" %>
+      <% end %>
+
+      <%= link_to new_walk_path, class: "flex items-center gap-1 px-3 py-1.5 rounded-full bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-600 dark:to-pink-600 text-white text-xs font-bold shadow-sm hover:shadow-md transition-all active:scale-95" do %>
+        <span class="material-symbols-outlined text-sm">add</span>
+        <span>記録</span>
+      <% end %>
+    </div>
+  </div>
+
+  <!-- 新規作成ボタン（PCのみ） -->
+  <div class="mb-10 hidden md:block">
+    <div class="flex items-center gap-4">
+      <%= link_to new_walk_path,
+          class: "group relative w-full sm:w-auto inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-500 to-pink-500 dark:from-purple-700 dark:via-fuchsia-800 dark:to-pink-800 hover:from-purple-400 hover:to-pink-400 dark:hover:from-purple-600 dark:hover:via-fuchsia-700 dark:hover:to-pink-700 text-white font-bold py-4 px-8 rounded-full border-2 border-white/30 dark:border-purple-400/30 shadow-[0_10px_25px_rgba(168,85,247,0.4),inset_0_1px_0_rgba(255,255,255,0.4)] dark:shadow-[0_0_25px_rgba(168,85,247,0.5),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] hover:shadow-[0_15px_35px_rgba(168,85,247,0.6),inset_0_1px_0_rgba(255,255,255,0.6)] dark:hover:shadow-[0_0_40px_rgba(168,85,247,0.7),inset_0_0_0_1px_rgba(255,255,255,0.3)] transition-all duration-300 transform hover:-translate-y-1 active:scale-95 overflow-hidden before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/30 before:to-transparent before:rounded-t-full before:pointer-events-none" do %>
+        <span class="material-symbols-outlined text-2xl group-hover:rotate-90 transition-transform duration-300 relative z-10 drop-shadow-md">add</span>
+        <span class="text-lg relative z-10 drop-shadow-sm">新しい散歩を記録する</span>
+      <% end %>
+
+      <%= link_to import_google_fit_walks_path,
+          data: { turbo_method: :post, turbo_confirm: "直近30日分のデータをGoogle Fitから取り込みますか？\n\n・既存より数値が大きい項目のみ更新されます\n・サイクリングは早歩き相当の歩数に換算されます" },
+          class: "group relative w-full sm:w-auto inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-green-500 to-green-600 dark:from-green-700 dark:via-green-800 dark:to-green-900 hover:from-green-400 hover:to-green-500 dark:hover:from-green-600 dark:hover:via-green-700 dark:hover:to-green-800 text-white font-bold py-4 px-6 rounded-full border-2 border-white/30 dark:border-green-400/30 shadow-[0_10px_25px_rgba(34,197,94,0.4),inset_0_1px_0_rgba(255,255,255,0.4)] dark:shadow-[0_0_25px_rgba(34,197,94,0.5),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] hover:shadow-[0_15px_35px_rgba(34,197,94,0.6),inset_0_1px_0_rgba(255,255,255,0.6)] dark:hover:shadow-[0_0_40px_rgba(34,197,94,0.7),inset_0_0_0_1px_rgba(255,255,255,0.3)] transition-all duration-300 transform hover:-translate-y-1 active:scale-95 overflow-hidden before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/30 before:to-transparent before:rounded-t-full before:pointer-events-none" do %>
+        <%= image_tag "google_fit_logo.png", class: "w-8 h-8 object-contain rounded-full bg-white p-1 shadow-sm relative z-10", alt: "Google Fit" %>
+        <span class="text-lg relative z-10 drop-shadow-sm">Fit一括取込</span>
+      <% end %>
+    </div>
+  </div>
+
+  <!-- ページネーション（上部） -->
+  <div class="mb-4 flex justify-center">
+    <%= paginate @walks %>
+  </div>
+
+  <!-- 散歩記録一覧 -->
+  <div class="grid grid-cols-1 gap-8">
+    <% if @walks.any? %>
+      <% @walks.each do |walk| %>
+        <!-- 各散歩記録カード (Claymorphism / Neon Noir) -->
+        <%= link_to walk_path(walk), class: "block group relative transform transition-all duration-300 hover:-translate-y-2 hover:scale-105" do %>
+          <div class="relative overflow-hidden bg-[radial-gradient(ellipse_120%_120%_at_35%_35%,#ffffff_30%,#ffedd5_90%)] dark:bg-none dark:bg-[#1a0b2e]/80 backdrop-blur-xl border-2 border-white/60 dark:border-purple-500/30 dark:border-t-white/40 rounded-[3.75rem] shadow-[20px_20px_60px_rgba(249,115,22,0.2),-20px_-20px_60px_#ffffff,inset_-5px_-5px_15px_rgba(249,115,22,0.1),inset_5px_5px_15px_rgba(255,255,255,0.7)] dark:shadow-[0_0_20px_rgba(168,85,247,0.2),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] p-6 transition-all duration-300 hover:shadow-[25px_25px_70px_rgba(249,115,22,0.3),-25px_-25px_70px_#ffffff,inset_-5px_-5px_15px_rgba(249,115,22,0.1),inset_5px_5px_15px_rgba(255,255,255,0.7)] hover:dark:shadow-[0_0_40px_rgba(168,85,247,0.4),inset_0_0_0_1px_rgba(255,255,255,0.3),inset_0_1px_0_rgba(255,255,255,0.5)] before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/40 before:to-transparent before:rounded-t-[3.75rem] before:pointer-events-none before:animate-pulse">
+
+            <!-- 装飾用背景（パステルカラーのオーブ / ネオンの光） -->
+            <div class="absolute -top-10 -right-10 w-40 h-40 bg-orange-100/50 dark:bg-purple-600/20 rounded-full blur-3xl pointer-events-none group-hover:bg-orange-200/50 dark:group-hover:bg-purple-500/30 transition-colors duration-300"></div>
+            <div class="absolute bottom-[-10%] left-[-10%] w-32 h-32 bg-blue-100/50 dark:bg-pink-600/10 rounded-full blur-3xl pointer-events-none group-hover:bg-blue-200/50 dark:group-hover:bg-pink-500/20 transition-colors duration-300"></div>
+
+            <!-- 背景アクセントアイコン（足跡） -->
+            <div class="absolute -top-6 -right-6 pointer-events-none opacity-[0.04] dark:opacity-[0.03] transform transition-transform duration-500 group-hover:rotate-12 group-hover:scale-110">
+              <span class="material-symbols-outlined text-[9rem] text-slate-600 dark:text-white">footprint</span>
+            </div>
+
+            <!-- ヘッダー部分（日付・曜日） -->
+            <div class="flex items-center justify-between mb-4 relative z-10">
+              <div class="flex items-center space-x-4">
+                <div class="bg-orange-50 dark:bg-[#2e1a47] p-3 rounded-2xl text-orange-500 dark:text-purple-300 shadow-inner border border-orange-100 dark:border-purple-500/30 dark:shadow-[0_0_10px_rgba(168,85,247,0.2)]">
+                  <span class="material-symbols-outlined text-2xl dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(192,132,252,0.8)]">calendar_month</span>
+                </div>
+                <div>
+                  <p class="text-xl font-bold text-gray-700 dark:text-purple-100">
+                    <%= walk.walked_on.strftime('%Y/%m/%d') %>
+                  </p>
+                  <p class="text-sm text-orange-400 dark:text-purple-400 font-bold">
+                    <%= %w[日 月 火 水 木 金 土][walk.walked_on.wday] %>曜日
+                  </p>
+                </div>
+              </div>
+
+              <!-- 詳細へ矢印 (円形ボタン風) -->
+              <div class="w-10 h-10 rounded-full bg-white dark:bg-white/10 flex items-center justify-center shadow-[4px_4px_8px_rgba(166,175,195,0.2),-4px_-4px_8px_rgba(255,255,255,0.9)] dark:shadow-none group-hover:scale-110 transition-transform duration-300">
+                <span class="material-symbols-outlined text-gray-400 dark:text-purple-300 group-hover:text-orange-500 dark:group-hover:text-pink-400 transition-colors">arrow_forward_ios</span>
+              </div>
+            </div>
+
+            <!-- 場所 -->
+            <div class="flex items-center space-x-2 mb-4 relative z-10 pl-1">
+              <span class="material-symbols-outlined text-gray-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(192,132,252,0.8)]">location_on</span>
+              <span class="font-bold text-gray-600 dark:text-purple-200 line-clamp-1"><%= walk.location %></span>
+            </div>
+
+            <!-- スタッツグリッド (統合・横並び・レスポンシブ最適化) -->
+            <div class="relative z-10 bg-slate-50 dark:bg-[#0b0514]/40 rounded-3xl shadow-inner border border-black/5 dark:border-purple-500/20 dark:shadow-none p-3 sm:p-4 flex items-center justify-between">
+              <!-- 距離 -->
+              <div class="flex flex-col items-center flex-1">
+                <div class="flex items-center space-x-0.5 sm:space-x-1 mb-1">
+                  <span class="material-symbols-outlined text-base sm:text-lg text-blue-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-cyan-300 dark:to-blue-300 dark:drop-shadow-[0_0_8px_rgba(34,211,238,0.8)]">straighten</span>
+                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-300/70 font-bold">距離</span>
+                </div>
+                <div class="flex items-baseline">
+                  <span class="font-bold text-gray-700 dark:text-cyan-200 text-base sm:text-lg mr-0.5 sm:mr-1">
+                    <%= walk.distance || 0 %>
+                  </span>
+                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-400/60">km</span>
+                </div>
+              </div>
+
+              <!-- 区切り線 -->
+              <div class="w-px h-6 sm:h-8 bg-gray-200 dark:bg-white/10"></div>
+
+              <!-- 時間 -->
+              <div class="flex flex-col items-center flex-1">
+                <div class="flex items-center space-x-0.5 sm:space-x-1 mb-1">
+                  <span class="material-symbols-outlined text-base sm:text-lg text-green-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-green-300 dark:to-emerald-300 dark:drop-shadow-[0_0_8px_rgba(74,222,128,0.8)]">timer</span>
+                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-300/70 font-bold">時間</span>
+                </div>
+                <div class="flex items-baseline">
+                  <span class="font-bold text-gray-700 dark:text-green-200 text-base sm:text-lg mr-0.5 sm:mr-1">
+                    <%= walk.duration || 0 %>
+                  </span>
+                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-400/60">分</span>
+                </div>
+              </div>
+
+              <!-- 区切り線 -->
+              <div class="w-px h-6 sm:h-8 bg-gray-200 dark:bg-white/10"></div>
+
+              <!-- 歩数 -->
+              <div class="flex flex-col items-center flex-1">
+                <div class="flex items-center space-x-0.5 sm:space-x-1 mb-1">
+                  <span class="material-symbols-outlined text-base sm:text-lg text-purple-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-fuchsia-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(232,121,249,0.8)]">footprint</span>
+                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-300/70 font-bold">歩数</span>
+                </div>
+                <div class="flex items-baseline">
+                  <span class="font-bold text-gray-700 dark:text-fuchsia-200 text-base sm:text-lg mr-0.5 sm:mr-1">
+                    <%= number_with_delimiter(walk.steps || 0) %>
+                  </span>
+                  <span class="text-[10px] sm:text-xs text-gray-400 dark:text-purple-400/60">歩</span>
+                </div>
+              </div>
+            </div>
+
+            <!-- メモ（あれば） -->
+            <% if walk.notes.present? %>
+              <div class="mt-4 pt-4 border-t border-gray-100 dark:border-white/10 relative z-10">
+                <div class="flex items-start space-x-2 text-gray-500 dark:text-purple-200/80">
+                  <span class="material-symbols-outlined text-sm mt-0.5 text-gray-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_8px_rgba(192,132,252,0.8)]">edit_note</span>
+                  <p class="text-sm line-clamp-1"><%= walk.notes %></p>
+                </div>
+              </div>
+            <% end %>
+          </div>
+        <% end %>
+      <% end %>
+
+    <!-- ページネーション -->
+    <div class="mt-8 flex justify-center">
+      <%= paginate @walks %>
+    </div>
+
+    <% else %>
+      <!-- 記録がない場合のメッセージ (Claymorphism / Neon Noir) -->
+      <div class="col-span-1 bg-[radial-gradient(ellipse_120%_120%_at_35%_35%,#ffffff_30%,#ffedd5_90%)] dark:bg-none dark:bg-[#1a0b2e]/80 backdrop-blur-xl p-12 rounded-[3.75rem] shadow-[20px_20px_60px_rgba(249,115,22,0.2),-20px_-20px_60px_#ffffff,inset_-5px_-5px_15px_rgba(249,115,22,0.1),inset_5px_5px_15px_rgba(255,255,255,0.7)] dark:shadow-[0_0_20px_rgba(168,85,247,0.2),inset_0_0_0_1px_rgba(255,255,255,0.1),inset_0_1px_0_rgba(255,255,255,0.3)] border-2 border-white/60 dark:border-purple-500/30 dark:border-t-white/40 text-center relative overflow-hidden before:absolute before:inset-x-0 before:top-0 before:h-[45%] before:bg-gradient-to-b before:from-white/40 before:to-transparent before:rounded-t-[3.75rem] before:pointer-events-none before:animate-pulse">
+        <div class="bg-orange-50 dark:bg-[#2e1a47] w-28 h-28 rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner animate-pulse-slow dark:shadow-[0_0_20px_rgba(168,85,247,0.3)] relative z-10">
+          <span class="material-symbols-outlined text-6xl text-orange-400 dark:!text-transparent dark:!bg-clip-text dark:bg-gradient-to-br dark:from-purple-300 dark:to-pink-300 dark:drop-shadow-[0_0_10px_rgba(168,85,247,0.8)]">hiking</span>
+        </div>
+        <h3 class="text-2xl font-bold text-gray-700 dark:text-purple-100 mb-3">さあ、冒険に出かけよう！</h3>
+        <p class="text-gray-500 dark:text-purple-200/70 mb-10 text-base leading-relaxed">
+          まだ散歩の記録がありません。<br>
+          最初の足跡を刻んで、思い出を作りませんか？
+        </p>
+        <%= link_to new_walk_path,
+            class: "inline-flex items-center space-x-2 bg-gradient-to-r from-orange-400 to-pink-500 dark:from-purple-600 dark:to-pink-600 hover:from-orange-500 hover:to-pink-600 dark:hover:from-purple-500 dark:hover:to-pink-500 text-white font-bold py-4 px-8 rounded-full shadow-[6px_6px_12px_rgba(166,175,195,0.4),-6px_-6px_12px_rgba(255,255,255,0.9)] dark:shadow-[0_0_20px_rgba(168,85,247,0.5)] transition-all duration-300 transform hover:-translate-y-1 active:scale-95 active:shadow-inner" do %>
+          <span class="material-symbols-outlined">arrow_forward</span>
+          <span>最初の記録を作成する</span>
+        <% end %>
+      </div>
+    <% end %>
+  </div>
+</div>
diff --git a/config/environments/test.rb b/config/environments/test.rb
index 5ac73a0..bb0393c 100644
--- a/config/environments/test.rb
+++ b/config/environments/test.rb
@@ -1,84 +1,84 @@
-require "active_support/core_ext/integer/time"
-
-# The test environment is used exclusively to run your application's
-# test suite. You never need to work with it otherwise. Remember that
-# your test database is "scratch space" for the test suite and is wiped
-# and recreated between test runs. Don't rely on the data there!
-
-Rails.application.configure do
-  # Settings specified here will take precedence over those in config/application.rb.
-
-  # While tests run files are not watched, reloading is not necessary.
-  config.enable_reloading = false
-
-  # Enable asset compilation for tests (fixes CI asset errors)
-  config.assets.compile = true
-
-  # Sprocketsのキャッシュをメモリ上に保存（ファイル権限エラー回避）
-  config.assets.configure do |env|
-    env.cache = ActiveSupport::Cache.lookup_store(:memory_store)
-  end
-
-  # Eager loading loads your entire application. When running a single test locally,
-  # this is usually not necessary, and can slow down your test suite. However, it's
-  # recommended that you enable it in continuous integration systems to ensure eager
-  # loading is working properly before deploying your code.
-  config.eager_load = ENV["CI"].present?
-
-  # Configure public file server for tests with Cache-Control for performance.
-  config.public_file_server.headers = { "Cache-Control" => "public, max-age=#{1.hour.to_i}" }
-
-  # Show full error reports and disable caching.
-  config.consider_all_requests_local = true
-  config.action_controller.perform_caching = false
-  config.cache_store = :null_store
-
-  # Render exception templates for rescuable exceptions and raise for other exceptions.
-  config.action_dispatch.show_exceptions = :rescuable
-
-  # Disable request forgery protection in test environment.
-  config.action_controller.allow_forgery_protection = false
-
-  # Store uploaded files on the local file system in a temporary directory.
-  config.active_storage.service = :test
-
-  # Disable caching for Action Mailer templates even if Action Controller
-  # caching is enabled.
-  config.action_mailer.perform_caching = false
-
-  # Tell Action Mailer not to deliver emails to the real world.
-  # The :test delivery method accumulates sent emails in the
-  # ActionMailer::Base.deliveries array.
-  config.action_mailer.delivery_method = :test
-
-  # メール送信を即座に実行（非同期ジョブを待たない）
-  config.action_mailer.perform_deliveries = false
-
-  # Unlike controllers, the mailer instance doesn't have any context about the
-  # incoming request so you'll need to provide the :host parameter yourself.
-  config.action_mailer.default_url_options = { host: "www.example.com" }
-
-  # ActiveJobをテスト実行（ジョブのエンキューを検証可能に）
-  config.active_job.queue_adapter = :test
-
-  # Print deprecation notices to the stderr.
-  config.active_support.deprecation = :stderr
-
-  # Raise exceptions for disallowed deprecations.
-  config.active_support.disallowed_deprecation = :raise
-
-  # Tell Active Support which deprecation messages to disallow.
-  config.active_support.disallowed_deprecation_warnings = []
-
-  # Raises error for missing translations.
-  # config.i18n.raise_on_missing_translations = true
-
-  # Annotate rendered view with file names.
-  # config.action_view.annotate_rendered_view_with_filenames = true
-
-  # Raise error when a before_action's only/except options reference missing actions.
-  config.action_controller.raise_on_missing_callback_actions = true
-  # テスト実行時に「全ホスト許可」に設定する
-  # テスト実行時にホスト制限を無効化（全許可）
-  config.hosts = nil
-end
+require "active_support/core_ext/integer/time"
+
+# The test environment is used exclusively to run your application's
+# test suite. You never need to work with it otherwise. Remember that
+# your test database is "scratch space" for the test suite and is wiped
+# and recreated between test runs. Don't rely on the data there!
+
+Rails.application.configure do
+  # Settings specified here will take precedence over those in config/application.rb.
+
+  # While tests run files are not watched, reloading is not necessary.
+  config.enable_reloading = false
+
+  # Enable asset compilation for tests (fixes CI asset errors)
+  config.assets.compile = true
+
+  # Sprocketsのキャッシュをメモリ上に保存（ファイル権限エラー回避）
+  config.assets.configure do |env|
+    env.cache = ActiveSupport::Cache.lookup_store(:memory_store)
+  end
+
+  # Eager loading loads your entire application. When running a single test locally,
+  # this is usually not necessary, and can slow down your test suite. However, it's
+  # recommended that you enable it in continuous integration systems to ensure eager
+  # loading is working properly before deploying your code.
+  config.eager_load = ENV["CI"].present?
+
+  # Configure public file server for tests with Cache-Control for performance.
+  config.public_file_server.headers = { "Cache-Control" => "public, max-age=#{1.hour.to_i}" }
+
+  # Show full error reports and disable caching.
+  config.consider_all_requests_local = true
+  config.action_controller.perform_caching = false
+  config.cache_store = :null_store
+
+  # Render exception templates for rescuable exceptions and raise for other exceptions.
+  config.action_dispatch.show_exceptions = :rescuable
+
+  # Disable request forgery protection in test environment.
+  config.action_controller.allow_forgery_protection = false
+
+  # Store uploaded files on the local file system in a temporary directory.
+  config.active_storage.service = :test
+
+  # Disable caching for Action Mailer templates even if Action Controller
+  # caching is enabled.
+  config.action_mailer.perform_caching = false
+
+  # Tell Action Mailer not to deliver emails to the real world.
+  # The :test delivery method accumulates sent emails in the
+  # ActionMailer::Base.deliveries array.
+  config.action_mailer.delivery_method = :test
+
+  # メール送信を即座に実行（非同期ジョブを待たない）
+  config.action_mailer.perform_deliveries = false
+
+  # Unlike controllers, the mailer instance doesn't have any context about the
+  # incoming request so you'll need to provide the :host parameter yourself.
+  config.action_mailer.default_url_options = { host: "www.example.com" }
+
+  # ActiveJobをテスト実行（ジョブのエンキューを検証可能に）
+  config.active_job.queue_adapter = :test
+
+  # Print deprecation notices to the stderr.
+  config.active_support.deprecation = :stderr
+
+  # Raise exceptions for disallowed deprecations.
+  config.active_support.disallowed_deprecation = :raise
+
+  # Tell Active Support which deprecation messages to disallow.
+  config.active_support.disallowed_deprecation_warnings = []
+
+  # Raises error for missing translations.
+  # config.i18n.raise_on_missing_translations = true
+
+  # Annotate rendered view with file names.
+  # config.action_view.annotate_rendered_view_with_filenames = true
+
+  # Raise error when a before_action's only/except options reference missing actions.
+  config.action_controller.raise_on_missing_callback_actions = true
+  # テスト実行時に「全ホスト許可」に設定する
+  # テスト実行時にホスト制限を無効化（全許可）
+  config.hosts = nil
+end
diff --git a/repomix.config.json b/repomix.config.json
index 02d48d9..923fa4b 100644
--- a/repomix.config.json
+++ b/repomix.config.json
@@ -1,43 +1,43 @@
-{
-  "$schema": "https://repomix.com/schemas/latest/schema.json",
-  "input": {
-    "maxFileSize": 52428800
-  },
-  "output": {
-    "filePath": "repomix-output.xml",
-    "style": "xml",
-    "parsableStyle": false,
-    "fileSummary": true,
-    "directoryStructure": true,
-    "files": true,
-    "removeComments": false,
-    "removeEmptyLines": false,
-    "compress": false,
-    "topFilesLength": 5,
-    "showLineNumbers": false,
-    "truncateBase64": false,
-    "copyToClipboard": false,
-    "includeFullDirectoryStructure": false,
-    "tokenCountTree": false,
-    "git": {
-      "sortByChanges": true,
-      "sortByChangesMaxCommits": 100,
-      "includeDiffs": false,
-      "includeLogs": false,
-      "includeLogsCount": 50
-    }
-  },
-  "include": [],
-  "ignore": {
-    "useGitignore": true,
-    "useDotIgnore": true,
-    "useDefaultPatterns": true,
-    "customPatterns": []
-  },
-  "security": {
-    "enableSecurityCheck": true
-  },
-  "tokenCount": {
-    "encoding": "o200k_base"
-  }
+{
+  "$schema": "https://repomix.com/schemas/latest/schema.json",
+  "input": {
+    "maxFileSize": 52428800
+  },
+  "output": {
+    "filePath": "repomix-output.xml",
+    "style": "xml",
+    "parsableStyle": false,
+    "fileSummary": true,
+    "directoryStructure": true,
+    "files": true,
+    "removeComments": false,
+    "removeEmptyLines": false,
+    "compress": false,
+    "topFilesLength": 5,
+    "showLineNumbers": false,
+    "truncateBase64": false,
+    "copyToClipboard": false,
+    "includeFullDirectoryStructure": false,
+    "tokenCountTree": false,
+    "git": {
+      "sortByChanges": true,
+      "sortByChangesMaxCommits": 100,
+      "includeDiffs": false,
+      "includeLogs": false,
+      "includeLogsCount": 50
+    }
+  },
+  "include": [],
+  "ignore": {
+    "useGitignore": true,
+    "useDotIgnore": true,
+    "useDefaultPatterns": true,
+    "customPatterns": []
+  },
+  "security": {
+    "enableSecurityCheck": true
+  },
+  "tokenCount": {
+    "encoding": "o200k_base"
+  }
 }
\ No newline at end of file
diff --git a/rspec_debug.log b/rspec_debug.log
index 81eaa51..d577b30 100644
--- a/rspec_debug.log
+++ b/rspec_debug.log
@@ -1,7676 +1,7676 @@
-..Response Status: 422
-Response Body: <!DOCTYPE html>
-<html lang="en">
-<head>
-  <meta charset="utf-8" />
-  <meta name="viewport" content="width=device-width, initial-scale=1">
-  <meta name="turbo-visit-control" content="reload">
-  <title>Action Controller: Exception caught</title>
-  <style>
-    body {
-      background-color: #FAFAFA;
-      color: #333;
-      color-scheme: light dark;
-      supported-color-schemes: light dark;
-      margin: 0px;
-    }
-
-    body, p, ol, ul, td {
-      font-family: helvetica, verdana, arial, sans-serif;
-      font-size:   13px;
-      line-height: 18px;
-    }
-
-    pre {
-      font-size: 11px;
-      white-space: pre-wrap;
-    }
-
-    pre.box {
-      border: 1px solid #EEE;
-      padding: 10px;
-      margin: 0px;
-      width: 958px;
-    }
-
-    header {
-      color: #F0F0F0;
-      background: #C00;
-      padding: 0.5em 1.5em;
-    }
-
-    h1 {
-      overflow-wrap: break-word;
-      margin: 0.2em 0;
-      line-height: 1.1em;
-      font-size: 2em;
-    }
-
-    h2 {
-      color: #C00;
-      line-height: 25px;
-    }
-
-    code.traces {
-      font-size: 11px;
-    }
-
-    .response-heading, .request-heading {
-      margin-top: 30px;
-    }
-
-    .exception-message {
-      padding: 8px 0;
-    }
-
-    .exception-message .message {
-      margin-bottom: 8px;
-      line-height: 25px;
-      font-size: 1.5em;
-      font-weight: bold;
-      color: #C00;
-    }
-
-    .details {
-      border: 1px solid #D0D0D0;
-      border-radius: 4px;
-      margin: 1em 0px;
-      display: block;
-      max-width: 978px;
-    }
-
-    .summary {
-      padding: 8px 15px;
-      border-bottom: 1px solid #D0D0D0;
-      display: block;
-    }
-
-    a.summary {
-      color: #F0F0F0;
-      text-decoration: none;
-      background: #C52F24;
-      border-bottom: none;
-    }
-
-    .details pre {
-      margin: 5px;
-      border: none;
-    }
-
-    #container {
-      box-sizing: border-box;
-      width: 100%;
-      padding: 0 1.5em;
-    }
-
-    .source * {
-      margin: 0px;
-      padding: 0px;
-    }
-
-    .source {
-      border: 1px solid #D9D9D9;
-      background: #ECECEC;
-      max-width: 978px;
-    }
-
-    .source pre {
-      padding: 10px 0px;
-      border: none;
-    }
-
-    .source .data {
-      font-size: 80%;
-      overflow: auto;
-      background-color: #FFF;
-    }
-
-    .info {
-      padding: 0.5em;
-    }
-
-    .source .data .line_numbers {
-      background-color: #ECECEC;
-      color: #555;
-      padding: 1em .5em;
-      border-right: 1px solid #DDD;
-      text-align: right;
-    }
-
-    .line {
-      padding-left: 10px;
-      white-space: pre;
-    }
-
-    .line:hover {
-      background-color: #F6F6F6;
-    }
-
-    .line.active {
-      background-color: #FCC;
-    }
-
-    .error_highlight {
-      display: inline-block;
-      background-color: #FF9;
-      text-decoration: #F00 wavy underline;
-    }
-
-    .error_highlight_tip {
-      color: #666;
-      padding: 2px 2px;
-      font-size: 10px;
-    }
-
-    .button_to {
-      display: inline-block;
-      margin-top: 0.75em;
-      margin-bottom: 0.75em;
-    }
-
-    .hidden {
-      display: none;
-    }
-
-    .correction {
-      list-style-type: none;
-    }
-
-    input[type="submit"] {
-      color: white;
-      background-color: #C00;
-      border: none;
-      border-radius: 12px;
-      box-shadow: 0 3px #F99;
-      font-size: 13px;
-      font-weight: bold;
-      margin: 0;
-      padding: 10px 18px;
-      cursor: pointer;
-      -webkit-appearance: none;
-    }
-    input[type="submit"]:focus,
-    input[type="submit"]:hover {
-      opacity: 0.8;
-    }
-    input[type="submit"]:active {
-      box-shadow: 0 2px #F99;
-      transform: translateY(1px)
-    }
-
-    a { color: #980905; }
-    a:visited { color: #666; }
-    a.trace-frames {
-      color: #666;
-      overflow-wrap: break-word;
-    }
-    a:hover, a.trace-frames.selected { color: #C00; }
-    a.summary:hover { color: #FFF; }
-
-    @media (prefers-color-scheme: dark) {
-      body {
-        background-color: #222;
-        color: #ECECEC;
-      }
-
-      .details, .summary {
-        border-color: #666;
-      }
-
-      .source {
-        border-color: #555;
-        background-color: #333;
-      }
-
-      .source .data {
-        background: #444;
-      }
-
-      .source .data .line_numbers {
-        background: #333;
-        border-color: #222;
-      }
-
-      .line:hover {
-        background: #666;
-      }
-
-      .line.active {
-        background-color: #900;
-      }
-
-      .error_highlight {
-        color: #333;
-      }
-
-      input[type="submit"] {
-        box-shadow: 0 3px #800;
-      }
-      input[type="submit"]:active {
-        box-shadow: 0 2px #800;
-      }
-
-      a { color: #C00; }
-      a.trace-frames { color: #999; }
-      a:hover, a.trace-frames.selected { color: #E9382B; }
-    }
-
-    
-  </style>
-
-  <script>
-    var toggle = function(id) {
-      document.getElementById(id).classList.toggle('hidden');
-      return false;
-    }
-    var show = function(id) {
-      document.getElementById(id).style.display = 'block';
-    }
-    var hide = function(id) {
-      document.getElementById(id).style.display = 'none';
-    }
-    var toggleSessionDump = function() {
-      return toggle('session_dump');
-    }
-    var toggleEnvDump = function() {
-      return toggle('env_dump');
-    }
-  </script>
-</head>
-<body>
-
-  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb --><header>
-  <h1>
-    ActionController::InvalidAuthenticityToken
-      in PostsController#create
-  </h1>
-</header>
-
-<main role="main" id="container">
-  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_message_and_suggestions.html.erb -->  <div class="exception-message">
-    <div class="message">Can't verify CSRF token authenticity.</div>
-  </div>
-<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_message_and_suggestions.html.erb -->
-  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_actions.html.erb -->
-<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_actions.html.erb -->
-
-  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb -->
-    <div class="source " id="frame-source-0-0">
-      <div class="info">
-        Extracted source (around line <strong>#314</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>312</span>
-<span>313</span>
-<span>314</span>
-<span>315</span>
-<span>316</span>
-<span>317</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">        def handle_unverified_request
-</div><div class="line active">          <span class="error_highlight">raise</span> ActionController::InvalidAuthenticityToken, warning_message
-</div><div class="line">        end
-</div><div class="line">      end
-</div><div class="line">    end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-1">
-      <div class="info">
-        Extracted source (around line <strong>#408</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>406</span>
-<span>407</span>
-<span>408</span>
-<span>409</span>
-<span>410</span>
-<span>411</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        end
-</div><div class="line">
-</div><div class="line active">        protection_strategy<span class="error_highlight">.handle_unverified_request</span>
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      def unverified_request_warning_message
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-2">
-      <div class="info">
-        Extracted source (around line <strong>#257</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>255</span>
-<span>256</span>
-<span>257</span>
-<span>258</span>
-<span>259</span>
-<span>260</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # clear run strategies and remove cached variables.
-</div><div class="line">      def handle_unverified_request
-</div><div class="line active">        super # call the default behavior which resets/nullifies/raises
-</div><div class="line">        request.env[&quot;devise.skip_storage&quot;] = true
-</div><div class="line">        sign_out_all_scopes(false)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-3">
-      <div class="info">
-        Extracted source (around line <strong>#397</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>395</span>
-<span>396</span>
-<span>397</span>
-<span>398</span>
-<span>399</span>
-<span>400</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          logger.warn unverified_request_warning_message if logger &amp;&amp; log_warning_on_csrf_failure
-</div><div class="line">
-</div><div class="line active">          <span class="error_highlight">handle_unverified_request</span>
-</div><div class="line">        end
-</div><div class="line">      end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-4">
-      <div class="info">
-        Extracted source (around line <strong>#362</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>360</span>
-<span>361</span>
-<span>362</span>
-<span>363</span>
-<span>364</span>
-<span>365</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          def make_lambda
-</div><div class="line">            lambda do |target, value, &amp;block|
-</div><div class="line active">              target<span class="error_highlight">.send</span>(@method_name, &amp;block)
-</div><div class="line">            end
-</div><div class="line">          end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-5">
-      <div class="info">
-        Extracted source (around line <strong>#179</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>177</span>
-<span>178</span>
-<span>179</span>
-<span>180</span>
-<span>181</span>
-<span>182</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">            if !halted &amp;&amp; user_conditions.all? { |c| c.call(target, value) }
-</div><div class="line active">              result_lambda = -&gt; { user_callback<span class="error_highlight">.call</span> target, value }
-</div><div class="line">              env.halted = halted_lambda.call(target, result_lambda)
-</div><div class="line">              if env.halted
-</div><div class="line">                target.send :halted_callback_hook, filter, name
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-6">
-      <div class="info">
-        Extracted source (around line <strong>#34</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-<span>36</span>
-<span>37</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    included do
-</div><div class="line">      define_callbacks :process_action,
-</div><div class="line active">                       terminator: -&gt;(controller, result_lambda) { result_lambda<span class="error_highlight">.call</span>; controller.performed? },
-</div><div class="line">                       skip_after_callbacks_if_terminated: true
-</div><div class="line">      mattr_accessor :raise_on_missing_callback_actions, default: false
-</div><div class="line">    end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-7">
-      <div class="info">
-        Extracted source (around line <strong>#180</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>178</span>
-<span>179</span>
-<span>180</span>
-<span>181</span>
-<span>182</span>
-<span>183</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            if !halted &amp;&amp; user_conditions.all? { |c| c.call(target, value) }
-</div><div class="line">              result_lambda = -&gt; { user_callback.call target, value }
-</div><div class="line active">              env.halted = halted_lambda<span class="error_highlight">.call</span>(target, result_lambda)
-</div><div class="line">              if env.halted
-</div><div class="line">                target.send :halted_callback_hook, filter, name
-</div><div class="line">              end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-8">
-      <div class="info">
-        Extracted source (around line <strong>#560</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>558</span>
-<span>559</span>
-<span>560</span>
-<span>561</span>
-<span>562</span>
-<span>563</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">        def invoke_before(arg)
-</div><div class="line active">          @before&amp;.each { |b| b<span class="error_highlight">.call</span>(arg) }
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        def invoke_after(arg)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-9">
-      <div class="info">
-        Extracted source (around line <strong>#560</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>558</span>
-<span>559</span>
-<span>560</span>
-<span>561</span>
-<span>562</span>
-<span>563</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">        def invoke_before(arg)
-</div><div class="line active">          @before<span class="error_highlight">&amp;.each</span> { |b| b.call(arg) }
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        def invoke_after(arg)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-10">
-      <div class="info">
-        Extracted source (around line <strong>#560</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>558</span>
-<span>559</span>
-<span>560</span>
-<span>561</span>
-<span>562</span>
-<span>563</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">        def invoke_before(arg)
-</div><div class="line active">          @before<span class="error_highlight">&amp;.each</span> { |b| b.call(arg) }
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        def invoke_after(arg)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-11">
-      <div class="info">
-        Extracted source (around line <strong>#119</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>117</span>
-<span>118</span>
-<span>119</span>
-<span>120</span>
-<span>121</span>
-<span>122</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            while true
-</div><div class="line">              current = next_sequence
-</div><div class="line active">              current<span class="error_highlight">.invoke_before</span>(env)
-</div><div class="line">              if current.final?
-</div><div class="line">                env.value = !env.halted &amp;&amp; (!block_given? || yield)
-</div><div class="line">              elsif current.skip?(env)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-12">
-      <div class="info">
-        Extracted source (around line <strong>#141</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>139</span>
-<span>140</span>
-<span>141</span>
-<span>142</span>
-<span>143</span>
-<span>144</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          end
-</div><div class="line">
-</div><div class="line active">          invoke_sequence<span class="error_highlight">.call</span>
-</div><div class="line">        end
-</div><div class="line">      end
-</div><div class="line">    end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-13">
-      <div class="info">
-        Extracted source (around line <strong>#260</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>258</span>
-<span>259</span>
-<span>260</span>
-<span>261</span>
-<span>262</span>
-<span>263</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # callbacks around the normal behavior.
-</div><div class="line">      def process_action(...)
-</div><div class="line active">        <span class="error_highlight">run_callbacks</span>(:process_action) do
-</div><div class="line">          super
-</div><div class="line">        end
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-14">
-      <div class="info">
-        Extracted source (around line <strong>#27</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    private
-</div><div class="line">      def process_action(*)
-</div><div class="line active">        super
-</div><div class="line">      rescue Exception =&gt; exception
-</div><div class="line">        request.env[&quot;action_dispatch.show_detailed_exceptions&quot;] ||= show_detailed_exceptions?
-</div><div class="line">        rescue_with_handler(exception) || raise
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-15">
-      <div class="info">
-        Extracted source (around line <strong>#77</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>75</span>
-<span>76</span>
-<span>77</span>
-<span>78</span>
-<span>79</span>
-<span>80</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">        ActiveSupport::Notifications.instrument(&quot;process_action.action_controller&quot;, raw_payload) do |payload|
-</div><div class="line active">          result = super
-</div><div class="line">          payload[:response] = response
-</div><div class="line">          payload[:status]   = response.status
-</div><div class="line">          result
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-16">
-      <div class="info">
-        Extracted source (around line <strong>#210</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>208</span>
-<span>209</span>
-<span>210</span>
-<span>211</span>
-<span>212</span>
-<span>213</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def instrument(name, payload = {})
-</div><div class="line">        if notifier.listening?(name)
-</div><div class="line active">          instrumenter.instrument(name, payload) { yield payload if block_given? }
-</div><div class="line">        else
-</div><div class="line">          yield payload if block_given?
-</div><div class="line">        end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-17">
-      <div class="info">
-        Extracted source (around line <strong>#58</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>56</span>
-<span>57</span>
-<span>58</span>
-<span>59</span>
-<span>60</span>
-<span>61</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        handle.start
-</div><div class="line">        begin
-</div><div class="line active">          yield payload if block_given?
-</div><div class="line">        rescue Exception =&gt; e
-</div><div class="line">          payload[:exception] = [e.class.name, e.message]
-</div><div class="line">          payload[:exception_object] = e
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-18">
-      <div class="info">
-        Extracted source (around line <strong>#210</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>208</span>
-<span>209</span>
-<span>210</span>
-<span>211</span>
-<span>212</span>
-<span>213</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def instrument(name, payload = {})
-</div><div class="line">        if notifier.listening?(name)
-</div><div class="line active">          instrumenter<span class="error_highlight">.instrument</span>(name, payload) { yield payload if block_given? }
-</div><div class="line">        else
-</div><div class="line">          yield payload if block_given?
-</div><div class="line">        end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-19">
-      <div class="info">
-        Extracted source (around line <strong>#76</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>74</span>
-<span>75</span>
-<span>76</span>
-<span>77</span>
-<span>78</span>
-<span>79</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        ActiveSupport::Notifications.instrument(&quot;start_processing.action_controller&quot;, raw_payload)
-</div><div class="line">
-</div><div class="line active">        ActiveSupport::Notifications<span class="error_highlight">.instrument</span>(&quot;process_action.action_controller&quot;, raw_payload) do |payload|
-</div><div class="line">          result = super
-</div><div class="line">          payload[:response] = response
-</div><div class="line">          payload[:status]   = response.status
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-20">
-      <div class="info">
-        Extracted source (around line <strong>#259</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>257</span>
-<span>258</span>
-<span>259</span>
-<span>260</span>
-<span>261</span>
-<span>262</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def process_action(*)
-</div><div class="line">        _perform_parameter_wrapping if _wrapper_enabled?
-</div><div class="line active">        super
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      # Returns the wrapper key which will be used to store wrapped parameters.
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-21">
-      <div class="info">
-        Extracted source (around line <strong>#39</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>37</span>
-<span>38</span>
-<span>39</span>
-<span>40</span>
-<span>41</span>
-<span>42</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          # and it won&#39;t be cleaned up by the method below.
-</div><div class="line">          ActiveRecord::RuntimeRegistry.reset
-</div><div class="line active">          super
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        def cleanup_view_runtime
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-22">
-      <div class="info">
-        Extracted source (around line <strong>#152</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>150</span>
-<span>151</span>
-<span>152</span>
-<span>153</span>
-<span>154</span>
-<span>155</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      @_response_body = nil
-</div><div class="line">
-</div><div class="line active">      <span class="error_highlight">process_action</span>(action_name, ...)
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    # Delegates to the class&#39;s ::controller_path.
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-23">
-      <div class="info">
-        Extracted source (around line <strong>#40</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>38</span>
-<span>39</span>
-<span>40</span>
-<span>41</span>
-<span>42</span>
-<span>43</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def process(...) # :nodoc:
-</div><div class="line">      old_config, I18n.config = I18n.config, I18nProxy.new(I18n.config, lookup_context)
-</div><div class="line active">      super
-</div><div class="line">    ensure
-</div><div class="line">      I18n.config = old_config
-</div><div class="line">    end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-24">
-      <div class="info">
-        Extracted source (around line <strong>#252</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>250</span>
-<span>251</span>
-<span>252</span>
-<span>253</span>
-<span>254</span>
-<span>255</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      set_request!(request)
-</div><div class="line">      set_response!(response)
-</div><div class="line active">      <span class="error_highlight">process</span>(name)
-</div><div class="line">      request.commit_flash
-</div><div class="line">      to_a
-</div><div class="line">    end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-25">
-      <div class="info">
-        Extracted source (around line <strong>#335</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>333</span>
-<span>334</span>
-<span>335</span>
-<span>336</span>
-<span>337</span>
-<span>338</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        middleware_stack.build(name) { |env| new.dispatch(name, req, res) }.call req.env
-</div><div class="line">      else
-</div><div class="line active">        new<span class="error_highlight">.dispatch</span>(name, req, res)
-</div><div class="line">      end
-</div><div class="line">    end
-</div><div class="line">  end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-26">
-      <div class="info">
-        Extracted source (around line <strong>#67</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>65</span>
-<span>66</span>
-<span>67</span>
-<span>68</span>
-<span>69</span>
-<span>70</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">          def dispatch(controller, action, req, res)
-</div><div class="line active">            controller<span class="error_highlight">.dispatch</span>(action, req, res)
-</div><div class="line">          end
-</div><div class="line">      end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-27">
-      <div class="info">
-        Extracted source (around line <strong>#50</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>48</span>
-<span>49</span>
-<span>50</span>
-<span>51</span>
-<span>52</span>
-<span>53</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          controller = controller req
-</div><div class="line">          res        = controller.make_response! req
-</div><div class="line active">          <span class="error_highlight">dispatch</span>(controller, params[:action], req, res)
-</div><div class="line">        rescue ActionController::RoutingError
-</div><div class="line">          if @raise_on_name_error
-</div><div class="line">            raise
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-28">
-      <div class="info">
-        Extracted source (around line <strong>#53</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>51</span>
-<span>52</span>
-<span>53</span>
-<span>54</span>
-<span>55</span>
-<span>56</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          req.route_uri_pattern = route.path.spec.to_s
-</div><div class="line">
-</div><div class="line active">          _, headers, _ = response = route.app<span class="error_highlight">.serve</span>(req)
-</div><div class="line">
-</div><div class="line">          if &quot;pass&quot; == headers[Constants::X_CASCADE]
-</div><div class="line">            req.script_name     = script_name
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-29">
-      <div class="info">
-        Extracted source (around line <strong>#133</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>131</span>
-<span>132</span>
-<span>133</span>
-<span>134</span>
-<span>135</span>
-<span>136</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">              path_parameters[name.to_sym] = Utils.unescape_uri(val) if val
-</div><div class="line">            }
-</div><div class="line active">            yield [match_data, path_parameters, r]
-</div><div class="line">          }
-</div><div class="line">        end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-30">
-      <div class="info">
-        Extracted source (around line <strong>#126</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>124</span>
-<span>125</span>
-<span>126</span>
-<span>127</span>
-<span>128</span>
-<span>129</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          routes.sort_by!(&amp;:precedence)
-</div><div class="line">
-</div><div class="line active">          routes<span class="error_highlight">.each</span> { |r|
-</div><div class="line">            match_data = r.path.match(path_info)
-</div><div class="line">            path_parameters = {}
-</div><div class="line">            match_data.names.each_with_index { |name, i|
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-31">
-      <div class="info">
-        Extracted source (around line <strong>#126</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>124</span>
-<span>125</span>
-<span>126</span>
-<span>127</span>
-<span>128</span>
-<span>129</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          routes.sort_by!(&amp;:precedence)
-</div><div class="line">
-</div><div class="line active">          routes<span class="error_highlight">.each</span> { |r|
-</div><div class="line">            match_data = r.path.match(path_info)
-</div><div class="line">            path_parameters = {}
-</div><div class="line">            match_data.names.each_with_index { |name, i|
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-32">
-      <div class="info">
-        Extracted source (around line <strong>#34</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-<span>36</span>
-<span>37</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      def serve(req)
-</div><div class="line active">        <span class="error_highlight">find_routes</span>(req) do |match, parameters, route|
-</div><div class="line">          set_params  = req.path_parameters
-</div><div class="line">          path_info   = req.path_info
-</div><div class="line">          script_name = req.script_name
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-33">
-      <div class="info">
-        Extracted source (around line <strong>#896</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>894</span>
-<span>895</span>
-<span>896</span>
-<span>897</span>
-<span>898</span>
-<span>899</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        req = make_request(env)
-</div><div class="line">        req.path_info = Journey::Router::Utils.normalize_path(req.path_info)
-</div><div class="line active">        @router<span class="error_highlight">.serve</span>(req)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      def recognize_path(path, environment = {})
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-34">
-      <div class="info">
-        Extracted source (around line <strong>#478</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>476</span>
-<span>477</span>
-<span>478</span>
-<span>479</span>
-<span>480</span>
-<span>481</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call_app!(env = @env)
-</div><div class="line active">      @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">    rescue StandardError =&gt; e
-</div><div class="line">      env[&#39;omniauth.error.app&#39;] = true
-</div><div class="line">      raise e
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-35">
-      <div class="info">
-        Extracted source (around line <strong>#317</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>315</span>
-<span>316</span>
-<span>317</span>
-<span>318</span>
-<span>319</span>
-<span>320</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      end
-</div><div class="line">
-</div><div class="line active">      <span class="error_highlight">call_app!</span>
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    def mock_request_call
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-36">
-      <div class="info">
-        Extracted source (around line <strong>#189</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>187</span>
-<span>188</span>
-<span>189</span>
-<span>190</span>
-<span>191</span>
-<span>192</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      @env[&#39;omniauth.strategy&#39;] = self if on_auth_path?
-</div><div class="line">
-</div><div class="line active">      return <span class="error_highlight">mock_call!</span>(env) if OmniAuth.config.test_mode
-</div><div class="line">
-</div><div class="line">      begin
-</div><div class="line">        return options_call if on_auth_path? &amp;&amp; options_request?
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-37">
-      <div class="info">
-        Extracted source (around line <strong>#169</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>167</span>
-<span>168</span>
-<span>169</span>
-<span>170</span>
-<span>171</span>
-<span>172</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    # @param [Hash] The Rack environment.
-</div><div class="line">    def call(env)
-</div><div class="line active">      dup<span class="error_highlight">.call!</span>(env)
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    # The logic for dispatching any additional actions that need
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-38">
-      <div class="info">
-        Extracted source (around line <strong>#36</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>34</span>
-<span>35</span>
-<span>36</span>
-<span>37</span>
-<span>38</span>
-<span>39</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      result = catch(:warden) do
-</div><div class="line">        env[&#39;warden&#39;].on_request
-</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      result ||= {}
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-39">
-      <div class="info">
-        Extracted source (around line <strong>#34</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-<span>36</span>
-<span>37</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      env[&#39;warden&#39;] = Proxy.new(env, self)
-</div><div class="line active">      result = <span class="error_highlight">catch</span>(:warden) do
-</div><div class="line">        env[&#39;warden&#39;].on_request
-</div><div class="line">        @app.call(env)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-40">
-      <div class="info">
-        Extracted source (around line <strong>#34</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-<span>36</span>
-<span>37</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      env[&#39;warden&#39;] = Proxy.new(env, self)
-</div><div class="line active">      result = <span class="error_highlight">catch</span>(:warden) do
-</div><div class="line">        env[&#39;warden&#39;].on_request
-</div><div class="line">        @app.call(env)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-41">
-      <div class="info">
-        Extracted source (around line <strong>#20</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>18</span>
-<span>19</span>
-<span>20</span>
-<span>21</span>
-<span>22</span>
-<span>23</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      begin
-</div><div class="line active">        _, _, body = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      rescue Exception
-</div><div class="line">        env[RACK_TEMPFILES]&amp;.each(&amp;:close!)
-</div><div class="line">        raise
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-42">
-      <div class="info">
-        Extracted source (around line <strong>#29</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      status, headers, body = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">      if etag_status?(status) &amp;&amp; body.respond_to?(:to_ary) &amp;&amp; !skip_caching?(headers)
-</div><div class="line">        body = body.to_ary
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-43">
-      <div class="info">
-        Extracted source (around line <strong>#44</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>42</span>
-<span>43</span>
-<span>44</span>
-<span>45</span>
-<span>46</span>
-<span>47</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        response
-</div><div class="line">      else
-</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      end
-</div><div class="line">    end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-44">
-      <div class="info">
-        Extracted source (around line <strong>#15</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>13</span>
-<span>14</span>
-<span>15</span>
-<span>16</span>
-<span>17</span>
-<span>18</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      _, _, body = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">      if env[REQUEST_METHOD] == HEAD
-</div><div class="line">        body.close if body.respond_to?(:close)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-45">
-      <div class="info">
-        Extracted source (around line <strong>#38</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>36</span>
-<span>37</span>
-<span>38</span>
-<span>39</span>
-<span>40</span>
-<span>41</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      def call(env)
-</div><div class="line active">        _, headers, _ = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">        return response if policy_present?(headers)
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-46">
-      <div class="info">
-        Extracted source (around line <strong>#38</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>36</span>
-<span>37</span>
-<span>38</span>
-<span>39</span>
-<span>40</span>
-<span>41</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      def call(env)
-</div><div class="line active">        status, headers, _ = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">        # Returning CSP headers with a 304 Not Modified is harmful, since nonces in the
-</div><div class="line">        # new CSP headers might not match nonces in the cached HTML.
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-47">
-      <div class="info">
-        Extracted source (around line <strong>#274</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>272</span>
-<span>273</span>
-<span>274</span>
-<span>275</span>
-<span>276</span>
-<span>277</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          req = make_request env
-</div><div class="line">          prepare_session(req)
-</div><div class="line active">          status, headers, body = app<span class="error_highlight">.call</span>(req.env)
-</div><div class="line">          res = Rack::Response::Raw.new status, headers
-</div><div class="line">          commit_session(req, res)
-</div><div class="line">          [status, headers, body]
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-48">
-      <div class="info">
-        Extracted source (around line <strong>#268</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>266</span>
-<span>267</span>
-<span>268</span>
-<span>269</span>
-<span>270</span>
-<span>271</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">        def call(env)
-</div><div class="line active">          <span class="error_highlight">context</span>(env)
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        def context(env, app = @app)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-49">
-      <div class="info">
-        Extracted source (around line <strong>#704</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>702</span>
-<span>703</span>
-<span>704</span>
-<span>705</span>
-<span>706</span>
-<span>707</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def call(env)
-</div><div class="line">      request = ActionDispatch::Request.new(env)
-</div><div class="line active">      response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">      if request.have_cookie_jar?
-</div><div class="line">        cookie_jar = request.cookie_jar
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-50">
-      <div class="info">
-        Extracted source (around line <strong>#674</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>672</span>
-<span>673</span>
-<span>674</span>
-<span>675</span>
-<span>676</span>
-<span>677</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        end
-</div><div class="line">
-</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-51">
-      <div class="info">
-        Extracted source (around line <strong>#31</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-<span>33</span>
-<span>34</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      error = nil
-</div><div class="line">      result = run_callbacks :call do
-</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      rescue =&gt; error
-</div><div class="line">      end
-</div><div class="line">      raise error if error
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-52">
-      <div class="info">
-        Extracted source (around line <strong>#101</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>99</span>
-<span>100</span>
-<span>101</span>
-<span>102</span>
-<span>103</span>
-<span>104</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      if callbacks.empty?
-</div><div class="line active">        yield if block_given?
-</div><div class="line">      else
-</div><div class="line">        env = Filters::Environment.new(self, false, nil)
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-53">
-      <div class="info">
-        Extracted source (around line <strong>#30</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-<span>33</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def call(env)
-</div><div class="line">      error = nil
-</div><div class="line active">      result = <span class="error_highlight">run_callbacks</span> :call do
-</div><div class="line">        @app.call(env)
-</div><div class="line">      rescue =&gt; error
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-54">
-      <div class="info">
-        Extracted source (around line <strong>#16</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>14</span>
-<span>15</span>
-<span>16</span>
-<span>17</span>
-<span>18</span>
-<span>19</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      state = @executor.run!(reset: true)
-</div><div class="line">      begin
-</div><div class="line active">        response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">        if env[&quot;action_dispatch.report_exception&quot;]
-</div><div class="line">          error = env[&quot;action_dispatch.exception&quot;]
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-55">
-      <div class="info">
-        Extracted source (around line <strong>#18</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>16</span>
-<span>17</span>
-<span>18</span>
-<span>19</span>
-<span>20</span>
-<span>21</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def call(env)
-</div><div class="line">      request = ActionDispatch::Request.new(env)
-</div><div class="line active">      return @app<span class="error_highlight">.call</span>(env) unless actionable_request?(request)
-</div><div class="line">
-</div><div class="line">      ActiveSupport::ActionableError.dispatch(request.params[:error].to_s.safe_constantize, request.params[:action])
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-56">
-      <div class="info">
-        Extracted source (around line <strong>#31</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-<span>33</span>
-<span>34</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      _, headers, body = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">      if headers[Constants::X_CASCADE] == &quot;pass&quot;
-</div><div class="line">        body.close if body.respond_to?(:close)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-57">
-      <div class="info">
-        Extracted source (around line <strong>#132</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>130</span>
-<span>131</span>
-<span>132</span>
-<span>133</span>
-<span>134</span>
-<span>135</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      def call_app(env)
-</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      rescue =&gt; e
-</div><div class="line">        throw :app_exception, e
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-58">
-      <div class="info">
-        Extracted source (around line <strong>#28</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">
-</div><div class="line active">        status, headers, body = <span class="error_highlight">call_app</span>(env)
-</div><div class="line">
-</div><div class="line">        if (session = Session.from(Thread.current)) &amp;&amp; acceptable_content_type?(headers)
-</div><div class="line">          headers[&quot;x-web-console-session-id&quot;] = session.id
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-59">
-      <div class="info">
-        Extracted source (around line <strong>#17</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>15</span>
-<span>16</span>
-<span>17</span>
-<span>18</span>
-<span>19</span>
-<span>20</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      app_exception = <span class="error_highlight">catch</span> :app_exception do
-</div><div class="line">        request = create_regular_or_whiny_request(env)
-</div><div class="line">        return call_app(env) unless request.permitted?
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-60">
-      <div class="info">
-        Extracted source (around line <strong>#17</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>15</span>
-<span>16</span>
-<span>17</span>
-<span>18</span>
-<span>19</span>
-<span>20</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      app_exception = <span class="error_highlight">catch</span> :app_exception do
-</div><div class="line">        request = create_regular_or_whiny_request(env)
-</div><div class="line">        return call_app(env) unless request.permitted?
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-61">
-      <div class="info">
-        Extracted source (around line <strong>#32</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>30</span>
-<span>31</span>
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">    rescue Exception =&gt; exception
-</div><div class="line">      request = ActionDispatch::Request.new env
-</div><div class="line">      backtrace_cleaner = request.get_header(&quot;action_dispatch.backtrace_cleaner&quot;)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-62">
-      <div class="info">
-        Extracted source (around line <strong>#41</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>39</span>
-<span>40</span>
-<span>41</span>
-<span>42</span>
-<span>43</span>
-<span>44</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">          logger.info { started_request_message(request) }
-</div><div class="line active">          status, headers, body = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">          body = ::Rack::BodyProxy.new(body) { finish_request_instrumentation(handle, logger_tag_pop_count) }
-</div><div class="line">
-</div><div class="line">          if response.frozen?
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-63">
-      <div class="info">
-        Extracted source (around line <strong>#29</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        end
-</div><div class="line">
-</div><div class="line active">        <span class="error_highlight">call_app</span>(request, env)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-64">
-      <div class="info">
-        Extracted source (around line <strong>#17</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>15</span>
-<span>16</span>
-<span>17</span>
-<span>18</span>
-<span>19</span>
-<span>20</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          ::Rails.logger.silence { @app.call(env) }
-</div><div class="line">        else
-</div><div class="line active">          @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">        end
-</div><div class="line">      end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-65">
-      <div class="info">
-        Extracted source (around line <strong>#96</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>94</span>
-<span>95</span>
-<span>96</span>
-<span>97</span>
-<span>98</span>
-<span>99</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      req = ActionDispatch::Request.new env
-</div><div class="line">      req.remote_ip = GetIp.new(req, check_ip, proxies)
-</div><div class="line active">      @app<span class="error_highlight">.call</span>(req.env)
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    # The GetIp class exists as a way to defer processing of the request data into
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-66">
-      <div class="info">
-        Extracted source (around line <strong>#33</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>31</span>
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-<span>36</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      req = ActionDispatch::Request.new env
-</div><div class="line">      req.request_id = make_request_id(req.headers[@header])
-</div><div class="line active">      @app<span class="error_highlight">.call</span>(env).tap { |_status, headers, _body| headers[@header] = req.request_id }
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-67">
-      <div class="info">
-        Extracted source (around line <strong>#28</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      end
-</div><div class="line">
-</div><div class="line active">      @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    def method_override(env)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-68">
-      <div class="info">
-        Extracted source (around line <strong>#24</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>22</span>
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def call(env)
-</div><div class="line">      start_time = Utils.clock_time
-</div><div class="line active">      _, headers, _ = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">      request_time = Utils.clock_time - start_time
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-69">
-      <div class="info">
-        Extracted source (around line <strong>#29</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          def call(env)
-</div><div class="line">            LocalCacheRegistry.set_cache_for(local_cache_key, LocalStore.new)
-</div><div class="line active">            response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">            response[2] = ::Rack::BodyProxy.new(response[2]) do
-</div><div class="line">              LocalCacheRegistry.set_cache_for(local_cache_key, nil)
-</div><div class="line">            end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-70">
-      <div class="info">
-        Extracted source (around line <strong>#61</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>59</span>
-<span>60</span>
-<span>61</span>
-<span>62</span>
-<span>63</span>
-<span>64</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      response = nil
-</div><div class="line">      events = @subscriber.collect_events do
-</div><div class="line active">        response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      headers = response[1]
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-71">
-      <div class="info">
-        Extracted source (around line <strong>#26</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        events = []
-</div><div class="line">        ActiveSupport::IsolatedExecutionState[KEY] = events
-</div><div class="line active">        yield
-</div><div class="line">        events
-</div><div class="line">      ensure
-</div><div class="line">        ActiveSupport::IsolatedExecutionState.delete(KEY)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-72">
-      <div class="info">
-        Extracted source (around line <strong>#60</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>58</span>
-<span>59</span>
-<span>60</span>
-<span>61</span>
-<span>62</span>
-<span>63</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def call(env)
-</div><div class="line">      response = nil
-</div><div class="line active">      events = @subscriber<span class="error_highlight">.collect_events</span> do
-</div><div class="line">        response = @app.call(env)
-</div><div class="line">      end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-73">
-      <div class="info">
-        Extracted source (around line <strong>#16</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>14</span>
-<span>15</span>
-<span>16</span>
-<span>17</span>
-<span>18</span>
-<span>19</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      state = @executor.run!(reset: true)
-</div><div class="line">      begin
-</div><div class="line active">        response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">        if env[&quot;action_dispatch.report_exception&quot;]
-</div><div class="line">          error = env[&quot;action_dispatch.exception&quot;]
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-74">
-      <div class="info">
-        Extracted source (around line <strong>#27</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      @file_handler.attempt(env) || @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">    end
-</div><div class="line">  end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-75">
-      <div class="info">
-        Extracted source (around line <strong>#131</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>129</span>
-<span>130</span>
-<span>131</span>
-<span>132</span>
-<span>133</span>
-<span>134</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def call(env)
-</div><div class="line active">      _, headers, body = response = @app<span class="error_highlight">.call</span>(env)
-</div><div class="line">
-</div><div class="line">      if body.respond_to?(:to_path)
-</div><div class="line">        case type = variation(env)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-76">
-      <div class="info">
-        Extracted source (around line <strong>#535</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>533</span>
-<span>534</span>
-<span>535</span>
-<span>536</span>
-<span>537</span>
-<span>538</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    def call(env)
-</div><div class="line">      req = build_request env
-</div><div class="line active">      app<span class="error_highlight">.call</span> req.env
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    # Defines additional Rack env configuration that is added on each call.
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-77">
-      <div class="info">
-        Extracted source (around line <strong>#360</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>358</span>
-<span>359</span>
-<span>360</span>
-<span>361</span>
-<span>362</span>
-<span>363</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        env[&#39;HTTP_COOKIE&#39;] ||= cookie_jar.for(uri)
-</div><div class="line">        @last_request = Rack::Request.new(env)
-</div><div class="line active">        status, headers, body = @app<span class="error_highlight">.call</span>(env).to_a
-</div><div class="line">
-</div><div class="line">        @last_response = MockResponse.new(status, headers, body, env[&#39;rack.errors&#39;].flush)
-</div><div class="line">        close_body(body)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-78">
-      <div class="info">
-        Extracted source (around line <strong>#153</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>151</span>
-<span>152</span>
-<span>153</span>
-<span>154</span>
-<span>155</span>
-<span>156</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        uri = parse_uri(uri, env)
-</div><div class="line">        env = env_for(uri, env)
-</div><div class="line active">        <span class="error_highlight">process_request</span>(uri, env, &amp;block)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      # Issue a request using the given HTTP verb for the given URI, with optional
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-79">
-      <div class="info">
-        Extracted source (around line <strong>#287</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>285</span>
-<span>286</span>
-<span>287</span>
-<span>288</span>
-<span>289</span>
-<span>290</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        # NOTE: rack-test v0.5 doesn&#39;t build a default uri correctly Make sure requested
-</div><div class="line">        # path is always a full URI.
-</div><div class="line active">        session<span class="error_highlight">.request</span>(build_full_uri(path, request_env), request_env)
-</div><div class="line">
-</div><div class="line">        @request_count += 1
-</div><div class="line">        @request = ActionDispatch::Request.new(session.last_request.env)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-80">
-      <div class="info">
-        Extracted source (around line <strong>#25</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # ActionDispatch::Integration::Session#process for more details.
-</div><div class="line">      def post(path, **args)
-</div><div class="line active">        <span class="error_highlight">process</span>(:post, path, **args)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      # Performs a PATCH request with the given parameters. See
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-81">
-      <div class="info">
-        Extracted source (around line <strong>#378</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>376</span>
-<span>377</span>
-<span>378</span>
-<span>379</span>
-<span>380</span>
-<span>381</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            #{reset_html_document}
-</div><div class="line">
-</div><div class="line active">            result = integration_session.#{method}(...)
-</div><div class="line">            copy_session_variables!
-</div><div class="line">            result
-</div><div class="line">          end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-82">
-      <div class="info">
-        Extracted source (around line <strong>#40</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>38</span>
-<span>39</span>
-<span>40</span>
-<span>41</span>
-<span>42</span>
-<span>43</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      it &quot;投稿が作成されること&quot; do
-</div><div class="line">        expect {
-</div><div class="line active">          <span class="error_highlight">post</span> posts_path, params: post_params
-</div><div class="line">        }.to change(Post, :count).by(1)
-</div><div class="line">      rescue RSpec::Expectations::ExpectationNotMetError =&gt; e
-</div><div class="line">        puts &quot;Response Status: #{response.status}&quot;
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-83">
-      <div class="info">
-        Extracted source (around line <strong>#395</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>393</span>
-<span>394</span>
-<span>395</span>
-<span>396</span>
-<span>397</span>
-<span>398</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">          return false unless Proc === event_proc
-</div><div class="line active">          event_proc<span class="error_highlight">.call</span>
-</div><div class="line">
-</div><div class="line">          @actual_after = evaluate_value_proc
-</div><div class="line">          @actual_hash = @actual_after.hash
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-84">
-      <div class="info">
-        Extracted source (around line <strong>#146</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>144</span>
-<span>145</span>
-<span>146</span>
-<span>147</span>
-<span>148</span>
-<span>149</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        def matches?(event_proc)
-</div><div class="line">          @event_proc = event_proc
-</div><div class="line active">          @change_details<span class="error_highlight">.perform_change</span>(event_proc) &amp;&amp; @comparer.call(@change_details.actual_delta)
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        # @private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-85">
-      <div class="info">
-        Extracted source (around line <strong>#50</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>48</span>
-<span>49</span>
-<span>50</span>
-<span>51</span>
-<span>52</span>
-<span>53</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          return ::RSpec::Matchers::BuiltIn::PositiveOperatorMatcher.new(actual) unless initial_matcher
-</div><div class="line">
-</div><div class="line active">          match_result = matcher<span class="error_highlight">.matches?</span>(actual, &amp;block)
-</div><div class="line">          if custom_message &amp;&amp; match_result.respond_to?(:error_generator)
-</div><div class="line">            match_result.error_generator.opts[:message] = custom_message
-</div><div class="line">          end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-86">
-      <div class="info">
-        Extracted source (around line <strong>#26</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        check_message(message)
-</div><div class="line">        matcher = modern_matcher_from(matcher)
-</div><div class="line active">        yield matcher
-</div><div class="line">      ensure
-</div><div class="line">        ::RSpec::Matchers.last_expectation_handler = handler
-</div><div class="line">        ::RSpec::Matchers.last_matcher = matcher
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-87">
-      <div class="info">
-        Extracted source (around line <strong>#47</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>45</span>
-<span>46</span>
-<span>47</span>
-<span>48</span>
-<span>49</span>
-<span>50</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">    class PositiveExpectationHandler
-</div><div class="line">      def self.handle_matcher(actual, initial_matcher, custom_message=nil, &amp;block)
-</div><div class="line active">        ExpectationHelper<span class="error_highlight">.with_matcher</span>(self, initial_matcher, custom_message) do |matcher|
-</div><div class="line">          return ::RSpec::Matchers::BuiltIn::PositiveOperatorMatcher.new(actual) unless initial_matcher
-</div><div class="line">
-</div><div class="line">          match_result = matcher.matches?(actual, &amp;block)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-88">
-      <div class="info">
-        Extracted source (around line <strong>#65</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>63</span>
-<span>64</span>
-<span>65</span>
-<span>66</span>
-<span>67</span>
-<span>68</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        def to(matcher=nil, message=nil, &amp;block)
-</div><div class="line">          prevent_operator_matchers(:to) unless matcher
-</div><div class="line active">          RSpec::Expectations::PositiveExpectationHandler<span class="error_highlight">.handle_matcher</span>(target, matcher, message, &amp;block)
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        # Runs the given expectation, passing if `matcher` returns false.
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-89">
-      <div class="info">
-        Extracted source (around line <strong>#139</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>137</span>
-<span>138</span>
-<span>139</span>
-<span>140</span>
-<span>141</span>
-<span>142</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def to(matcher, message=nil, &amp;block)
-</div><div class="line">        enforce_block_expectation(matcher)
-</div><div class="line active">        super
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">      def not_to(matcher, message=nil, &amp;block)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-90">
-      <div class="info">
-        Extracted source (around line <strong>#41</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>39</span>
-<span>40</span>
-<span>41</span>
-<span>42</span>
-<span>43</span>
-<span>44</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        expect {
-</div><div class="line">          post posts_path, params: post_params
-</div><div class="line active">        }<span class="error_highlight">.to</span> change(Post, :count).by(1)
-</div><div class="line">      rescue RSpec::Expectations::ExpectationNotMetError =&gt; e
-</div><div class="line">        puts &quot;Response Status: #{response.status}&quot;
-</div><div class="line">        puts &quot;Response Body: #{response.body}&quot;
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-91">
-      <div class="info">
-        Extracted source (around line <strong>#263</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>261</span>
-<span>262</span>
-<span>263</span>
-<span>264</span>
-<span>265</span>
-<span>266</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">                run_before_example
-</div><div class="line">                RSpec.current_scope = :example
-</div><div class="line active">                @example_group_instance<span class="error_highlight">.instance_exec</span>(self, &amp;@example_block)
-</div><div class="line">
-</div><div class="line">                if pending?
-</div><div class="line">                  Pending.mark_fixed! self
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-92">
-      <div class="info">
-        Extracted source (around line <strong>#263</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>261</span>
-<span>262</span>
-<span>263</span>
-<span>264</span>
-<span>265</span>
-<span>266</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">                run_before_example
-</div><div class="line">                RSpec.current_scope = :example
-</div><div class="line active">                @example_group_instance<span class="error_highlight">.instance_exec</span>(self, &amp;@example_block)
-</div><div class="line">
-</div><div class="line">                if pending?
-</div><div class="line">                  Pending.mark_fixed! self
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-93">
-      <div class="info">
-        Extracted source (around line <strong>#511</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>509</span>
-<span>510</span>
-<span>511</span>
-<span>512</span>
-<span>513</span>
-<span>514</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        singleton_context_hooks_host = example_group_instance.singleton_class
-</div><div class="line">        singleton_context_hooks_host.run_before_context_hooks(example_group_instance)
-</div><div class="line active">        with_around_example_hooks { yield }
-</div><div class="line">      ensure
-</div><div class="line">        singleton_context_hooks_host.run_after_context_hooks(example_group_instance)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-94">
-      <div class="info">
-        Extracted source (around line <strong>#468</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>466</span>
-<span>467</span>
-<span>468</span>
-<span>469</span>
-<span>470</span>
-<span>471</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def with_around_example_hooks
-</div><div class="line">        RSpec.current_scope = :before_example_hook
-</div><div class="line active">        hooks.run(:around, :example, self) { yield }
-</div><div class="line">      rescue Support::AllExceptionsExceptOnesWeMustNotRescue =&gt; e
-</div><div class="line">        set_exception(e)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-95">
-      <div class="info">
-        Extracted source (around line <strong>#486</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>484</span>
-<span>485</span>
-<span>486</span>
-<span>487</span>
-<span>488</span>
-<span>489</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            when :before then run_example_hooks_for(example_or_group, :before, :reverse_each)
-</div><div class="line">            when :after  then run_example_hooks_for(example_or_group, :after,  :each)
-</div><div class="line active">            when :around then run_around_example_hooks_for(example_or_group) { yield }
-</div><div class="line">            end
-</div><div class="line">          end
-</div><div class="line">        end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-96">
-      <div class="info">
-        Extracted source (around line <strong>#626</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>624</span>
-<span>625</span>
-<span>626</span>
-<span>627</span>
-<span>628</span>
-<span>629</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          return yield if hooks.empty? # exit early to avoid the extra allocation cost of `Example::Procsy`
-</div><div class="line">
-</div><div class="line active">          initial_procsy = Example::Procsy.new(example) { yield }
-</div><div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
-</div><div class="line">            procsy.wrap { around_hook.execute_with(example, procsy) }
-</div><div class="line">          end.call
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-97">
-      <div class="info">
-        Extracted source (around line <strong>#352</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>350</span>
-<span>351</span>
-<span>352</span>
-<span>353</span>
-<span>354</span>
-<span>355</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        def call(*args, &amp;block)
-</div><div class="line">          @executed = true
-</div><div class="line active">          @proc<span class="error_highlight">.call</span>(*args, &amp;block)
-</div><div class="line">        end
-</div><div class="line">        alias run call
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-98">
-      <div class="info">
-        Extracted source (around line <strong>#75</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>73</span>
-<span>74</span>
-<span>75</span>
-<span>76</span>
-<span>77</span>
-<span>78</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        group.around do |example|
-</div><div class="line">          before_setup
-</div><div class="line active">          example<span class="error_highlight">.run</span>
-</div><div class="line">          after_teardown
-</div><div class="line">        end
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-99">
-      <div class="info">
-        Extracted source (around line <strong>#457</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>455</span>
-<span>456</span>
-<span>457</span>
-<span>458</span>
-<span>459</span>
-<span>460</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # @private
-</div><div class="line">      def instance_exec(*args, &amp;block)
-</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">    private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-100">
-      <div class="info">
-        Extracted source (around line <strong>#457</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>455</span>
-<span>456</span>
-<span>457</span>
-<span>458</span>
-<span>459</span>
-<span>460</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # @private
-</div><div class="line">      def instance_exec(*args, &amp;block)
-</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">    private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-101">
-      <div class="info">
-        Extracted source (around line <strong>#390</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>388</span>
-<span>389</span>
-<span>390</span>
-<span>391</span>
-<span>392</span>
-<span>393</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      class AroundHook &lt; Hook
-</div><div class="line">        def execute_with(example, procsy)
-</div><div class="line active">          example<span class="error_highlight">.instance_exec</span>(procsy, &amp;block)
-</div><div class="line">          return if procsy.executed?
-</div><div class="line">          Pending.mark_skipped!(example,
-</div><div class="line">                                &quot;#{hook_description} did not execute the example&quot;)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-102">
-      <div class="info">
-        Extracted source (around line <strong>#628</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>626</span>
-<span>627</span>
-<span>628</span>
-<span>629</span>
-<span>630</span>
-<span>631</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          initial_procsy = Example::Procsy.new(example) { yield }
-</div><div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
-</div><div class="line active">            procsy.wrap { around_hook<span class="error_highlight">.execute_with</span>(example, procsy) }
-</div><div class="line">          end.call
-</div><div class="line">        end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-103">
-      <div class="info">
-        Extracted source (around line <strong>#352</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>350</span>
-<span>351</span>
-<span>352</span>
-<span>353</span>
-<span>354</span>
-<span>355</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        def call(*args, &amp;block)
-</div><div class="line">          @executed = true
-</div><div class="line active">          @proc<span class="error_highlight">.call</span>(*args, &amp;block)
-</div><div class="line">        end
-</div><div class="line">        alias run call
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-104">
-      <div class="info">
-        Extracted source (around line <strong>#39</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>37</span>
-<span>38</span>
-<span>39</span>
-<span>40</span>
-<span>41</span>
-<span>42</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">  config.around(:each) do |example|
-</div><div class="line active">    example<span class="error_highlight">.run</span>
-</div><div class="line">    WebMock.reset!
-</div><div class="line">  end
-</div><div class="line">}
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-105">
-      <div class="info">
-        Extracted source (around line <strong>#457</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>455</span>
-<span>456</span>
-<span>457</span>
-<span>458</span>
-<span>459</span>
-<span>460</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # @private
-</div><div class="line">      def instance_exec(*args, &amp;block)
-</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">    private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-106">
-      <div class="info">
-        Extracted source (around line <strong>#457</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>455</span>
-<span>456</span>
-<span>457</span>
-<span>458</span>
-<span>459</span>
-<span>460</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # @private
-</div><div class="line">      def instance_exec(*args, &amp;block)
-</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
-</div><div class="line">      end
-</div><div class="line">
-</div><div class="line">    private
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-107">
-      <div class="info">
-        Extracted source (around line <strong>#390</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>388</span>
-<span>389</span>
-<span>390</span>
-<span>391</span>
-<span>392</span>
-<span>393</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      class AroundHook &lt; Hook
-</div><div class="line">        def execute_with(example, procsy)
-</div><div class="line active">          example<span class="error_highlight">.instance_exec</span>(procsy, &amp;block)
-</div><div class="line">          return if procsy.executed?
-</div><div class="line">          Pending.mark_skipped!(example,
-</div><div class="line">                                &quot;#{hook_description} did not execute the example&quot;)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-108">
-      <div class="info">
-        Extracted source (around line <strong>#628</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>626</span>
-<span>627</span>
-<span>628</span>
-<span>629</span>
-<span>630</span>
-<span>631</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          initial_procsy = Example::Procsy.new(example) { yield }
-</div><div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
-</div><div class="line active">            procsy.wrap { around_hook<span class="error_highlight">.execute_with</span>(example, procsy) }
-</div><div class="line">          end.call
-</div><div class="line">        end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-109">
-      <div class="info">
-        Extracted source (around line <strong>#352</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>350</span>
-<span>351</span>
-<span>352</span>
-<span>353</span>
-<span>354</span>
-<span>355</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        def call(*args, &amp;block)
-</div><div class="line">          @executed = true
-</div><div class="line active">          @proc<span class="error_highlight">.call</span>(*args, &amp;block)
-</div><div class="line">        end
-</div><div class="line">        alias run call
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-110">
-      <div class="info">
-        Extracted source (around line <strong>#629</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>627</span>
-<span>628</span>
-<span>629</span>
-<span>630</span>
-<span>631</span>
-<span>632</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
-</div><div class="line">            procsy.wrap { around_hook.execute_with(example, procsy) }
-</div><div class="line active">          end<span class="error_highlight">.call</span>
-</div><div class="line">        end
-</div><div class="line">
-</div><div class="line">        if respond_to?(:singleton_class) &amp;&amp; singleton_class.ancestors.include?(singleton_class)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-111">
-      <div class="info">
-        Extracted source (around line <strong>#486</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>484</span>
-<span>485</span>
-<span>486</span>
-<span>487</span>
-<span>488</span>
-<span>489</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            when :before then run_example_hooks_for(example_or_group, :before, :reverse_each)
-</div><div class="line">            when :after  then run_example_hooks_for(example_or_group, :after,  :each)
-</div><div class="line active">            when :around then <span class="error_highlight">run_around_example_hooks_for</span>(example_or_group) { yield }
-</div><div class="line">            end
-</div><div class="line">          end
-</div><div class="line">        end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-112">
-      <div class="info">
-        Extracted source (around line <strong>#468</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>466</span>
-<span>467</span>
-<span>468</span>
-<span>469</span>
-<span>470</span>
-<span>471</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def with_around_example_hooks
-</div><div class="line">        RSpec.current_scope = :before_example_hook
-</div><div class="line active">        hooks<span class="error_highlight">.run</span>(:around, :example, self) { yield }
-</div><div class="line">      rescue Support::AllExceptionsExceptOnesWeMustNotRescue =&gt; e
-</div><div class="line">        set_exception(e)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-113">
-      <div class="info">
-        Extracted source (around line <strong>#511</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>509</span>
-<span>510</span>
-<span>511</span>
-<span>512</span>
-<span>513</span>
-<span>514</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        singleton_context_hooks_host = example_group_instance.singleton_class
-</div><div class="line">        singleton_context_hooks_host.run_before_context_hooks(example_group_instance)
-</div><div class="line active">        <span class="error_highlight">with_around_example_hooks</span> { yield }
-</div><div class="line">      ensure
-</div><div class="line">        singleton_context_hooks_host.run_after_context_hooks(example_group_instance)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-114">
-      <div class="info">
-        Extracted source (around line <strong>#259</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>257</span>
-<span>258</span>
-<span>259</span>
-<span>260</span>
-<span>261</span>
-<span>262</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            Pending.mark_pending! self, skip
-</div><div class="line">          elsif !RSpec.configuration.dry_run?
-</div><div class="line active">            <span class="error_highlight">with_around_and_singleton_context_hooks</span> do
-</div><div class="line">              begin
-</div><div class="line">                run_before_example
-</div><div class="line">                RSpec.current_scope = :example
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-115">
-      <div class="info">
-        Extracted source (around line <strong>#653</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>651</span>
-<span>652</span>
-<span>653</span>
-<span>654</span>
-<span>655</span>
-<span>656</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          instance = new(example.inspect_output)
-</div><div class="line">          set_ivars(instance, before_context_ivars)
-</div><div class="line active">          succeeded = example<span class="error_highlight">.run</span>(instance, reporter)
-</div><div class="line">          if !succeeded &amp;&amp; reporter.fail_fast_limit_met?
-</div><div class="line">            RSpec.world.wants_to_quit = true
-</div><div class="line">          end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-116">
-      <div class="info">
-        Extracted source (around line <strong>#649</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>647</span>
-<span>648</span>
-<span>649</span>
-<span>650</span>
-<span>651</span>
-<span>652</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # @private
-</div><div class="line">      def self.run_examples(reporter)
-</div><div class="line active">        ordering_strategy.order(filtered_examples)<span class="error_highlight">.map</span> do |example|
-</div><div class="line">          next if RSpec.world.wants_to_quit
-</div><div class="line">          instance = new(example.inspect_output)
-</div><div class="line">          set_ivars(instance, before_context_ivars)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-117">
-      <div class="info">
-        Extracted source (around line <strong>#649</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>647</span>
-<span>648</span>
-<span>649</span>
-<span>650</span>
-<span>651</span>
-<span>652</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      # @private
-</div><div class="line">      def self.run_examples(reporter)
-</div><div class="line active">        ordering_strategy.order(filtered_examples)<span class="error_highlight">.map</span> do |example|
-</div><div class="line">          next if RSpec.world.wants_to_quit
-</div><div class="line">          instance = new(example.inspect_output)
-</div><div class="line">          set_ivars(instance, before_context_ivars)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-118">
-      <div class="info">
-        Extracted source (around line <strong>#614</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>612</span>
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          RSpec.current_scope = :before_context_hook
-</div><div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line active">          result_for_this_group = <span class="error_highlight">run_examples</span>(reporter)
-</div><div class="line">          results_for_descendants = ordering_strategy.order(children).map { |child| child.run(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-119">
-      <div class="info">
-        Extracted source (around line <strong>#615</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-<span>618</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line">          result_for_this_group = run_examples(reporter)
-</div><div class="line active">          results_for_descendants = ordering_strategy.order(children).map { |child| child<span class="error_highlight">.run</span>(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-120">
-      <div class="info">
-        Extracted source (around line <strong>#615</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-<span>618</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line">          result_for_this_group = run_examples(reporter)
-</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-121">
-      <div class="info">
-        Extracted source (around line <strong>#615</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-<span>618</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line">          result_for_this_group = run_examples(reporter)
-</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-122">
-      <div class="info">
-        Extracted source (around line <strong>#615</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-<span>618</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line">          result_for_this_group = run_examples(reporter)
-</div><div class="line active">          results_for_descendants = ordering_strategy.order(children).map { |child| child<span class="error_highlight">.run</span>(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-123">
-      <div class="info">
-        Extracted source (around line <strong>#615</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-<span>618</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line">          result_for_this_group = run_examples(reporter)
-</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-124">
-      <div class="info">
-        Extracted source (around line <strong>#615</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>613</span>
-<span>614</span>
-<span>615</span>
-<span>616</span>
-<span>617</span>
-<span>618</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
-</div><div class="line">          result_for_this_group = run_examples(reporter)
-</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
-</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
-</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
-</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-125">
-      <div class="info">
-        Extracted source (around line <strong>#121</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>119</span>
-<span>120</span>
-<span>121</span>
-<span>122</span>
-<span>123</span>
-<span>124</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            end
-</div><div class="line">
-</div><div class="line active">            example_groups.map { |g| g<span class="error_highlight">.run</span>(reporter) }.all?
-</div><div class="line">          end
-</div><div class="line">        end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-126">
-      <div class="info">
-        Extracted source (around line <strong>#121</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>119</span>
-<span>120</span>
-<span>121</span>
-<span>122</span>
-<span>123</span>
-<span>124</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            end
-</div><div class="line">
-</div><div class="line active">            example_groups<span class="error_highlight">.map</span> { |g| g.run(reporter) }.all?
-</div><div class="line">          end
-</div><div class="line">        end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-127">
-      <div class="info">
-        Extracted source (around line <strong>#121</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>119</span>
-<span>120</span>
-<span>121</span>
-<span>122</span>
-<span>123</span>
-<span>124</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">            end
-</div><div class="line">
-</div><div class="line active">            example_groups<span class="error_highlight">.map</span> { |g| g.run(reporter) }.all?
-</div><div class="line">          end
-</div><div class="line">        end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-128">
-      <div class="info">
-        Extracted source (around line <strong>#2097</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>2095</span>
-<span>2096</span>
-<span>2097</span>
-<span>2098</span>
-<span>2099</span>
-<span>2100</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          RSpec.current_scope = :before_suite_hook
-</div><div class="line">          run_suite_hooks(&quot;a `before(:suite)` hook&quot;, @before_suite_hooks)
-</div><div class="line active">          yield
-</div><div class="line">        ensure
-</div><div class="line">          RSpec.current_scope = :after_suite_hook
-</div><div class="line">          run_suite_hooks(&quot;an `after(:suite)` hook&quot;, @after_suite_hooks)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-129">
-      <div class="info">
-        Extracted source (around line <strong>#116</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>114</span>
-<span>115</span>
-<span>116</span>
-<span>117</span>
-<span>118</span>
-<span>119</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        examples_count = @world.example_count(example_groups)
-</div><div class="line">        examples_passed = @configuration.reporter.report(examples_count) do |reporter|
-</div><div class="line active">          @configuration<span class="error_highlight">.with_suite_hooks</span> do
-</div><div class="line">            if examples_count == 0 &amp;&amp; @configuration.fail_if_no_examples
-</div><div class="line">              return @configuration.failure_exit_code
-</div><div class="line">            end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-130">
-      <div class="info">
-        Extracted source (around line <strong>#74</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>72</span>
-<span>73</span>
-<span>74</span>
-<span>75</span>
-<span>76</span>
-<span>77</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      start(expected_example_count)
-</div><div class="line">      begin
-</div><div class="line active">        yield self
-</div><div class="line">      ensure
-</div><div class="line">        finish
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-131">
-      <div class="info">
-        Extracted source (around line <strong>#115</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>113</span>
-<span>114</span>
-<span>115</span>
-<span>116</span>
-<span>117</span>
-<span>118</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def run_specs(example_groups)
-</div><div class="line">        examples_count = @world.example_count(example_groups)
-</div><div class="line active">        examples_passed = @configuration.reporter<span class="error_highlight">.report</span>(examples_count) do |reporter|
-</div><div class="line">          @configuration.with_suite_hooks do
-</div><div class="line">            if examples_count == 0 &amp;&amp; @configuration.fail_if_no_examples
-</div><div class="line">              return @configuration.failure_exit_code
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-132">
-      <div class="info">
-        Extracted source (around line <strong>#89</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>87</span>
-<span>88</span>
-<span>89</span>
-<span>90</span>
-<span>91</span>
-<span>92</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">        return @configuration.reporter.exit_early(exit_code) if RSpec.world.wants_to_quit
-</div><div class="line">
-</div><div class="line active">        <span class="error_highlight">run_specs</span>(@world.ordered_example_groups).tap do
-</div><div class="line">          persist_example_statuses
-</div><div class="line">        end
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-133">
-      <div class="info">
-        Extracted source (around line <strong>#71</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>69</span>
-<span>70</span>
-<span>71</span>
-<span>72</span>
-<span>73</span>
-<span>74</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">          options.options[:runner].call(options, err, out)
-</div><div class="line">        else
-</div><div class="line active">          new(options)<span class="error_highlight">.run</span>(err, out)
-</div><div class="line">        end
-</div><div class="line">      end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-134">
-      <div class="info">
-        Extracted source (around line <strong>#45</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>43</span>
-<span>44</span>
-<span>45</span>
-<span>46</span>
-<span>47</span>
-<span>48</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def self.invoke
-</div><div class="line">        disable_autorun!
-</div><div class="line active">        status = <span class="error_highlight">run</span>(ARGV, $stderr, $stdout).to_i
-</div><div class="line">        exit(status) if status != 0
-</div><div class="line">      end
-</div><div class="line">
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-135">
-      <div class="info">
-        Extracted source (around line <strong>#4</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>2</span>
-<span>3</span>
-<span>4</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">require &#39;rspec/core&#39;
-</div><div class="line active">RSpec::Core::Runner<span class="error_highlight">.invoke</span>
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-136">
-      <div class="info">
-        Extracted source (around line <strong>#25</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">if Gem.respond_to?(:activate_bin_path)
-</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;rspec-core&#39;, &#39;rspec&#39;, version)
-</div><div class="line">else
-</div><div class="line">gem &quot;rspec-core&quot;, version
-</div><div class="line">load Gem.bin_path(&quot;rspec-core&quot;, &quot;rspec&quot;, version)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-137">
-      <div class="info">
-        Extracted source (around line <strong>#25</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">if Gem.respond_to?(:activate_bin_path)
-</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;rspec-core&#39;, &#39;rspec&#39;, version)
-</div><div class="line">else
-</div><div class="line">gem &quot;rspec-core&quot;, version
-</div><div class="line">load Gem.bin_path(&quot;rspec-core&quot;, &quot;rspec&quot;, version)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-138">
-      <div class="info">
-        Extracted source (around line <strong>#58</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>56</span>
-<span>57</span>
-<span>58</span>
-<span>59</span>
-<span>60</span>
-<span>61</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      require_relative &quot;../setup&quot;
-</div><div class="line">      TRAPPED_SIGNALS.each {|s| trap(s, &quot;DEFAULT&quot;) }
-</div><div class="line active">      Kernel<span class="error_highlight">.load</span>(file)
-</div><div class="line">    rescue SystemExit, SignalException
-</div><div class="line">      raise
-</div><div class="line">    rescue Exception # rubocop:disable Lint/RescueException
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-139">
-      <div class="info">
-        Extracted source (around line <strong>#58</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>56</span>
-<span>57</span>
-<span>58</span>
-<span>59</span>
-<span>60</span>
-<span>61</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      require_relative &quot;../setup&quot;
-</div><div class="line">      TRAPPED_SIGNALS.each {|s| trap(s, &quot;DEFAULT&quot;) }
-</div><div class="line active">      Kernel<span class="error_highlight">.load</span>(file)
-</div><div class="line">    rescue SystemExit, SignalException
-</div><div class="line">      raise
-</div><div class="line">    rescue Exception # rubocop:disable Lint/RescueException
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-140">
-      <div class="info">
-        Extracted source (around line <strong>#23</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>21</span>
-<span>22</span>
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      if bin_path = Bundler.which(cmd)
-</div><div class="line">        if !Bundler.settings[:disable_exec_load] &amp;&amp; ruby_shebang?(bin_path)
-</div><div class="line active">          return <span class="error_highlight">kernel_load</span>(bin_path, *args)
-</div><div class="line">        end
-</div><div class="line">        kernel_exec(bin_path, *args)
-</div><div class="line">      else
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-141">
-      <div class="info">
-        Extracted source (around line <strong>#492</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>490</span>
-<span>491</span>
-<span>492</span>
-<span>493</span>
-<span>494</span>
-<span>495</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">      require_relative &quot;cli/exec&quot;
-</div><div class="line active">      Exec.new(options, args)<span class="error_highlight">.run</span>
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    map aliases_for(&quot;exec&quot;)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-142">
-      <div class="info">
-        Extracted source (around line <strong>#27</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      elsif public_method?(instance)
-</div><div class="line">        arity = instance.method(name).arity
-</div><div class="line active">        instance<span class="error_highlight">.__send__</span>(name, *args)
-</div><div class="line">      elsif local_method?(instance, :method_missing)
-</div><div class="line">        instance.__send__(:method_missing, name.to_sym, *args)
-</div><div class="line">      else
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-143">
-      <div class="info">
-        Extracted source (around line <strong>#127</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>125</span>
-<span>126</span>
-<span>127</span>
-<span>128</span>
-<span>129</span>
-<span>130</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      unless current.include?(command.name)
-</div><div class="line">        current &lt;&lt; command.name
-</div><div class="line active">        command<span class="error_highlight">.run</span>(self, *args)
-</div><div class="line">      end
-</div><div class="line">    end
-</div><div class="line">    alias_method :invoke_task, :invoke_command
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-144">
-      <div class="info">
-        Extracted source (around line <strong>#392</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>390</span>
-<span>391</span>
-<span>392</span>
-<span>393</span>
-<span>394</span>
-<span>395</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      args = instance.args
-</div><div class="line">      trailing = args[Range.new(arguments.size, -1)]
-</div><div class="line active">      instance<span class="error_highlight">.invoke_command</span>(command, trailing || [])
-</div><div class="line">    end
-</div><div class="line">
-</div><div class="line">    # The banner for this class. You can customize it if you are invoking the
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-145">
-      <div class="info">
-        Extracted source (around line <strong>#34</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>32</span>
-<span>33</span>
-<span>34</span>
-<span>35</span>
-<span>36</span>
-<span>37</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">    def self.dispatch(*)
-</div><div class="line active">      super do |i|
-</div><div class="line">        i.send(:print_command)
-</div><div class="line">        i.send(:warn_on_outdated_bundler)
-</div><div class="line">      end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-146">
-      <div class="info">
-        Extracted source (around line <strong>#485</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>483</span>
-<span>484</span>
-<span>485</span>
-<span>486</span>
-<span>487</span>
-<span>488</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      def start(given_args = ARGV, config = {})
-</div><div class="line">        config[:shell] ||= Bundler::Thor::Base.shell.new
-</div><div class="line active">        <span class="error_highlight">dispatch</span>(nil, given_args.dup, nil, config)
-</div><div class="line">      rescue Bundler::Thor::Error =&gt; e
-</div><div class="line">        config[:debug] || ENV[&quot;THOR_DEBUG&quot;] == &quot;1&quot; ? (raise e) : config[:shell].error(e.message)
-</div><div class="line">        exit(false) if exit_on_failure?
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-147">
-      <div class="info">
-        Extracted source (around line <strong>#28</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>26</span>
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">      check_deprecated_ext_option(ARGV) if ARGV.include?(&quot;--ext&quot;)
-</div><div class="line">
-</div><div class="line active">      super
-</div><div class="line">    ensure
-</div><div class="line">      Bundler::SharedHelpers.print_major_deprecations!
-</div><div class="line">    end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-148">
-      <div class="info">
-        Extracted source (around line <strong>#37</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>35</span>
-<span>36</span>
-<span>37</span>
-<span>38</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">  args = help_flag_used ? Bundler::CLI.reformatted_help_args(ARGV) : ARGV
-</div><div class="line">
-</div><div class="line active">  Bundler::CLI<span class="error_highlight">.start</span>(args, :debug =&gt; true)
-</div><div class="line">end
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-149">
-      <div class="info">
-        Extracted source (around line <strong>#117</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>115</span>
-<span>116</span>
-<span>117</span>
-<span>118</span>
-<span>119</span>
-<span>120</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">  def self.with_friendly_errors
-</div><div class="line">    FriendlyErrors.enable!
-</div><div class="line active">    yield
-</div><div class="line">  rescue SignalException
-</div><div class="line">    raise
-</div><div class="line">  rescue Exception =&gt; e # rubocop:disable Lint/RescueException
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-150">
-      <div class="info">
-        Extracted source (around line <strong>#29</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>27</span>
-<span>28</span>
-<span>29</span>
-<span>30</span>
-<span>31</span>
-<span>32</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">require &quot;bundler/friendly_errors&quot;
-</div><div class="line">
-</div><div class="line active">Bundler<span class="error_highlight">.with_friendly_errors</span> do
-</div><div class="line">  require &quot;bundler/cli&quot;
-</div><div class="line">
-</div><div class="line">  # Allow any command to use --help flag to show help for that command
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-151">
-      <div class="info">
-        Extracted source (around line <strong>#25</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">if Gem.respond_to?(:activate_bin_path)
-</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;bundler&#39;, &#39;bundle&#39;, version)
-</div><div class="line">else
-</div><div class="line">gem &quot;bundler&quot;, version
-</div><div class="line">load Gem.bin_path(&quot;bundler&quot;, &quot;bundle&quot;, version)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-    <div class="source hidden" id="frame-source-0-152">
-      <div class="info">
-        Extracted source (around line <strong>#25</strong>):
-      </div>
-      <div class="data">
-        <table cellpadding="0" cellspacing="0" class="lines">
-          <tr>
-            <td>
-              <pre class="line_numbers">
-<span>23</span>
-<span>24</span>
-<span>25</span>
-<span>26</span>
-<span>27</span>
-<span>28</span>
-              </pre>
-            </td>
-<td width="100%">
-<pre>
-<div class="line">
-</div><div class="line">if Gem.respond_to?(:activate_bin_path)
-</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;bundler&#39;, &#39;bundle&#39;, version)
-</div><div class="line">else
-</div><div class="line">gem &quot;bundler&quot;, version
-</div><div class="line">load Gem.bin_path(&quot;bundler&quot;, &quot;bundle&quot;, version)
-</div>
-</pre>
-</td>
-          </tr>
-        </table>
-      </div>
-    </div>
-<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb -->
-  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb -->
-<p><code>Rails.root: /rails</code></p>
-
-<div id="traces-0">
-    <a href="#" onclick="hide(&#39;Framework-Trace-0&#39;);hide(&#39;Full-Trace-0&#39;);show(&#39;Application-Trace-0&#39;);; return false;">Application Trace</a> |
-    <a href="#" onclick="hide(&#39;Application-Trace-0&#39;);hide(&#39;Full-Trace-0&#39;);show(&#39;Framework-Trace-0&#39;);; return false;">Framework Trace</a> |
-    <a href="#" onclick="hide(&#39;Application-Trace-0&#39;);hide(&#39;Framework-Trace-0&#39;);show(&#39;Full-Trace-0&#39;);; return false;">Full Trace</a> 
-
-    <div id="Application-Trace-0" style="display: none;">
-      <code class="traces">
-      </code>
-    </div>
-    <div id="Framework-Trace-0" style="display: none;">
-      <code class="traces">
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="0" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:314:in `handle_unverified_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="1" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:408:in `handle_unverified_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="2" href="#">
-            devise (4.9.4) lib/devise/controllers/helpers.rb:257:in `handle_unverified_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="3" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:397:in `verify_authenticity_token&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="4" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:362:in `block in make_lambda&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="5" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:179:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="6" href="#">
-            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in &lt;module:Callbacks&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="7" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:180:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="8" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `block in invoke_before&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="9" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `each&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="10" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `invoke_before&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="11" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:119:in `block in run_callbacks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="12" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:141:in `run_callbacks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="13" href="#">
-            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:260:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="14" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/rescue.rb:27:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="15" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:77:in `block in process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="16" href="#">
-            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `block in instrument&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="17" href="#">
-            activesupport (7.2.3) lib/active_support/notifications/instrumenter.rb:58:in `instrument&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="18" href="#">
-            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `instrument&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="19" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:76:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="20" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/params_wrapper.rb:259:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="21" href="#">
-            activerecord (7.2.3) lib/active_record/railties/controller_runtime.rb:39:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="22" href="#">
-            actionpack (7.2.3) lib/abstract_controller/base.rb:152:in `process&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="23" href="#">
-            actionview (7.2.3) lib/action_view/rendering.rb:40:in `process&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="24" href="#">
-            actionpack (7.2.3) lib/action_controller/metal.rb:252:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="25" href="#">
-            actionpack (7.2.3) lib/action_controller/metal.rb:335:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="26" href="#">
-            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="27" href="#">
-            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:50:in `serve&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="28" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:53:in `block in serve&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="29" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="30" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `each&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="31" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `find_routes&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="32" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:34:in `serve&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="33" href="#">
-            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:896:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="34" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:478:in `call_app!&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="35" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:317:in `mock_call!&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="36" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:189:in `call!&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="37" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:169:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="38" href="#">
-            warden (1.2.9) lib/warden/manager.rb:36:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="39" href="#">
-            warden (1.2.9) lib/warden/manager.rb:34:in `catch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="40" href="#">
-            warden (1.2.9) lib/warden/manager.rb:34:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="41" href="#">
-            rack (3.2.4) lib/rack/tempfile_reaper.rb:20:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="42" href="#">
-            rack (3.2.4) lib/rack/etag.rb:29:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="43" href="#">
-            rack (3.2.4) lib/rack/conditional_get.rb:44:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="44" href="#">
-            rack (3.2.4) lib/rack/head.rb:15:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="45" href="#">
-            actionpack (7.2.3) lib/action_dispatch/http/permissions_policy.rb:38:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="46" href="#">
-            actionpack (7.2.3) lib/action_dispatch/http/content_security_policy.rb:38:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="47" href="#">
-            rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="48" href="#">
-            rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="49" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/cookies.rb:704:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="50" href="#">
-            activerecord (7.2.3) lib/active_record/migration.rb:674:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="51" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="52" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:101:in `run_callbacks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="53" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:30:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="54" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="55" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="56" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="57" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="58" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="59" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="60" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:17:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="61" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="62" href="#">
-            railties (7.2.3) lib/rails/rack/logger.rb:41:in `call_app&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="63" href="#">
-            railties (7.2.3) lib/rails/rack/logger.rb:29:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="64" href="#">
-            sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="65" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="66" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/request_id.rb:33:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="67" href="#">
-            rack (3.2.4) lib/rack/method_override.rb:28:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="68" href="#">
-            rack (3.2.4) lib/rack/runtime.rb:24:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="69" href="#">
-            activesupport (7.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="70" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="71" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="72" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:60:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="73" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="74" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/static.rb:27:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="75" href="#">
-            rack (3.2.4) lib/rack/sendfile.rb:131:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="76" href="#">
-            railties (7.2.3) lib/rails/engine.rb:535:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="77" href="#">
-            rack-test (2.2.0) lib/rack/test.rb:360:in `process_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="78" href="#">
-            rack-test (2.2.0) lib/rack/test.rb:153:in `request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="79" href="#">
-            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:287:in `process&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="80" href="#">
-            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:25:in `post&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="81" href="#">
-            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:378:in `post&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="82" href="#">
-            spec/requests/posts_spec.rb:40:in `block (5 levels) in &lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="83" href="#">
-            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:395:in `perform_change&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="84" href="#">
-            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:146:in `matches?&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="85" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:50:in `block in handle_matcher&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="86" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:26:in `with_matcher&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="87" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:47:in `handle_matcher&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="88" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:65:in `to&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="89" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:139:in `to&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="90" href="#">
-            spec/requests/posts_spec.rb:39:in `block (4 levels) in &lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="91" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="92" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="93" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `block in with_around_and_singleton_context_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="94" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `block in with_around_example_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="95" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="96" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:626:in `block in run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="97" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="98" href="#">
-            rspec-rails (8.0.2) lib/rspec/rails/adapters.rb:75:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="99" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="100" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="101" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="102" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="103" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="104" href="#">
-            webmock (3.26.1) lib/webmock/rspec.rb:39:in `block (2 levels) in &lt;main&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="105" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="106" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="107" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="108" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="109" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="110" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:629:in `run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="111" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="112" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `with_around_example_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="113" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `with_around_and_singleton_context_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="114" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:259:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="115" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:653:in `block in run_examples&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="116" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="117" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `run_examples&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="118" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:614:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="119" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="120" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="121" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="122" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="123" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="124" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="125" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (3 levels) in run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="126" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="127" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (2 levels) in run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="128" href="#">
-            rspec-core (3.13.6) lib/rspec/core/configuration.rb:2097:in `with_suite_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="129" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:116:in `block in run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="130" href="#">
-            rspec-core (3.13.6) lib/rspec/core/reporter.rb:74:in `report&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="131" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:115:in `run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="132" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:89:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="133" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:71:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="134" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:45:in `invoke&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="135" href="#">
-            rspec-core (3.13.6) exe/rspec:4:in `&lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="136" href="#">
-            /usr/local/bundle/bin/rspec:25:in `load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="137" href="#">
-            /usr/local/bundle/bin/rspec:25:in `&lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="138" href="#">
-            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="139" href="#">
-            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `kernel_load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="140" href="#">
-            bundler (2.4.20) lib/bundler/cli/exec.rb:23:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="141" href="#">
-            bundler (2.4.20) lib/bundler/cli.rb:492:in `exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="142" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="143" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in `invoke_command&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="144" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor.rb:392:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="145" href="#">
-            bundler (2.4.20) lib/bundler/cli.rb:34:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="146" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/base.rb:485:in `start&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="147" href="#">
-            bundler (2.4.20) lib/bundler/cli.rb:28:in `start&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="148" href="#">
-            bundler (2.4.20) exe/bundle:37:in `block in &lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="149" href="#">
-            bundler (2.4.20) lib/bundler/friendly_errors.rb:117:in `with_friendly_errors&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="150" href="#">
-            bundler (2.4.20) exe/bundle:29:in `&lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="151" href="#">
-            /usr/local/bundle/bin/bundle:25:in `load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="152" href="#">
-            /usr/local/bundle/bin/bundle:25:in `&lt;main&gt;&#39;
-          </a>
-          <br>
-      </code>
-    </div>
-    <div id="Full-Trace-0" style="display: block;">
-      <code class="traces">
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="0" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:314:in `handle_unverified_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="1" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:408:in `handle_unverified_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="2" href="#">
-            devise (4.9.4) lib/devise/controllers/helpers.rb:257:in `handle_unverified_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="3" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:397:in `verify_authenticity_token&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="4" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:362:in `block in make_lambda&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="5" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:179:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="6" href="#">
-            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in &lt;module:Callbacks&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="7" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:180:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="8" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `block in invoke_before&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="9" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `each&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="10" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `invoke_before&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="11" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:119:in `block in run_callbacks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="12" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:141:in `run_callbacks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="13" href="#">
-            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:260:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="14" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/rescue.rb:27:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="15" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:77:in `block in process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="16" href="#">
-            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `block in instrument&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="17" href="#">
-            activesupport (7.2.3) lib/active_support/notifications/instrumenter.rb:58:in `instrument&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="18" href="#">
-            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `instrument&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="19" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:76:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="20" href="#">
-            actionpack (7.2.3) lib/action_controller/metal/params_wrapper.rb:259:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="21" href="#">
-            activerecord (7.2.3) lib/active_record/railties/controller_runtime.rb:39:in `process_action&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="22" href="#">
-            actionpack (7.2.3) lib/abstract_controller/base.rb:152:in `process&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="23" href="#">
-            actionview (7.2.3) lib/action_view/rendering.rb:40:in `process&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="24" href="#">
-            actionpack (7.2.3) lib/action_controller/metal.rb:252:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="25" href="#">
-            actionpack (7.2.3) lib/action_controller/metal.rb:335:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="26" href="#">
-            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="27" href="#">
-            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:50:in `serve&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="28" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:53:in `block in serve&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="29" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="30" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `each&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="31" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `find_routes&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="32" href="#">
-            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:34:in `serve&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="33" href="#">
-            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:896:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="34" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:478:in `call_app!&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="35" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:317:in `mock_call!&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="36" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:189:in `call!&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="37" href="#">
-            omniauth (2.1.4) lib/omniauth/strategy.rb:169:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="38" href="#">
-            warden (1.2.9) lib/warden/manager.rb:36:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="39" href="#">
-            warden (1.2.9) lib/warden/manager.rb:34:in `catch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="40" href="#">
-            warden (1.2.9) lib/warden/manager.rb:34:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="41" href="#">
-            rack (3.2.4) lib/rack/tempfile_reaper.rb:20:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="42" href="#">
-            rack (3.2.4) lib/rack/etag.rb:29:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="43" href="#">
-            rack (3.2.4) lib/rack/conditional_get.rb:44:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="44" href="#">
-            rack (3.2.4) lib/rack/head.rb:15:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="45" href="#">
-            actionpack (7.2.3) lib/action_dispatch/http/permissions_policy.rb:38:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="46" href="#">
-            actionpack (7.2.3) lib/action_dispatch/http/content_security_policy.rb:38:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="47" href="#">
-            rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="48" href="#">
-            rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="49" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/cookies.rb:704:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="50" href="#">
-            activerecord (7.2.3) lib/active_record/migration.rb:674:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="51" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="52" href="#">
-            activesupport (7.2.3) lib/active_support/callbacks.rb:101:in `run_callbacks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="53" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:30:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="54" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="55" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="56" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="57" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="58" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="59" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="60" href="#">
-            web-console (4.2.1) lib/web_console/middleware.rb:17:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="61" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="62" href="#">
-            railties (7.2.3) lib/rails/rack/logger.rb:41:in `call_app&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="63" href="#">
-            railties (7.2.3) lib/rails/rack/logger.rb:29:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="64" href="#">
-            sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="65" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="66" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/request_id.rb:33:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="67" href="#">
-            rack (3.2.4) lib/rack/method_override.rb:28:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="68" href="#">
-            rack (3.2.4) lib/rack/runtime.rb:24:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="69" href="#">
-            activesupport (7.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="70" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="71" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="72" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:60:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="73" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="74" href="#">
-            actionpack (7.2.3) lib/action_dispatch/middleware/static.rb:27:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="75" href="#">
-            rack (3.2.4) lib/rack/sendfile.rb:131:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="76" href="#">
-            railties (7.2.3) lib/rails/engine.rb:535:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="77" href="#">
-            rack-test (2.2.0) lib/rack/test.rb:360:in `process_request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="78" href="#">
-            rack-test (2.2.0) lib/rack/test.rb:153:in `request&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="79" href="#">
-            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:287:in `process&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="80" href="#">
-            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:25:in `post&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="81" href="#">
-            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:378:in `post&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="82" href="#">
-            spec/requests/posts_spec.rb:40:in `block (5 levels) in &lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="83" href="#">
-            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:395:in `perform_change&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="84" href="#">
-            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:146:in `matches?&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="85" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:50:in `block in handle_matcher&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="86" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:26:in `with_matcher&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="87" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:47:in `handle_matcher&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="88" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:65:in `to&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="89" href="#">
-            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:139:in `to&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="90" href="#">
-            spec/requests/posts_spec.rb:39:in `block (4 levels) in &lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="91" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="92" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="93" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `block in with_around_and_singleton_context_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="94" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `block in with_around_example_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="95" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="96" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:626:in `block in run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="97" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="98" href="#">
-            rspec-rails (8.0.2) lib/rspec/rails/adapters.rb:75:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="99" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="100" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="101" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="102" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="103" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="104" href="#">
-            webmock (3.26.1) lib/webmock/rspec.rb:39:in `block (2 levels) in &lt;main&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="105" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="106" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="107" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="108" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="109" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="110" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:629:in `run_around_example_hooks_for&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="111" href="#">
-            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="112" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `with_around_example_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="113" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `with_around_and_singleton_context_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="114" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example.rb:259:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="115" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:653:in `block in run_examples&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="116" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="117" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `run_examples&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="118" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:614:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="119" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="120" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="121" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="122" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="123" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="124" href="#">
-            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="125" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (3 levels) in run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="126" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `map&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="127" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (2 levels) in run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="128" href="#">
-            rspec-core (3.13.6) lib/rspec/core/configuration.rb:2097:in `with_suite_hooks&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="129" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:116:in `block in run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="130" href="#">
-            rspec-core (3.13.6) lib/rspec/core/reporter.rb:74:in `report&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="131" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:115:in `run_specs&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="132" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:89:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="133" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:71:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="134" href="#">
-            rspec-core (3.13.6) lib/rspec/core/runner.rb:45:in `invoke&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="135" href="#">
-            rspec-core (3.13.6) exe/rspec:4:in `&lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="136" href="#">
-            /usr/local/bundle/bin/rspec:25:in `load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="137" href="#">
-            /usr/local/bundle/bin/rspec:25:in `&lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="138" href="#">
-            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="139" href="#">
-            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `kernel_load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="140" href="#">
-            bundler (2.4.20) lib/bundler/cli/exec.rb:23:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="141" href="#">
-            bundler (2.4.20) lib/bundler/cli.rb:492:in `exec&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="142" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="143" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in `invoke_command&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="144" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor.rb:392:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="145" href="#">
-            bundler (2.4.20) lib/bundler/cli.rb:34:in `dispatch&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="146" href="#">
-            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/base.rb:485:in `start&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="147" href="#">
-            bundler (2.4.20) lib/bundler/cli.rb:28:in `start&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="148" href="#">
-            bundler (2.4.20) exe/bundle:37:in `block in &lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="149" href="#">
-            bundler (2.4.20) lib/bundler/friendly_errors.rb:117:in `with_friendly_errors&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="150" href="#">
-            bundler (2.4.20) exe/bundle:29:in `&lt;top (required)&gt;&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="151" href="#">
-            /usr/local/bundle/bin/bundle:25:in `load&#39;
-          </a>
-          <br>
-          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="152" href="#">
-            /usr/local/bundle/bin/bundle:25:in `&lt;main&gt;&#39;
-          </a>
-          <br>
-      </code>
-    </div>
-
-  <script>
-    (function() {
-      var traceFrames = document.getElementsByClassName('trace-frames-0');
-      var selectedFrame, currentSource = document.getElementById('frame-source-0-0');
-
-      // Add click listeners for all stack frames
-      for (var i = 0; i < traceFrames.length; i++) {
-        traceFrames[i].addEventListener('click', function(e) {
-          e.preventDefault();
-          var target = e.target;
-          var frame_id = target.dataset.frameId;
-
-          if (selectedFrame) {
-            selectedFrame.className = selectedFrame.className.replace("selected", "");
-          }
-
-          target.className += " selected";
-          selectedFrame = target;
-
-          // Change the extracted source code
-          changeSourceExtract(frame_id);
-        });
-
-        function changeSourceExtract(frame_id) {
-          var el = document.getElementById('frame-source-0-' + frame_id);
-          if (currentSource && el) {
-            currentSource.className += " hidden";
-            el.className = el.className.replace(" hidden", "");
-            currentSource = el;
-          }
-        }
-      }
-    })();
-  </script>
-</div>
-<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb -->
-
-
-
-  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb --><h2 class="request-heading">Request</h2>
-  <p><b>Parameters</b>:</p> <pre>{&quot;post&quot;=&gt;{&quot;body&quot;=&gt;&quot;新しい投稿&quot;, &quot;weather&quot;=&gt;&quot;sunny&quot;, &quot;feeling&quot;=&gt;&quot;great&quot;}}
-</pre>
-
-<div class="details">
-  <div class="summary"><a href="#" onclick="return toggleSessionDump()">Toggle session dump</a></div>
-  <div id="session_dump" class="hidden"><pre>session_id: &quot;4e8f21b80b22bdf8973c945a40df6333&quot;
-warden.user.user.key: [[133], &quot;$2a$12$vOmPqXBEr.Jv6l4FSsF7me&quot;]</pre></div>
-</div>
-
-<div class="details">
-  <div class="summary"><a href="#" onclick="return toggleEnvDump()">Toggle env dump</a></div>
-  <div id="env_dump" class="hidden"><pre>HTTP_ACCEPT: &quot;text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5&quot;
-ORIGINAL_SCRIPT_NAME: &quot;&quot;
-REMOTE_ADDR: &quot;127.0.0.1&quot;
-SERVER_NAME: &quot;www.example.com&quot;
-SERVER_PROTOCOL: &quot;HTTP/1.0&quot;</pre></div>
-</div>
-
-<h2 class="response-heading">Response</h2>
-<p><b>Headers</b>:</p> <pre>None</pre>
-<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb -->
-</main>
-<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb -->
-
-<!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/index.html.erb --><!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_markup.html.erb --><div id="console"
-  data-mount-point='/__web_console'
-  data-session-id='da80482e143713ffea6d1da6bb6addfd'
-  data-prompt-label='>> '>
-</div>
-<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_markup.html.erb -->
-
-<script type="text/javascript" data-template="console" nonce="">
-(function() {
-  /**
- * Constructor for command storage.
- * It uses localStorage if available. Otherwise fallback to normal JS array.
- */
-function CommandStorage() {
-  this.previousCommands = [];
-  var previousCommandOffset = 0;
-  var hasLocalStorage = typeof window.localStorage !== 'undefined';
-  var STORAGE_KEY = "web_console_previous_commands";
-  var MAX_STORAGE = 100;
-
-  if (hasLocalStorage) {
-    this.previousCommands = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
-    previousCommandOffset = this.previousCommands.length;
-  }
-
-  this.addCommand = function(command) {
-    previousCommandOffset = this.previousCommands.push(command);
-
-    if (previousCommandOffset > MAX_STORAGE) {
-      this.previousCommands.splice(0, 1);
-      previousCommandOffset = MAX_STORAGE;
-    }
-
-    if (hasLocalStorage) {
-      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.previousCommands));
-    }
-  };
-
-  this.navigate = function(offset) {
-    previousCommandOffset += offset;
-
-    if (previousCommandOffset < 0) {
-      previousCommandOffset = -1;
-      return null;
-    }
-
-    if (previousCommandOffset >= this.previousCommands.length) {
-      previousCommandOffset = this.previousCommands.length;
-      return null;
-    }
-
-    return this.previousCommands[previousCommandOffset];
-  }
-}
-
-function Autocomplete(_words, prefix) {
-  this.words = prepareWords(_words);
-  this.current = -1;
-  this.left = 0; // [left, right)
-  this.right = this.words.length;
-  this.confirmed = false;
-
-  function createSpan(label, className) {
-    var el = document.createElement('span');
-    addClass(el, className);
-    el.innerText = label;
-    return el;
-  }
-
-  function prepareWords(words) {
-    // convert into an object with priority and element
-    var res = new Array(words.length);
-    for (var i = 0, ind = 0; i < words.length; ++i) {
-      res[i] = new Array(words[i].length);
-      for (var j = 0; j < words[i].length; ++j) {
-        res[i][j] = {
-          word: words[i][j],
-          priority: i,
-          element: createSpan(words[i][j], 'trimmed keyword')
-        };
-      }
-    }
-    // flatten and sort by alphabetical order to refine incrementally
-    res = flatten(res);
-    res.sort(function(a, b) { return a.word == b.word ? 0 : (a.word < b.word ? -1 : 1); });
-    for (var i = 0; i < res.length; ++i) res[i].element.dataset.index = i;
-    return res;
-  }
-
-  this.view = document.createElement('pre');
-  addClass(this.view, 'auto-complete console-message');
-  this.view.appendChild(this.prefix = createSpan('...', 'trimmed keyword'));
-  this.view.appendChild(this.stage = document.createElement('span'));
-  this.elements = this.stage.children;
-  this.view.appendChild(this.suffix = createSpan('...', 'trimmed keyword'));
-
-  this.refine(prefix || '');
-}
-
-Autocomplete.prototype.getSelectedWord = function() {
-  return this.lastSelected && this.lastSelected.innerText;
-};
-
-Autocomplete.prototype.onFinished = function(callback) {
-  this.onFinishedCallback = callback;
-  if (this.confirmed) callback(this.confirmed);
-};
-
-Autocomplete.prototype.onKeyDown = function(ev) {
-  var self = this;
-  if (!this.elements.length) return;
-
-  function move(nextCurrent) {
-    if (self.lastSelected) removeClass(self.lastSelected, 'selected');
-    addClass(self.lastSelected = self.elements[nextCurrent], 'selected');
-    self.trim(self.current, true);
-    self.trim(nextCurrent, false);
-    self.current = nextCurrent;
-  }
-
-  switch (ev.keyCode) {
-    case 69:
-      if (ev.ctrlKey) {
-        move(this.current + 1 >= this.elements.length ? 0 : this.current + 1);
-        return true;
-      }
-      return false;
-    case 9: // Tab
-      if (ev.shiftKey) { // move back
-        move(this.current - 1 < 0 ? this.elements.length - 1 : this.current - 1);
-      } else { // move next
-        move(this.current + 1 >= this.elements.length ? 0 : this.current + 1);
-      }
-      return true;
-    case 13: // Enter
-      this.finish();
-      return true;
-    case 27: // Esc
-      this.cancel();
-      return true;
-    case 37: case 38: case 39: case 40: // disable using arrow keys on completing
-      return true;
-  }
-
-  return false;
-};
-
-Autocomplete.prototype.trim = function(from, needToTrim) {
-  var self = this;
-  var num = 5;
-
-  if (this.elements.length > num) {
-    (0 < from ? removeClass : addClass)(this.prefix, 'trimmed');
-    (from + num < this.elements.length ? removeClass : addClass)(this.suffix, 'trimmed');
-  } else {
-    addClass(this.prefix, 'trimmed');
-    addClass(this.suffix, 'trimmed');
-  }
-
-  function iterate(x) {
-    for (var i = 0; i < num; ++i, ++x) if (0 <= x && x < self.elements.length) {
-      toggleClass(self.elements[x], 'trimmed');
-    }
-  }
-
-  var toggleClass = needToTrim ? addClass : removeClass;
-  if (from < 0) {
-    iterate(0);
-  } else if (from + num - 1 >= this.elements.length) {
-    iterate(this.elements.length - num);
-  } else {
-    iterate(from);
-  }
-};
-
-Autocomplete.prototype.refine = function(prefix) {
-  if (this.confirmed) return;
-  var inc = !this.prev || (prefix.length >= this.prev.length);
-  this.prev = prefix;
-  var self = this;
-
-  function remove(parent, child) {
-    if (parent == child.parentNode) parent.removeChild(child);
-  }
-
-  function toggle(el) {
-    return inc ? remove(self.stage, el) : self.stage.appendChild(el);
-  }
-
-  function startsWith(str, prefix) {
-    return !prefix || str.substr(0, prefix.length) === prefix;
-  }
-
-  function moveRight(l, r) {
-    while (l < r && inc !== startsWith(self.words[l].word, prefix)) toggle(self.words[l++].element);
-    return l;
-  }
-
-  function moveLeft(l, r) {
-    while (l < r - 1 && inc !== startsWith(self.words[r-1].word, prefix)) toggle(self.words[--r].element);
-    return r;
-  }
-
-  self.trim(self.current, true); // reset trimming
-
-  // Refine the range of words having same prefix
-  if (inc) {
-    self.left = moveRight(self.left, self.right);
-    self.right = moveLeft(self.left, self.right);
-  } else {
-    self.left = moveLeft(-1, self.left);
-    self.right = moveRight(self.right, self.words.length);
-  }
-
-  // Render elements with sorting by scope groups
-  var words = this.words.slice(this.left, this.right);
-  words.sort(function(a, b) { return a.priority == b.priority ? (a.word < b.word ? -1 : 1) : (a.priority < b.priority ? -1 : 1); });
-  removeAllChildren(this.elements);
-  for (var i = 0; i < words.length; ++i) {
-    this.stage.appendChild(words[i].element);
-  }
-
-  // Keep a previous selected element if the refined range includes the element
-  if (this.lastSelected && this.left <= this.lastSelected.dataset.index && this.lastSelected.dataset.index < this.right) {
-    this.current = Array.prototype.indexOf.call(this.elements, this.lastSelected);
-    this.trim(this.current, false);
-  } else {
-    if (this.lastSelected) removeClass(this.lastSelected, 'selected');
-    this.lastSelected = null;
-    this.current = -1;
-    this.trim(0, false);
-  }
-
-  if (self.left + 1 == self.right) {
-    self.current = 0;
-    self.finish();
-  } else if (self.left == self.right) {
-    self.cancel();
-  }
-};
-
-Autocomplete.prototype.finish = function() {
-  if (0 <= this.current && this.current < this.elements.length) {
-    this.confirmed = this.elements[this.current].innerText;
-    if (this.onFinishedCallback) this.onFinishedCallback(this.confirmed);
-    this.removeView();
-  } else {
-    this.cancel();
-  }
-};
-
-Autocomplete.prototype.cancel = function() {
-  if (this.onFinishedCallback) this.onFinishedCallback();
-  this.removeView();
-};
-
-Autocomplete.prototype.removeView = function() {
-  if (this.view.parentNode) this.view.parentNode.removeChild(this.view);
-  removeAllChildren(this.view);
-}
-
-// HTML strings for dynamic elements.
-var consoleInnerHtml = `<!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_inner_console_markup.html.erb --><div class=\'resizer layer\'><\/div>\n<div class=\'console-outer layer\'>\n  <div class=\'console-actions\'>\n    <div class=\'close-button button\' title=\'close\'>x<\/div>\n  <\/div>\n  <div class=\'console-inner\'><\/div>\n<\/div>\n<input class=\'clipboard\' type=\'text\'>\n<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_inner_console_markup.html.erb -->`
-;
-var promptBoxHtml = `<!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_prompt_box_markup.html.erb --><span class=\'console-prompt-label\'><\/span>\n<pre class=\'console-prompt-display\'><\/pre>\n<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_prompt_box_markup.html.erb -->`
-;
-// CSS
-var consoleStyleCss = `.console .pos-absolute {\n  position: absolute;\n}\n\n.console .pos-fixed {\n  position: fixed;\n}\n\n.console .pos-right {\n  right: 0;\n}\n\n.console .border-box {\n  box-sizing: border-box;\n}\n\n.console .layer {\n  width: 100%;\n  height: 100%;\n}\n\n.console .layer.console-outer {\n  z-index: 1;\n}\n\n.console .layer.resizer {\n  z-index: 2;\n}\n\n.console {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 148px;\n  padding: 0;\n  margin: 0;\n  background: none repeat scroll 0% 0% #333;\n  z-index: 9999;\n}\n\n.console .console-outer {\n  overflow: auto;\n  padding-top: 4px;\n}\n\n.console .console-inner {\n  font-family: monospace;\n  font-size: 11px;\n  width: 100%;\n  height: 100%;\n  overflow: unset;\n  background: #333;\n}\n\n.console .console-prompt-box {\n  color: #fff;\n}\n\n.console .console-message {\n  color: #1ad027;\n  margin: 0;\n  border: 0;\n  white-space: pre-wrap;\n  background-color: #333;\n  padding: 0;\n}\n\n.console .console-message.error-message {\n  color: #fc9;\n}\n\n.console .console-message.notification-message {\n  color: #99f;\n}\n\n.console .console-message.auto-complete {\n  word-break: break-all;\n}\n\n.console .console-message.auto-complete .keyword {\n  margin-right: 11px;\n}\n\n.console .console-message.auto-complete .keyword.selected {\n  background: #fff;\n  color: #000;\n}\n\n.console .console-message.auto-complete .hidden {\n  display: none;\n}\n\n.console .console-message.auto-complete .trimmed {\n  display: none;\n}\n\n.console .console-hint {\n  color: #096;\n}\n\n.console .console-focus .console-cursor {\n  background: #fefefe;\n  color: #333;\n  font-weight: bold;\n}\n\n.console .resizer {\n  background: #333;\n  width: 100%;\n  height: 4px;\n  cursor: ns-resize;\n}\n\n.console .console-actions {\n  padding-right: 3px;\n}\n\n.console .console-actions .button {\n  float: left;\n}\n\n.console .button {\n  cursor: pointer;\n  border-radius: 1px;\n  font-family: monospace;\n  font-size: 13px;\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  color: #ccc;\n}\n\n.console .button:hover {\n  background: #666;\n  color: #fff;\n}\n\n.console .button.close-button:hover {\n  background: #966;\n}\n\n.console .clipboard {\n  height: 0px;\n  padding: 0px;\n  margin: 0px;\n  width: 0px;\n  margin-left: -1000px;\n}\n\n.console .console-prompt-label {\n  display: inline;\n  color: #fff;\n  background: none repeat scroll 0% 0% #333;\n  border: 0;\n  padding: 0;\n}\n\n.console .console-prompt-display {\n  display: inline;\n  color: #fff;\n  background: none repeat scroll 0% 0% #333;\n  border: 0;\n  padding: 0;\n}\n\n.console.full-screen {\n  height: 100%;\n}\n\n.console.full-screen .console-outer {\n  padding-top: 3px;\n}\n\n.console.full-screen .resizer {\n  display: none;\n}\n\n.console.full-screen .close-button {\n  display: none;\n}\n`
-;
-// Insert a style element with the unique ID
-var styleElementId = 'sr02459pvbvrmhco';
-// Nonce to use for CSP
-var styleElementNonce = '';
-
-// REPLConsole Constructor
-function REPLConsole(config) {
-  function getConfig(key, defaultValue) {
-    return config && config[key] || defaultValue;
-  }
-
-  this.commandStorage = new CommandStorage();
-  this.prompt = getConfig('promptLabel', ' >>');
-  this.mountPoint = getConfig('mountPoint');
-  this.sessionId = getConfig('sessionId');
-  this.autocomplete = false;
-}
-
-REPLConsole.prototype.getSessionUrl = function(path) {
-  var parts = [ this.mountPoint, 'repl_sessions', this.sessionId ];
-  if (path) {
-    parts.push(path);
-  }
-  // Join and remove duplicate slashes.
-  return parts.join('/').replace(/([^:]\/)\/+/g, '$1');
-};
-
-REPLConsole.prototype.contextRequest = function(keyword, callback) {
-  putRequest(this.getSessionUrl(), 'context=' + getContext(keyword), function(xhr) {
-    if (xhr.status == 200) {
-      callback(null, JSON.parse(xhr.responseText));
-    } else {
-      callback(xhr.statusText);
-    }
-  });
-};
-
-REPLConsole.prototype.commandHandle = function(line, callback) {
-  var self = this;
-  var params = 'input=' + encodeURIComponent(line);
-  callback = callback || function() {};
-
-  function isSuccess(status) {
-    return status >= 200 && status < 300 || status === 304;
-  }
-
-  function parseJSON(text) {
-    try {
-      return JSON.parse(text);
-    } catch (e) {
-      return null;
-    }
-  }
-
-  function getErrorText(xhr) {
-    if (!xhr.status) {
-      return "Connection Refused";
-    } else {
-      return xhr.status + ' ' + xhr.statusText;
-    }
-  }
-
-  putRequest(self.getSessionUrl(), params, function(xhr) {
-    var response = parseJSON(xhr.responseText);
-    var result   = isSuccess(xhr.status);
-    if (result) {
-      self.writeOutput(response.output);
-    } else {
-      if (response && response.output) {
-        self.writeError(response.output);
-      } else {
-        self.writeError(getErrorText(xhr));
-      }
-    }
-    callback(result, response);
-  });
-};
-
-REPLConsole.prototype.uninstall = function() {
-  this.container.parentNode.removeChild(this.container);
-};
-
-REPLConsole.prototype.install = function(container) {
-  var _this = this;
-
-  document.onkeydown = function(ev) {
-    if (_this.focused) { _this.onKeyDown(ev); }
-  };
-
-  document.onkeypress = function(ev) {
-    if (_this.focused) { _this.onKeyPress(ev); }
-  };
-
-  document.addEventListener('mousedown', function(ev) {
-    var el = ev.target || ev.srcElement;
-
-    if (el) {
-      do {
-        if (el === container) {
-          _this.focus();
-          return;
-        }
-      } while (el = el.parentNode);
-
-      _this.blur();
-    }
-  });
-
-  // Render the console.
-  container.innerHTML = consoleInnerHtml;
-
-  var consoleOuter = findChild(container, 'console-outer');
-  var consoleActions = findChild(consoleOuter, 'console-actions');
-
-  addClass(container, 'console');
-  addClass(container.getElementsByClassName('layer'), 'pos-absolute border-box');
-  addClass(container.getElementsByClassName('button'), 'border-box');
-  addClass(consoleActions, 'pos-fixed pos-right');
-
-  // Make the console resizable.
-  function resizeContainer(ev) {
-    var startY              = ev.clientY;
-    var startHeight         = parseInt(document.defaultView.getComputedStyle(container).height, 10);
-    var scrollTopStart      = consoleOuter.scrollTop;
-    var clientHeightStart   = consoleOuter.clientHeight;
-
-    var doDrag = function(e) {
-      var height = startHeight + startY - e.clientY;
-      consoleOuter.scrollTop = scrollTopStart + (clientHeightStart - consoleOuter.clientHeight);
-      if (height > document.documentElement.clientHeight) {
-        container.style.height = document.documentElement.clientHeight;
-      } else {
-        container.style.height = height + 'px';
-      }
-      shiftConsoleActions();
-    };
-
-    var stopDrag = function(e) {
-      document.documentElement.removeEventListener('mousemove', doDrag, false);
-      document.documentElement.removeEventListener('mouseup', stopDrag, false);
-    };
-
-    document.documentElement.addEventListener('mousemove', doDrag, false);
-    document.documentElement.addEventListener('mouseup', stopDrag, false);
-  }
-
-  function closeContainer(ev) {
-    container.parentNode.removeChild(container);
-  }
-
-  var shifted = false;
-  function shiftConsoleActions() {
-    if (consoleOuter.scrollHeight > consoleOuter.clientHeight) {
-      var widthDiff = document.documentElement.clientWidth - consoleOuter.clientWidth;
-      if (shifted || ! widthDiff) return;
-      shifted = true;
-      consoleActions.style.marginRight = widthDiff + 'px';
-    } else if (shifted) {
-      shifted = false;
-      consoleActions.style.marginRight = '0px';
-    }
-  }
-
-  var observer = new MutationObserver(function(mutationsList) {
-    for (let mutation of mutationsList) {
-      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
-        shiftConsoleActions();
-      }
-    }
-  });
-
-  // Initialize
-  this.container = container;
-  this.outer = consoleOuter;
-  this.inner = findChild(this.outer, 'console-inner');
-  this.clipboard = findChild(container, 'clipboard');
-  this.suggestWait = 1500;
-  this.newPromptBox();
-  this.insertCss();
-
-  findChild(container, 'resizer').addEventListener('mousedown', resizeContainer);
-  findChild(consoleActions, 'close-button').addEventListener('click', closeContainer);
-  observer.observe(consoleOuter, { childList: true, subtree: true });
-
-  REPLConsole.currentSession = this;
-};
-
-// Add CSS styles dynamically. This probably doesnt work for IE <8.
-REPLConsole.prototype.insertCss = function() {
-  if (document.getElementById(styleElementId)) {
-    return; // already inserted
-  }
-  var style = document.createElement('style');
-  style.type = 'text/css';
-  style.innerHTML = consoleStyleCss;
-  style.id = styleElementId;
-  if (styleElementNonce.length > 0) {
-    style.nonce = styleElementNonce;
-  }
-  document.getElementsByTagName('head')[0].appendChild(style);
-};
-
-REPLConsole.prototype.focus = function() {
-  if (! this.focused) {
-    this.focused = true;
-    if (! hasClass(this.inner, "console-focus")) {
-      addClass(this.inner, "console-focus");
-    }
-    this.scrollToBottom();
-  }
-};
-
-REPLConsole.prototype.blur = function() {
-  this.focused = false;
-  removeClass(this.inner, "console-focus");
-};
-
-/**
- * Add a new empty prompt box to the console.
- */
-REPLConsole.prototype.newPromptBox = function() {
-  // Remove the caret from previous prompt display if any.
-  if (this.promptDisplay) {
-    this.removeCaretFromPrompt();
-  }
-
-  var promptBox = document.createElement('div');
-  promptBox.className = "console-prompt-box";
-  promptBox.innerHTML = promptBoxHtml;
-  this.promptLabel = promptBox.getElementsByClassName('console-prompt-label')[0];
-  this.promptDisplay = promptBox.getElementsByClassName('console-prompt-display')[0];
-  // Render the prompt box
-  this.setInput("");
-  this.promptLabel.innerHTML = this.prompt;
-  this.inner.appendChild(promptBox);
-  this.scrollToBottom();
-};
-
-/**
- * Remove the caret from the prompt box,
- * mainly before adding a new prompt box.
- * For simplicity, just re-render the prompt box
- * with caret position -1.
- */
-REPLConsole.prototype.removeCaretFromPrompt = function() {
-  this.setInput(this._input, -1);
-};
-
-REPLConsole.prototype.getSuggestion = function(keyword) {
-  var self = this;
-
-  function show(found) {
-    if (!found) return;
-    var hint = self.promptDisplay.childNodes[1];
-    hint.className = 'console-hint';
-    hint.dataset.keyword = found;
-    hint.innerText = found.substr(self.suggestKeyword.length);
-    // clear hinting information after timeout in a few time
-    if (self.suggestTimeout) clearTimeout(self.suggestTimeout);
-    self.suggestTimeout = setTimeout(function() { self.renderInput() }, self.suggestWait);
-  }
-
-  function find(context) {
-    var k = self.suggestKeyword;
-    for (var i = 0; i < context.length; ++i) if (context[i].substr(0, k.length) === k) {
-      if (context[i] === k) return;
-      return context[i];
-    }
-  }
-
-  function request(keyword, callback) {
-    self.contextRequest(keyword, function(err, res) {
-      if (err) throw new Error(err);
-      var c = flatten(res['context']);
-      c.sort();
-      callback(c);
-    });
-  }
-
-  self.suggestKeyword = keyword;
-  var input = getContext(keyword);
-  if (keyword.length - input.length < 3) return;
-
-  if (self.suggestInput !== input) {
-    self.suggestInput = input;
-    request(keyword, function(c) {
-      show(find(self.suggestContext = c));
-    });
-  } else if (self.suggestContext) {
-    show(find(self.suggestContext));
-  }
-};
-
-REPLConsole.prototype.getHintKeyword = function() {
-  var hint = this.promptDisplay.childNodes[1];
-  return hint.className === 'console-hint' && hint.dataset.keyword;
-};
-
-REPLConsole.prototype.setInput = function(input, caretPos) {
-  if (input == null) return; // keep value if input is undefined
-  this._caretPos = caretPos === undefined ? input.length : caretPos;
-  this._input = input;
-  if (this.autocomplete) this.autocomplete.refine(this.getCurrentWord());
-  this.renderInput();
-  if (!this.autocomplete && input.length == this._caretPos) this.getSuggestion(this.getCurrentWord());
-};
-
-/**
- * Add some text to the existing input.
- */
-REPLConsole.prototype.addToInput = function(val, caretPos) {
-  caretPos = caretPos || this._caretPos;
-  var before = this._input.substring(0, caretPos);
-  var after = this._input.substring(caretPos, this._input.length);
-  var newInput =  before + val + after;
-  this.setInput(newInput, caretPos + val.length);
-};
-
-/**
- * Render the input prompt. This is called whenever
- * the user input changes, sometimes not very efficient.
- */
-REPLConsole.prototype.renderInput = function() {
-  // Clear the current input.
-  removeAllChildren(this.promptDisplay);
-
-  var before, current, after;
-  var center = document.createElement('span');
-
-  if (this._caretPos < 0) {
-    before = this._input;
-    current = after = "";
-  } else if (this._caretPos === this._input.length) {
-    before = this._input;
-    current = "\u00A0";
-    after = "";
-  } else {
-    before = this._input.substring(0, this._caretPos);
-    current = this._input.charAt(this._caretPos);
-    after = this._input.substring(this._caretPos + 1, this._input.length);
-  }
-
-  this.promptDisplay.appendChild(document.createTextNode(before));
-  this.promptDisplay.appendChild(center);
-  this.promptDisplay.appendChild(document.createTextNode(after));
-
-  var hint = this.autocomplete && this.autocomplete.getSelectedWord();
-  addClass(center, hint ? 'console-hint' : 'console-cursor');
-  center.appendChild(document.createTextNode(hint ? hint.substr(this.getCurrentWord().length) : current));
-};
-
-REPLConsole.prototype.writeOutput = function(output) {
-  var consoleMessage = document.createElement('pre');
-  consoleMessage.className = "console-message";
-  consoleMessage.innerHTML = escapeHTML(output);
-  this.inner.appendChild(consoleMessage);
-  this.newPromptBox();
-  return consoleMessage;
-};
-
-REPLConsole.prototype.writeError = function(output) {
-  var consoleMessage = this.writeOutput(output);
-  addClass(consoleMessage, "error-message");
-  return consoleMessage;
-};
-
-REPLConsole.prototype.writeNotification = function(output) {
-  var consoleMessage = this.writeOutput(output);
-  addClass(consoleMessage, "notification-message");
-  return consoleMessage;
-};
-
-REPLConsole.prototype.onEnterKey = function() {
-  var input = this._input;
-
-  if(input != "" && input !== undefined) {
-    this.commandStorage.addCommand(input);
-  }
-
-  this.commandHandle(input);
-};
-
-REPLConsole.prototype.onTabKey = function() {
-  var self = this;
-
-  var hintKeyword;
-  if (hintKeyword = self.getHintKeyword()) {
-    self.swapCurrentWord(hintKeyword);
-    return;
-  }
-
-  if (self.autocomplete) return;
-  self.autocomplete = new Autocomplete([]);
-
-  self.contextRequest(self.getCurrentWord(), function(err, obj) {
-    if (err) return self.autocomplete = false;
-    self.autocomplete = new Autocomplete(obj['context'], self.getCurrentWord());
-    self.inner.appendChild(self.autocomplete.view);
-    self.autocomplete.onFinished(function(word) {
-      self.swapCurrentWord(word);
-      self.autocomplete = false;
-    });
-    self.scrollToBottom();
-  });
-};
-
-REPLConsole.prototype.onNavigateHistory = function(offset) {
-  var command = this.commandStorage.navigate(offset) || "";
-  this.setInput(command);
-};
-
-/**
- * Handle control keys like up, down, left, right.
- */
-REPLConsole.prototype.onKeyDown = function(ev) {
-  if (this.autocomplete && this.autocomplete.onKeyDown(ev)) {
-    this.renderInput();
-    ev.preventDefault();
-    ev.stopPropagation();
-    return;
-  }
-
-  switch (ev.keyCode) {
-    case 65: // Ctrl-A
-      if (ev.ctrlKey) {
-        this.setInput(this._input, 0);
-        ev.preventDefault();
-      }
-      break;
-
-    case 69: // Ctrl-E
-      if (ev.ctrlKey) {
-        this.onTabKey();
-        ev.preventDefault();
-      }
-      break;
-
-    case 87: // Ctrl-W
-      if (ev.ctrlKey) {
-        this.deleteWord();
-        ev.preventDefault();
-      }
-      break;
-
-    case 85: // Ctrl-U
-      if (ev.ctrlKey) {
-        this.deleteLine();
-        ev.preventDefault();
-      }
-      break;
-
-    case 69: // Ctrl-E
-      if (ev.ctrlKey) {
-        this.onTabKey();
-        ev.preventDefault();
-      }
-      break;
-
-    case 80: // Ctrl-P
-      if (! ev.ctrlKey) break;
-
-    case 78: // Ctrl-N
-      if (! ev.ctrlKey) break;
-
-    case 9: // Tab
-      this.onTabKey();
-      ev.preventDefault();
-      break;
-
-    case 13: // Enter key
-      this.onEnterKey();
-      ev.preventDefault();
-      break;
-
-    case 38: // Up arrow
-      this.onNavigateHistory(-1);
-      ev.preventDefault();
-      break;
-
-    case 40: // Down arrow
-      this.onNavigateHistory(1);
-      ev.preventDefault();
-      break;
-
-    case 37: // Left arrow
-      var caretPos = this._caretPos > 0 ? this._caretPos - 1 : this._caretPos;
-      this.setInput(this._input, caretPos);
-      ev.preventDefault();
-      break;
-
-    case 39: // Right arrow
-      var length = this._input.length;
-      var caretPos = this._caretPos < length ? this._caretPos + 1 : this._caretPos;
-      this.setInput(this._input, caretPos);
-      ev.preventDefault();
-      break;
-
-    case 8: // Delete
-      this.deleteAtCurrent();
-      ev.preventDefault();
-      break;
-
-    default:
-      break;
-  }
-
-  if (ev.ctrlKey || ev.metaKey) {
-    if (ev.keyCode == 86) {
-      // Set focus to our clipboard when they hit the "v" key
-      this.clipboard.focus();
-
-      // Pasting to clipboard doesn't happen immediately,
-      // so we have to wait for a while to get the pasted text.
-      var _this = this;
-      setTimeout(function() {
-        _this.addToInput(_this.clipboard.value);
-        _this.clipboard.value = "";
-        _this.clipboard.blur();
-      }, 100);
-    }
-  }
-
-  ev.stopPropagation();
-};
-
-/**
- * Handle input key press.
- */
-REPLConsole.prototype.onKeyPress = function(ev) {
-  // Only write to the console if it's a single key press.
-  if (ev.ctrlKey && !ev.altKey || ev.metaKey) { return; }
-  var keyCode = ev.keyCode || ev.which;
-  this.insertAtCurrent(String.fromCharCode(keyCode));
-  ev.stopPropagation();
-  ev.preventDefault();
-};
-
-/**
- * Delete a character at the current position.
- */
-REPLConsole.prototype.deleteAtCurrent = function() {
-  if (this._caretPos > 0) {
-    var caretPos = this._caretPos - 1;
-    var before = this._input.substring(0, caretPos);
-    var after = this._input.substring(this._caretPos, this._input.length);
-    this.setInput(before + after, caretPos);
-
-    if (!this._input) {
-      this.autocomplete && this.autocomplete.cancel();
-      this.autocomplete = false;
-    }
-  }
-};
-
-/**
- * Deletes the current line.
- */
-REPLConsole.prototype.deleteLine = function() {
-  if (this._caretPos > 0) {
-    this.setInput("", 0);
-
-    if (!this._input) {
-      this.autocomplete && this.autocomplete.cancel();
-      this.autocomplete = false;
-    }
-  }
-};
-
-/**
- * Deletes the current word.
- */
-REPLConsole.prototype.deleteWord = function() {
-  if (this._caretPos > 0) {
-    var i = 1, current = this._caretPos;
-    while (this._input[current - i++] == " ");
-
-    var deleteIndex = 0;
-    for (; current - i > 0; i++) {
-      if (this._input[current - i] == " ") {
-        deleteIndex = current - i;
-        break;
-      }
-    }
-
-    var before = this._input.substring(0, deleteIndex);
-    var after = this._input.substring(current, this._input.length);
-    this.setInput(before + after, deleteIndex);
-
-    if (!this._input) {
-      this.autocomplete && this.autocomplete.cancel();
-      this.autocomplete = false;
-    }
-  }
-};
-
-/**
- * Insert a character at the current position.
- */
-REPLConsole.prototype.insertAtCurrent = function(char) {
-  var before = this._input.substring(0, this._caretPos);
-  var after = this._input.substring(this._caretPos, this._input.length);
-  this.setInput(before + char + after, this._caretPos + 1);
-};
-
-REPLConsole.prototype.swapCurrentWord = function(next) {
-  function right(s, pos) {
-    var x = s.indexOf(' ', pos);
-    return x === -1 ? s.length : x;
-  }
-
-  function swap(s, pos) {
-    return s.substr(0, s.lastIndexOf(' ', pos) + 1) + next + s.substr(right(s, pos))
-  }
-
-  if (!next) return;
-  var swapped = swap(this._input, this._caretPos);
-  this.setInput(swapped, this._caretPos + swapped.length - this._input.length);
-};
-
-REPLConsole.prototype.getCurrentWord = function() {
-  return (function(s, pos) {
-    var left = s.lastIndexOf(' ', pos);
-    if (left === -1) left = 0;
-    var right = s.indexOf(' ', pos)
-    if (right === -1) right = s.length - 1;
-    return s.substr(left, right - left + 1).replace(/^\s+|\s+$/g,'');
-  })(this._input, this._caretPos);
-};
-
-REPLConsole.prototype.scrollToBottom = function() {
-  this.outer.scrollTop = this.outer.scrollHeight;
-};
-
-// Change the binding of the console.
-REPLConsole.prototype.switchBindingTo = function(frameId, exceptionObjectId, callback) {
-  var url = this.getSessionUrl('trace');
-  var params = "frame_id=" + encodeURIComponent(frameId);
-
-  if (exceptionObjectId) {
-    params = params + "&exception_object_id=" + encodeURIComponent(exceptionObjectId);
-  }
-
-  var _this = this;
-  postRequest(url, params, function() {
-    var text = "Context has changed to: " + callback();
-    _this.writeNotification(text);
-  });
-};
-
-/**
- * Install the console into the element with a specific ID.
- * Example: REPLConsole.installInto("target-id")
- */
-REPLConsole.installInto = function(id, options) {
-  var consoleElement = document.getElementById(id);
-
-  options = options || {};
-
-  for (var prop in consoleElement.dataset) {
-    options[prop] = options[prop] || consoleElement.dataset[prop];
-  }
-
-  var replConsole = new REPLConsole(options);
-  replConsole.install(consoleElement);
-  return replConsole;
-};
-
-// This is to store the latest single session, and the stored session
-// is updated by the REPLConsole#install() method.
-// It allows to operate the current session from the other scripts.
-REPLConsole.currentSession = null;
-
-// This line is for the Firefox Add-on, because it doesn't have XMLHttpRequest as default.
-// And so we need to require a module compatible with XMLHttpRequest from SDK.
-REPLConsole.XMLHttpRequest = typeof XMLHttpRequest === 'undefined' ? null : XMLHttpRequest;
-
-REPLConsole.request = function request(method, url, params, callback) {
-  var xhr = new REPLConsole.XMLHttpRequest();
-
-  xhr.open(method, url, true);
-  xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
-  xhr.setRequestHeader("x-requested-with", "XMLHttpRequest");
-  xhr.send(params);
-
-  xhr.onreadystatechange = function() {
-    if (xhr.readyState === 4) {
-      callback(xhr);
-    }
-  };
-};
-
-// DOM helpers
-function hasClass(el, className) {
-  var regex = new RegExp('(?:^|\\s)' + className + '(?!\\S)', 'g');
-  return el.className && el.className.match(regex);
-}
-
-function isNodeList(el) {
-  return typeof el.length === 'number' &&
-    typeof el.item === 'function';
-}
-
-function addClass(el, className) {
-  if (isNodeList(el)) {
-    for (var i = 0; i < el.length; ++ i) {
-      addClass(el[i], className);
-    }
-  } else if (!hasClass(el, className)) {
-    el.className += " " + className;
-  }
-}
-
-function removeClass(el, className) {
-  var regex = new RegExp('(?:^|\\s)' + className + '(?!\\S)', 'g');
-  el.className = el.className.replace(regex, '');
-}
-
-function removeAllChildren(el) {
-  while (el.firstChild) {
-    el.removeChild(el.firstChild);
-  }
-}
-
-function findChild(el, className) {
-  for (var i = 0; i < el.childNodes.length; ++ i) {
-    if (hasClass(el.childNodes[i], className)) {
-      return el.childNodes[i];
-    }
-  }
-}
-
-function escapeHTML(html) {
-  return html
-    .replace(/&/g, '&amp;')
-    .replace(/</g, '&lt;')
-    .replace(/>/g, '&gt;')
-    .replace(/"/g, '&quot;')
-    .replace(/'/g, '&#x27;')
-    .replace(/`/g, '&#x60;');
-}
-
-// XHR helpers
-function postRequest() {
-  REPLConsole.request.apply(this, ["POST"].concat([].slice.call(arguments)));
-}
-
-function putRequest() {
-  REPLConsole.request.apply(this, ["PUT"].concat([].slice.call(arguments)));
-}
-
-if (typeof exports === 'object') {
-  exports.REPLConsole = REPLConsole;
-} else {
-  window.REPLConsole = REPLConsole;
-}
-
-// Split string by module operators of ruby
-function getContext(s) {
-  var methodOp = s.lastIndexOf('.');
-  var moduleOp = s.lastIndexOf('::');
-  var x = methodOp > moduleOp ? methodOp : moduleOp;
-  return x !== -1 ? s.substr(0, x) : '';
-}
-
-function flatten(arrays) {
-  return Array.prototype.concat.apply([], arrays);
-}
-
-}).call(this);
-</script>
-
-<script type="text/javascript" data-template="main" nonce="">
-(function() {
-  REPLConsole.installInto('console');
-
-}).call(this);
-</script>
-
-
-  <script type="text/javascript" data-template="error_page" nonce="">
-(function() {
-  // Try intercept traces links in Rails 4.2.
-var traceFrames = document.getElementsByClassName('trace-frames');
-var selectedFrame, currentSource = document.getElementById('frame-source-0');
-
-// Add click listeners for all stack frames
-for (var i = 0; i < traceFrames.length; i++) {
-  traceFrames[i].addEventListener('click', function(e) {
-    e.preventDefault();
-    var target = e.target;
-    var frameId = target.dataset.frameId;
-    var exceptionObjectId = target.dataset.exceptionObjectId;
-
-    // Change the binding of the console.
-    changeBinding(frameId, exceptionObjectId, function() {
-      // Rails already handles toggling the select class
-      selectedFrame = target;
-      return target.innerHTML;
-    });
-
-    // Change the extracted source code
-    changeSourceExtract(frameId);
-  });
-}
-
-// Change the binding of the current session and prompt the user.
-function changeBinding(frameId, exceptionObjectId, callback) {
-  REPLConsole.currentSession.switchBindingTo(frameId, exceptionObjectId, callback);
-}
-
-function changeSourceExtract(frameId) {
-  var el = document.getElementById('frame-source-' + frameId);
-  if (currentSource && el) {
-    currentSource.className += " hidden";
-    el.className = el.className.replace(" hidden", "");
-    currentSource = el;
-  }
-}
-
-// Push the error page body upwards the size of the console.
-//
-// While, I wouldn't like to do that on every custom page (so I don't screw
-// user's layouts), I think a lot of developers want to see all of the content
-// on the default Rails error page.
-//
-// Since it's quite special as is now, being a bit more special in the name of
-// better user experience, won't hurt.
-document.addEventListener('DOMContentLoaded', function() {
-  var consoleElement = document.getElementById('console');
-  var resizerElement = consoleElement.getElementsByClassName('resizer')[0];
-  var containerElement = document.getElementById('container');
-
-  function setContainerElementBottomMargin(pixels) {
-    containerElement.style.marginBottom = pixels + 'px';
-  }
-
-  var currentConsoleElementHeight = consoleElement.offsetHeight;
-  setContainerElementBottomMargin(currentConsoleElementHeight);
-
-  resizerElement.addEventListener('mousedown', function(event) {
-    function recordConsoleElementHeight(event) {
-      resizerElement.removeEventListener('mouseup', recordConsoleElementHeight);
-
-      var currentConsoleElementHeight = consoleElement.offsetHeight;
-      setContainerElementBottomMargin(currentConsoleElementHeight);
-    }
-
-    resizerElement.addEventListener('mouseup', recordConsoleElementHeight);
-  });
-});
-
-}).call(this);
-</script>
-
-
-<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/index.html.erb --></body>
-</html>
-FF.F..
-
-Failures:
-
-  1) Posts POST /posts 有効なパラメータの場合 投稿が作成されること
-     Failure/Error:
-       expect {
-         post posts_path, params: post_params
-       }.to change(Post, :count).by(1)
-
-       expected `Post.count` to have changed by 1, but was changed by 0
-     # ./spec/requests/posts_spec.rb:39:in `block (4 levels) in <top (required)>'
-     # /usr/local/bundle/gems/webmock-3.26.1/lib/webmock/rspec.rb:39:in `block (2 levels) in <main>'
-
-  2) Posts POST /posts 有効なパラメータの場合 投稿一覧ページにリダイレクトされること
-     Failure/Error: expect(response).to redirect_to(posts_path)
-       Expected response to be a <3XX: redirect>, but was a <422: Unprocessable Content>
-     # ./spec/requests/posts_spec.rb:50:in `block (4 levels) in <top (required)>'
-     # /usr/local/bundle/gems/webmock-3.26.1/lib/webmock/rspec.rb:39:in `block (2 levels) in <main>'
-
-  3) Posts DELETE /posts/:id 自分の投稿の場合 投稿を削除できること
-     Failure/Error:
-       expect {
-         delete post_path(my_post)
-       }.to change(Post, :count).by(-1)
-
-       expected `Post.count` to have changed by -1, but was changed by 0
-     # ./spec/requests/posts_spec.rb:71:in `block (4 levels) in <top (required)>'
-     # /usr/local/bundle/gems/webmock-3.26.1/lib/webmock/rspec.rb:39:in `block (2 levels) in <main>'
-
-Top 8 slowest examples (4.09 seconds, 99.9% of total time):
-  Posts DELETE /posts/:id 他人の投稿の場合 ルートページなどにリダイレクトされる、またはエラーになること
-    0.69029 seconds ./spec/requests/posts_spec.rb:86
-  Posts DELETE /posts/:id 他人の投稿の場合 投稿を削除できないこと
-    0.68231 seconds ./spec/requests/posts_spec.rb:80
-  Posts GET /posts ログインしている場合 投稿一覧ページにアクセスできること
-    0.64892 seconds ./spec/requests/posts_spec.rb:17
-  Posts POST /posts 有効なパラメータの場合 投稿が作成されること
-    0.53289 seconds ./spec/requests/posts_spec.rb:38
-  Posts POST /posts 無効なパラメータの場合 投稿が作成されないこと
-    0.51061 seconds ./spec/requests/posts_spec.rb:57
-  Posts POST /posts 有効なパラメータの場合 投稿一覧ページにリダイレクトされること
-    0.50854 seconds ./spec/requests/posts_spec.rb:48
-  Posts DELETE /posts/:id 自分の投稿の場合 投稿を削除できること
-    0.50119 seconds ./spec/requests/posts_spec.rb:69
-  Posts GET /posts ログインしていない場合 ログインページにリダイレクトされること
-    0.0137 seconds ./spec/requests/posts_spec.rb:25
-
-Finished in 4.09 seconds (files took 11.55 seconds to load)
-8 examples, 3 failures
-
-Failed examples:
-
-rspec ./spec/requests/posts_spec.rb:38 # Posts POST /posts 有効なパラメータの場合 投稿が作成されること
-rspec ./spec/requests/posts_spec.rb:48 # Posts POST /posts 有効なパラメータの場合 投稿一覧ページにリダイレクトされること
-rspec ./spec/requests/posts_spec.rb:69 # Posts DELETE /posts/:id 自分の投稿の場合 投稿を削除できること
-
+..Response Status: 422
+Response Body: <!DOCTYPE html>
+<html lang="en">
+<head>
+  <meta charset="utf-8" />
+  <meta name="viewport" content="width=device-width, initial-scale=1">
+  <meta name="turbo-visit-control" content="reload">
+  <title>Action Controller: Exception caught</title>
+  <style>
+    body {
+      background-color: #FAFAFA;
+      color: #333;
+      color-scheme: light dark;
+      supported-color-schemes: light dark;
+      margin: 0px;
+    }
+
+    body, p, ol, ul, td {
+      font-family: helvetica, verdana, arial, sans-serif;
+      font-size:   13px;
+      line-height: 18px;
+    }
+
+    pre {
+      font-size: 11px;
+      white-space: pre-wrap;
+    }
+
+    pre.box {
+      border: 1px solid #EEE;
+      padding: 10px;
+      margin: 0px;
+      width: 958px;
+    }
+
+    header {
+      color: #F0F0F0;
+      background: #C00;
+      padding: 0.5em 1.5em;
+    }
+
+    h1 {
+      overflow-wrap: break-word;
+      margin: 0.2em 0;
+      line-height: 1.1em;
+      font-size: 2em;
+    }
+
+    h2 {
+      color: #C00;
+      line-height: 25px;
+    }
+
+    code.traces {
+      font-size: 11px;
+    }
+
+    .response-heading, .request-heading {
+      margin-top: 30px;
+    }
+
+    .exception-message {
+      padding: 8px 0;
+    }
+
+    .exception-message .message {
+      margin-bottom: 8px;
+      line-height: 25px;
+      font-size: 1.5em;
+      font-weight: bold;
+      color: #C00;
+    }
+
+    .details {
+      border: 1px solid #D0D0D0;
+      border-radius: 4px;
+      margin: 1em 0px;
+      display: block;
+      max-width: 978px;
+    }
+
+    .summary {
+      padding: 8px 15px;
+      border-bottom: 1px solid #D0D0D0;
+      display: block;
+    }
+
+    a.summary {
+      color: #F0F0F0;
+      text-decoration: none;
+      background: #C52F24;
+      border-bottom: none;
+    }
+
+    .details pre {
+      margin: 5px;
+      border: none;
+    }
+
+    #container {
+      box-sizing: border-box;
+      width: 100%;
+      padding: 0 1.5em;
+    }
+
+    .source * {
+      margin: 0px;
+      padding: 0px;
+    }
+
+    .source {
+      border: 1px solid #D9D9D9;
+      background: #ECECEC;
+      max-width: 978px;
+    }
+
+    .source pre {
+      padding: 10px 0px;
+      border: none;
+    }
+
+    .source .data {
+      font-size: 80%;
+      overflow: auto;
+      background-color: #FFF;
+    }
+
+    .info {
+      padding: 0.5em;
+    }
+
+    .source .data .line_numbers {
+      background-color: #ECECEC;
+      color: #555;
+      padding: 1em .5em;
+      border-right: 1px solid #DDD;
+      text-align: right;
+    }
+
+    .line {
+      padding-left: 10px;
+      white-space: pre;
+    }
+
+    .line:hover {
+      background-color: #F6F6F6;
+    }
+
+    .line.active {
+      background-color: #FCC;
+    }
+
+    .error_highlight {
+      display: inline-block;
+      background-color: #FF9;
+      text-decoration: #F00 wavy underline;
+    }
+
+    .error_highlight_tip {
+      color: #666;
+      padding: 2px 2px;
+      font-size: 10px;
+    }
+
+    .button_to {
+      display: inline-block;
+      margin-top: 0.75em;
+      margin-bottom: 0.75em;
+    }
+
+    .hidden {
+      display: none;
+    }
+
+    .correction {
+      list-style-type: none;
+    }
+
+    input[type="submit"] {
+      color: white;
+      background-color: #C00;
+      border: none;
+      border-radius: 12px;
+      box-shadow: 0 3px #F99;
+      font-size: 13px;
+      font-weight: bold;
+      margin: 0;
+      padding: 10px 18px;
+      cursor: pointer;
+      -webkit-appearance: none;
+    }
+    input[type="submit"]:focus,
+    input[type="submit"]:hover {
+      opacity: 0.8;
+    }
+    input[type="submit"]:active {
+      box-shadow: 0 2px #F99;
+      transform: translateY(1px)
+    }
+
+    a { color: #980905; }
+    a:visited { color: #666; }
+    a.trace-frames {
+      color: #666;
+      overflow-wrap: break-word;
+    }
+    a:hover, a.trace-frames.selected { color: #C00; }
+    a.summary:hover { color: #FFF; }
+
+    @media (prefers-color-scheme: dark) {
+      body {
+        background-color: #222;
+        color: #ECECEC;
+      }
+
+      .details, .summary {
+        border-color: #666;
+      }
+
+      .source {
+        border-color: #555;
+        background-color: #333;
+      }
+
+      .source .data {
+        background: #444;
+      }
+
+      .source .data .line_numbers {
+        background: #333;
+        border-color: #222;
+      }
+
+      .line:hover {
+        background: #666;
+      }
+
+      .line.active {
+        background-color: #900;
+      }
+
+      .error_highlight {
+        color: #333;
+      }
+
+      input[type="submit"] {
+        box-shadow: 0 3px #800;
+      }
+      input[type="submit"]:active {
+        box-shadow: 0 2px #800;
+      }
+
+      a { color: #C00; }
+      a.trace-frames { color: #999; }
+      a:hover, a.trace-frames.selected { color: #E9382B; }
+    }
+
+    
+  </style>
+
+  <script>
+    var toggle = function(id) {
+      document.getElementById(id).classList.toggle('hidden');
+      return false;
+    }
+    var show = function(id) {
+      document.getElementById(id).style.display = 'block';
+    }
+    var hide = function(id) {
+      document.getElementById(id).style.display = 'none';
+    }
+    var toggleSessionDump = function() {
+      return toggle('session_dump');
+    }
+    var toggleEnvDump = function() {
+      return toggle('env_dump');
+    }
+  </script>
+</head>
+<body>
+
+  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb --><header>
+  <h1>
+    ActionController::InvalidAuthenticityToken
+      in PostsController#create
+  </h1>
+</header>
+
+<main role="main" id="container">
+  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_message_and_suggestions.html.erb -->  <div class="exception-message">
+    <div class="message">Can't verify CSRF token authenticity.</div>
+  </div>
+<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_message_and_suggestions.html.erb -->
+  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_actions.html.erb -->
+<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_actions.html.erb -->
+
+  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb -->
+    <div class="source " id="frame-source-0-0">
+      <div class="info">
+        Extracted source (around line <strong>#314</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>312</span>
+<span>313</span>
+<span>314</span>
+<span>315</span>
+<span>316</span>
+<span>317</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">        def handle_unverified_request
+</div><div class="line active">          <span class="error_highlight">raise</span> ActionController::InvalidAuthenticityToken, warning_message
+</div><div class="line">        end
+</div><div class="line">      end
+</div><div class="line">    end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-1">
+      <div class="info">
+        Extracted source (around line <strong>#408</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>406</span>
+<span>407</span>
+<span>408</span>
+<span>409</span>
+<span>410</span>
+<span>411</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        end
+</div><div class="line">
+</div><div class="line active">        protection_strategy<span class="error_highlight">.handle_unverified_request</span>
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      def unverified_request_warning_message
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-2">
+      <div class="info">
+        Extracted source (around line <strong>#257</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>255</span>
+<span>256</span>
+<span>257</span>
+<span>258</span>
+<span>259</span>
+<span>260</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # clear run strategies and remove cached variables.
+</div><div class="line">      def handle_unverified_request
+</div><div class="line active">        super # call the default behavior which resets/nullifies/raises
+</div><div class="line">        request.env[&quot;devise.skip_storage&quot;] = true
+</div><div class="line">        sign_out_all_scopes(false)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-3">
+      <div class="info">
+        Extracted source (around line <strong>#397</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>395</span>
+<span>396</span>
+<span>397</span>
+<span>398</span>
+<span>399</span>
+<span>400</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          logger.warn unverified_request_warning_message if logger &amp;&amp; log_warning_on_csrf_failure
+</div><div class="line">
+</div><div class="line active">          <span class="error_highlight">handle_unverified_request</span>
+</div><div class="line">        end
+</div><div class="line">      end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-4">
+      <div class="info">
+        Extracted source (around line <strong>#362</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>360</span>
+<span>361</span>
+<span>362</span>
+<span>363</span>
+<span>364</span>
+<span>365</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          def make_lambda
+</div><div class="line">            lambda do |target, value, &amp;block|
+</div><div class="line active">              target<span class="error_highlight">.send</span>(@method_name, &amp;block)
+</div><div class="line">            end
+</div><div class="line">          end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-5">
+      <div class="info">
+        Extracted source (around line <strong>#179</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>177</span>
+<span>178</span>
+<span>179</span>
+<span>180</span>
+<span>181</span>
+<span>182</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">            if !halted &amp;&amp; user_conditions.all? { |c| c.call(target, value) }
+</div><div class="line active">              result_lambda = -&gt; { user_callback<span class="error_highlight">.call</span> target, value }
+</div><div class="line">              env.halted = halted_lambda.call(target, result_lambda)
+</div><div class="line">              if env.halted
+</div><div class="line">                target.send :halted_callback_hook, filter, name
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-6">
+      <div class="info">
+        Extracted source (around line <strong>#34</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+<span>36</span>
+<span>37</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    included do
+</div><div class="line">      define_callbacks :process_action,
+</div><div class="line active">                       terminator: -&gt;(controller, result_lambda) { result_lambda<span class="error_highlight">.call</span>; controller.performed? },
+</div><div class="line">                       skip_after_callbacks_if_terminated: true
+</div><div class="line">      mattr_accessor :raise_on_missing_callback_actions, default: false
+</div><div class="line">    end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-7">
+      <div class="info">
+        Extracted source (around line <strong>#180</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>178</span>
+<span>179</span>
+<span>180</span>
+<span>181</span>
+<span>182</span>
+<span>183</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            if !halted &amp;&amp; user_conditions.all? { |c| c.call(target, value) }
+</div><div class="line">              result_lambda = -&gt; { user_callback.call target, value }
+</div><div class="line active">              env.halted = halted_lambda<span class="error_highlight">.call</span>(target, result_lambda)
+</div><div class="line">              if env.halted
+</div><div class="line">                target.send :halted_callback_hook, filter, name
+</div><div class="line">              end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-8">
+      <div class="info">
+        Extracted source (around line <strong>#560</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>558</span>
+<span>559</span>
+<span>560</span>
+<span>561</span>
+<span>562</span>
+<span>563</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">        def invoke_before(arg)
+</div><div class="line active">          @before&amp;.each { |b| b<span class="error_highlight">.call</span>(arg) }
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        def invoke_after(arg)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-9">
+      <div class="info">
+        Extracted source (around line <strong>#560</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>558</span>
+<span>559</span>
+<span>560</span>
+<span>561</span>
+<span>562</span>
+<span>563</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">        def invoke_before(arg)
+</div><div class="line active">          @before<span class="error_highlight">&amp;.each</span> { |b| b.call(arg) }
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        def invoke_after(arg)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-10">
+      <div class="info">
+        Extracted source (around line <strong>#560</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>558</span>
+<span>559</span>
+<span>560</span>
+<span>561</span>
+<span>562</span>
+<span>563</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">        def invoke_before(arg)
+</div><div class="line active">          @before<span class="error_highlight">&amp;.each</span> { |b| b.call(arg) }
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        def invoke_after(arg)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-11">
+      <div class="info">
+        Extracted source (around line <strong>#119</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>117</span>
+<span>118</span>
+<span>119</span>
+<span>120</span>
+<span>121</span>
+<span>122</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            while true
+</div><div class="line">              current = next_sequence
+</div><div class="line active">              current<span class="error_highlight">.invoke_before</span>(env)
+</div><div class="line">              if current.final?
+</div><div class="line">                env.value = !env.halted &amp;&amp; (!block_given? || yield)
+</div><div class="line">              elsif current.skip?(env)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-12">
+      <div class="info">
+        Extracted source (around line <strong>#141</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>139</span>
+<span>140</span>
+<span>141</span>
+<span>142</span>
+<span>143</span>
+<span>144</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          end
+</div><div class="line">
+</div><div class="line active">          invoke_sequence<span class="error_highlight">.call</span>
+</div><div class="line">        end
+</div><div class="line">      end
+</div><div class="line">    end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-13">
+      <div class="info">
+        Extracted source (around line <strong>#260</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>258</span>
+<span>259</span>
+<span>260</span>
+<span>261</span>
+<span>262</span>
+<span>263</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # callbacks around the normal behavior.
+</div><div class="line">      def process_action(...)
+</div><div class="line active">        <span class="error_highlight">run_callbacks</span>(:process_action) do
+</div><div class="line">          super
+</div><div class="line">        end
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-14">
+      <div class="info">
+        Extracted source (around line <strong>#27</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    private
+</div><div class="line">      def process_action(*)
+</div><div class="line active">        super
+</div><div class="line">      rescue Exception =&gt; exception
+</div><div class="line">        request.env[&quot;action_dispatch.show_detailed_exceptions&quot;] ||= show_detailed_exceptions?
+</div><div class="line">        rescue_with_handler(exception) || raise
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-15">
+      <div class="info">
+        Extracted source (around line <strong>#77</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>75</span>
+<span>76</span>
+<span>77</span>
+<span>78</span>
+<span>79</span>
+<span>80</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">        ActiveSupport::Notifications.instrument(&quot;process_action.action_controller&quot;, raw_payload) do |payload|
+</div><div class="line active">          result = super
+</div><div class="line">          payload[:response] = response
+</div><div class="line">          payload[:status]   = response.status
+</div><div class="line">          result
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-16">
+      <div class="info">
+        Extracted source (around line <strong>#210</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>208</span>
+<span>209</span>
+<span>210</span>
+<span>211</span>
+<span>212</span>
+<span>213</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def instrument(name, payload = {})
+</div><div class="line">        if notifier.listening?(name)
+</div><div class="line active">          instrumenter.instrument(name, payload) { yield payload if block_given? }
+</div><div class="line">        else
+</div><div class="line">          yield payload if block_given?
+</div><div class="line">        end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-17">
+      <div class="info">
+        Extracted source (around line <strong>#58</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>56</span>
+<span>57</span>
+<span>58</span>
+<span>59</span>
+<span>60</span>
+<span>61</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        handle.start
+</div><div class="line">        begin
+</div><div class="line active">          yield payload if block_given?
+</div><div class="line">        rescue Exception =&gt; e
+</div><div class="line">          payload[:exception] = [e.class.name, e.message]
+</div><div class="line">          payload[:exception_object] = e
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-18">
+      <div class="info">
+        Extracted source (around line <strong>#210</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>208</span>
+<span>209</span>
+<span>210</span>
+<span>211</span>
+<span>212</span>
+<span>213</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def instrument(name, payload = {})
+</div><div class="line">        if notifier.listening?(name)
+</div><div class="line active">          instrumenter<span class="error_highlight">.instrument</span>(name, payload) { yield payload if block_given? }
+</div><div class="line">        else
+</div><div class="line">          yield payload if block_given?
+</div><div class="line">        end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-19">
+      <div class="info">
+        Extracted source (around line <strong>#76</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>74</span>
+<span>75</span>
+<span>76</span>
+<span>77</span>
+<span>78</span>
+<span>79</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        ActiveSupport::Notifications.instrument(&quot;start_processing.action_controller&quot;, raw_payload)
+</div><div class="line">
+</div><div class="line active">        ActiveSupport::Notifications<span class="error_highlight">.instrument</span>(&quot;process_action.action_controller&quot;, raw_payload) do |payload|
+</div><div class="line">          result = super
+</div><div class="line">          payload[:response] = response
+</div><div class="line">          payload[:status]   = response.status
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-20">
+      <div class="info">
+        Extracted source (around line <strong>#259</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>257</span>
+<span>258</span>
+<span>259</span>
+<span>260</span>
+<span>261</span>
+<span>262</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def process_action(*)
+</div><div class="line">        _perform_parameter_wrapping if _wrapper_enabled?
+</div><div class="line active">        super
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      # Returns the wrapper key which will be used to store wrapped parameters.
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-21">
+      <div class="info">
+        Extracted source (around line <strong>#39</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>37</span>
+<span>38</span>
+<span>39</span>
+<span>40</span>
+<span>41</span>
+<span>42</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          # and it won&#39;t be cleaned up by the method below.
+</div><div class="line">          ActiveRecord::RuntimeRegistry.reset
+</div><div class="line active">          super
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        def cleanup_view_runtime
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-22">
+      <div class="info">
+        Extracted source (around line <strong>#152</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>150</span>
+<span>151</span>
+<span>152</span>
+<span>153</span>
+<span>154</span>
+<span>155</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      @_response_body = nil
+</div><div class="line">
+</div><div class="line active">      <span class="error_highlight">process_action</span>(action_name, ...)
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    # Delegates to the class&#39;s ::controller_path.
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-23">
+      <div class="info">
+        Extracted source (around line <strong>#40</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>38</span>
+<span>39</span>
+<span>40</span>
+<span>41</span>
+<span>42</span>
+<span>43</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def process(...) # :nodoc:
+</div><div class="line">      old_config, I18n.config = I18n.config, I18nProxy.new(I18n.config, lookup_context)
+</div><div class="line active">      super
+</div><div class="line">    ensure
+</div><div class="line">      I18n.config = old_config
+</div><div class="line">    end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-24">
+      <div class="info">
+        Extracted source (around line <strong>#252</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>250</span>
+<span>251</span>
+<span>252</span>
+<span>253</span>
+<span>254</span>
+<span>255</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      set_request!(request)
+</div><div class="line">      set_response!(response)
+</div><div class="line active">      <span class="error_highlight">process</span>(name)
+</div><div class="line">      request.commit_flash
+</div><div class="line">      to_a
+</div><div class="line">    end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-25">
+      <div class="info">
+        Extracted source (around line <strong>#335</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>333</span>
+<span>334</span>
+<span>335</span>
+<span>336</span>
+<span>337</span>
+<span>338</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        middleware_stack.build(name) { |env| new.dispatch(name, req, res) }.call req.env
+</div><div class="line">      else
+</div><div class="line active">        new<span class="error_highlight">.dispatch</span>(name, req, res)
+</div><div class="line">      end
+</div><div class="line">    end
+</div><div class="line">  end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-26">
+      <div class="info">
+        Extracted source (around line <strong>#67</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>65</span>
+<span>66</span>
+<span>67</span>
+<span>68</span>
+<span>69</span>
+<span>70</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">          def dispatch(controller, action, req, res)
+</div><div class="line active">            controller<span class="error_highlight">.dispatch</span>(action, req, res)
+</div><div class="line">          end
+</div><div class="line">      end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-27">
+      <div class="info">
+        Extracted source (around line <strong>#50</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>48</span>
+<span>49</span>
+<span>50</span>
+<span>51</span>
+<span>52</span>
+<span>53</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          controller = controller req
+</div><div class="line">          res        = controller.make_response! req
+</div><div class="line active">          <span class="error_highlight">dispatch</span>(controller, params[:action], req, res)
+</div><div class="line">        rescue ActionController::RoutingError
+</div><div class="line">          if @raise_on_name_error
+</div><div class="line">            raise
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-28">
+      <div class="info">
+        Extracted source (around line <strong>#53</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>51</span>
+<span>52</span>
+<span>53</span>
+<span>54</span>
+<span>55</span>
+<span>56</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          req.route_uri_pattern = route.path.spec.to_s
+</div><div class="line">
+</div><div class="line active">          _, headers, _ = response = route.app<span class="error_highlight">.serve</span>(req)
+</div><div class="line">
+</div><div class="line">          if &quot;pass&quot; == headers[Constants::X_CASCADE]
+</div><div class="line">            req.script_name     = script_name
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-29">
+      <div class="info">
+        Extracted source (around line <strong>#133</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>131</span>
+<span>132</span>
+<span>133</span>
+<span>134</span>
+<span>135</span>
+<span>136</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">              path_parameters[name.to_sym] = Utils.unescape_uri(val) if val
+</div><div class="line">            }
+</div><div class="line active">            yield [match_data, path_parameters, r]
+</div><div class="line">          }
+</div><div class="line">        end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-30">
+      <div class="info">
+        Extracted source (around line <strong>#126</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>124</span>
+<span>125</span>
+<span>126</span>
+<span>127</span>
+<span>128</span>
+<span>129</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          routes.sort_by!(&amp;:precedence)
+</div><div class="line">
+</div><div class="line active">          routes<span class="error_highlight">.each</span> { |r|
+</div><div class="line">            match_data = r.path.match(path_info)
+</div><div class="line">            path_parameters = {}
+</div><div class="line">            match_data.names.each_with_index { |name, i|
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-31">
+      <div class="info">
+        Extracted source (around line <strong>#126</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>124</span>
+<span>125</span>
+<span>126</span>
+<span>127</span>
+<span>128</span>
+<span>129</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          routes.sort_by!(&amp;:precedence)
+</div><div class="line">
+</div><div class="line active">          routes<span class="error_highlight">.each</span> { |r|
+</div><div class="line">            match_data = r.path.match(path_info)
+</div><div class="line">            path_parameters = {}
+</div><div class="line">            match_data.names.each_with_index { |name, i|
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-32">
+      <div class="info">
+        Extracted source (around line <strong>#34</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+<span>36</span>
+<span>37</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      def serve(req)
+</div><div class="line active">        <span class="error_highlight">find_routes</span>(req) do |match, parameters, route|
+</div><div class="line">          set_params  = req.path_parameters
+</div><div class="line">          path_info   = req.path_info
+</div><div class="line">          script_name = req.script_name
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-33">
+      <div class="info">
+        Extracted source (around line <strong>#896</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>894</span>
+<span>895</span>
+<span>896</span>
+<span>897</span>
+<span>898</span>
+<span>899</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        req = make_request(env)
+</div><div class="line">        req.path_info = Journey::Router::Utils.normalize_path(req.path_info)
+</div><div class="line active">        @router<span class="error_highlight">.serve</span>(req)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      def recognize_path(path, environment = {})
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-34">
+      <div class="info">
+        Extracted source (around line <strong>#478</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>476</span>
+<span>477</span>
+<span>478</span>
+<span>479</span>
+<span>480</span>
+<span>481</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call_app!(env = @env)
+</div><div class="line active">      @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">    rescue StandardError =&gt; e
+</div><div class="line">      env[&#39;omniauth.error.app&#39;] = true
+</div><div class="line">      raise e
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-35">
+      <div class="info">
+        Extracted source (around line <strong>#317</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>315</span>
+<span>316</span>
+<span>317</span>
+<span>318</span>
+<span>319</span>
+<span>320</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      end
+</div><div class="line">
+</div><div class="line active">      <span class="error_highlight">call_app!</span>
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    def mock_request_call
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-36">
+      <div class="info">
+        Extracted source (around line <strong>#189</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>187</span>
+<span>188</span>
+<span>189</span>
+<span>190</span>
+<span>191</span>
+<span>192</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      @env[&#39;omniauth.strategy&#39;] = self if on_auth_path?
+</div><div class="line">
+</div><div class="line active">      return <span class="error_highlight">mock_call!</span>(env) if OmniAuth.config.test_mode
+</div><div class="line">
+</div><div class="line">      begin
+</div><div class="line">        return options_call if on_auth_path? &amp;&amp; options_request?
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-37">
+      <div class="info">
+        Extracted source (around line <strong>#169</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>167</span>
+<span>168</span>
+<span>169</span>
+<span>170</span>
+<span>171</span>
+<span>172</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    # @param [Hash] The Rack environment.
+</div><div class="line">    def call(env)
+</div><div class="line active">      dup<span class="error_highlight">.call!</span>(env)
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    # The logic for dispatching any additional actions that need
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-38">
+      <div class="info">
+        Extracted source (around line <strong>#36</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>34</span>
+<span>35</span>
+<span>36</span>
+<span>37</span>
+<span>38</span>
+<span>39</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      result = catch(:warden) do
+</div><div class="line">        env[&#39;warden&#39;].on_request
+</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      result ||= {}
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-39">
+      <div class="info">
+        Extracted source (around line <strong>#34</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+<span>36</span>
+<span>37</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      env[&#39;warden&#39;] = Proxy.new(env, self)
+</div><div class="line active">      result = <span class="error_highlight">catch</span>(:warden) do
+</div><div class="line">        env[&#39;warden&#39;].on_request
+</div><div class="line">        @app.call(env)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-40">
+      <div class="info">
+        Extracted source (around line <strong>#34</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+<span>36</span>
+<span>37</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      env[&#39;warden&#39;] = Proxy.new(env, self)
+</div><div class="line active">      result = <span class="error_highlight">catch</span>(:warden) do
+</div><div class="line">        env[&#39;warden&#39;].on_request
+</div><div class="line">        @app.call(env)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-41">
+      <div class="info">
+        Extracted source (around line <strong>#20</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>18</span>
+<span>19</span>
+<span>20</span>
+<span>21</span>
+<span>22</span>
+<span>23</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      begin
+</div><div class="line active">        _, _, body = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      rescue Exception
+</div><div class="line">        env[RACK_TEMPFILES]&amp;.each(&amp;:close!)
+</div><div class="line">        raise
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-42">
+      <div class="info">
+        Extracted source (around line <strong>#29</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      status, headers, body = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">      if etag_status?(status) &amp;&amp; body.respond_to?(:to_ary) &amp;&amp; !skip_caching?(headers)
+</div><div class="line">        body = body.to_ary
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-43">
+      <div class="info">
+        Extracted source (around line <strong>#44</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>42</span>
+<span>43</span>
+<span>44</span>
+<span>45</span>
+<span>46</span>
+<span>47</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        response
+</div><div class="line">      else
+</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      end
+</div><div class="line">    end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-44">
+      <div class="info">
+        Extracted source (around line <strong>#15</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>13</span>
+<span>14</span>
+<span>15</span>
+<span>16</span>
+<span>17</span>
+<span>18</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      _, _, body = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">      if env[REQUEST_METHOD] == HEAD
+</div><div class="line">        body.close if body.respond_to?(:close)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-45">
+      <div class="info">
+        Extracted source (around line <strong>#38</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>36</span>
+<span>37</span>
+<span>38</span>
+<span>39</span>
+<span>40</span>
+<span>41</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      def call(env)
+</div><div class="line active">        _, headers, _ = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">        return response if policy_present?(headers)
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-46">
+      <div class="info">
+        Extracted source (around line <strong>#38</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>36</span>
+<span>37</span>
+<span>38</span>
+<span>39</span>
+<span>40</span>
+<span>41</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      def call(env)
+</div><div class="line active">        status, headers, _ = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">        # Returning CSP headers with a 304 Not Modified is harmful, since nonces in the
+</div><div class="line">        # new CSP headers might not match nonces in the cached HTML.
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-47">
+      <div class="info">
+        Extracted source (around line <strong>#274</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>272</span>
+<span>273</span>
+<span>274</span>
+<span>275</span>
+<span>276</span>
+<span>277</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          req = make_request env
+</div><div class="line">          prepare_session(req)
+</div><div class="line active">          status, headers, body = app<span class="error_highlight">.call</span>(req.env)
+</div><div class="line">          res = Rack::Response::Raw.new status, headers
+</div><div class="line">          commit_session(req, res)
+</div><div class="line">          [status, headers, body]
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-48">
+      <div class="info">
+        Extracted source (around line <strong>#268</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>266</span>
+<span>267</span>
+<span>268</span>
+<span>269</span>
+<span>270</span>
+<span>271</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">        def call(env)
+</div><div class="line active">          <span class="error_highlight">context</span>(env)
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        def context(env, app = @app)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-49">
+      <div class="info">
+        Extracted source (around line <strong>#704</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>702</span>
+<span>703</span>
+<span>704</span>
+<span>705</span>
+<span>706</span>
+<span>707</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def call(env)
+</div><div class="line">      request = ActionDispatch::Request.new(env)
+</div><div class="line active">      response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">      if request.have_cookie_jar?
+</div><div class="line">        cookie_jar = request.cookie_jar
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-50">
+      <div class="info">
+        Extracted source (around line <strong>#674</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>672</span>
+<span>673</span>
+<span>674</span>
+<span>675</span>
+<span>676</span>
+<span>677</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        end
+</div><div class="line">
+</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-51">
+      <div class="info">
+        Extracted source (around line <strong>#31</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+<span>33</span>
+<span>34</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      error = nil
+</div><div class="line">      result = run_callbacks :call do
+</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      rescue =&gt; error
+</div><div class="line">      end
+</div><div class="line">      raise error if error
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-52">
+      <div class="info">
+        Extracted source (around line <strong>#101</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>99</span>
+<span>100</span>
+<span>101</span>
+<span>102</span>
+<span>103</span>
+<span>104</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      if callbacks.empty?
+</div><div class="line active">        yield if block_given?
+</div><div class="line">      else
+</div><div class="line">        env = Filters::Environment.new(self, false, nil)
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-53">
+      <div class="info">
+        Extracted source (around line <strong>#30</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+<span>33</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def call(env)
+</div><div class="line">      error = nil
+</div><div class="line active">      result = <span class="error_highlight">run_callbacks</span> :call do
+</div><div class="line">        @app.call(env)
+</div><div class="line">      rescue =&gt; error
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-54">
+      <div class="info">
+        Extracted source (around line <strong>#16</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>14</span>
+<span>15</span>
+<span>16</span>
+<span>17</span>
+<span>18</span>
+<span>19</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      state = @executor.run!(reset: true)
+</div><div class="line">      begin
+</div><div class="line active">        response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">        if env[&quot;action_dispatch.report_exception&quot;]
+</div><div class="line">          error = env[&quot;action_dispatch.exception&quot;]
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-55">
+      <div class="info">
+        Extracted source (around line <strong>#18</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>16</span>
+<span>17</span>
+<span>18</span>
+<span>19</span>
+<span>20</span>
+<span>21</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def call(env)
+</div><div class="line">      request = ActionDispatch::Request.new(env)
+</div><div class="line active">      return @app<span class="error_highlight">.call</span>(env) unless actionable_request?(request)
+</div><div class="line">
+</div><div class="line">      ActiveSupport::ActionableError.dispatch(request.params[:error].to_s.safe_constantize, request.params[:action])
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-56">
+      <div class="info">
+        Extracted source (around line <strong>#31</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+<span>33</span>
+<span>34</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      _, headers, body = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">      if headers[Constants::X_CASCADE] == &quot;pass&quot;
+</div><div class="line">        body.close if body.respond_to?(:close)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-57">
+      <div class="info">
+        Extracted source (around line <strong>#132</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>130</span>
+<span>131</span>
+<span>132</span>
+<span>133</span>
+<span>134</span>
+<span>135</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      def call_app(env)
+</div><div class="line active">        @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      rescue =&gt; e
+</div><div class="line">        throw :app_exception, e
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-58">
+      <div class="info">
+        Extracted source (around line <strong>#28</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">
+</div><div class="line active">        status, headers, body = <span class="error_highlight">call_app</span>(env)
+</div><div class="line">
+</div><div class="line">        if (session = Session.from(Thread.current)) &amp;&amp; acceptable_content_type?(headers)
+</div><div class="line">          headers[&quot;x-web-console-session-id&quot;] = session.id
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-59">
+      <div class="info">
+        Extracted source (around line <strong>#17</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>15</span>
+<span>16</span>
+<span>17</span>
+<span>18</span>
+<span>19</span>
+<span>20</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      app_exception = <span class="error_highlight">catch</span> :app_exception do
+</div><div class="line">        request = create_regular_or_whiny_request(env)
+</div><div class="line">        return call_app(env) unless request.permitted?
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-60">
+      <div class="info">
+        Extracted source (around line <strong>#17</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>15</span>
+<span>16</span>
+<span>17</span>
+<span>18</span>
+<span>19</span>
+<span>20</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      app_exception = <span class="error_highlight">catch</span> :app_exception do
+</div><div class="line">        request = create_regular_or_whiny_request(env)
+</div><div class="line">        return call_app(env) unless request.permitted?
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-61">
+      <div class="info">
+        Extracted source (around line <strong>#32</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>30</span>
+<span>31</span>
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">    rescue Exception =&gt; exception
+</div><div class="line">      request = ActionDispatch::Request.new env
+</div><div class="line">      backtrace_cleaner = request.get_header(&quot;action_dispatch.backtrace_cleaner&quot;)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-62">
+      <div class="info">
+        Extracted source (around line <strong>#41</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>39</span>
+<span>40</span>
+<span>41</span>
+<span>42</span>
+<span>43</span>
+<span>44</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">          logger.info { started_request_message(request) }
+</div><div class="line active">          status, headers, body = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">          body = ::Rack::BodyProxy.new(body) { finish_request_instrumentation(handle, logger_tag_pop_count) }
+</div><div class="line">
+</div><div class="line">          if response.frozen?
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-63">
+      <div class="info">
+        Extracted source (around line <strong>#29</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        end
+</div><div class="line">
+</div><div class="line active">        <span class="error_highlight">call_app</span>(request, env)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-64">
+      <div class="info">
+        Extracted source (around line <strong>#17</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>15</span>
+<span>16</span>
+<span>17</span>
+<span>18</span>
+<span>19</span>
+<span>20</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          ::Rails.logger.silence { @app.call(env) }
+</div><div class="line">        else
+</div><div class="line active">          @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">        end
+</div><div class="line">      end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-65">
+      <div class="info">
+        Extracted source (around line <strong>#96</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>94</span>
+<span>95</span>
+<span>96</span>
+<span>97</span>
+<span>98</span>
+<span>99</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      req = ActionDispatch::Request.new env
+</div><div class="line">      req.remote_ip = GetIp.new(req, check_ip, proxies)
+</div><div class="line active">      @app<span class="error_highlight">.call</span>(req.env)
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    # The GetIp class exists as a way to defer processing of the request data into
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-66">
+      <div class="info">
+        Extracted source (around line <strong>#33</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>31</span>
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+<span>36</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      req = ActionDispatch::Request.new env
+</div><div class="line">      req.request_id = make_request_id(req.headers[@header])
+</div><div class="line active">      @app<span class="error_highlight">.call</span>(env).tap { |_status, headers, _body| headers[@header] = req.request_id }
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-67">
+      <div class="info">
+        Extracted source (around line <strong>#28</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      end
+</div><div class="line">
+</div><div class="line active">      @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    def method_override(env)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-68">
+      <div class="info">
+        Extracted source (around line <strong>#24</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>22</span>
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def call(env)
+</div><div class="line">      start_time = Utils.clock_time
+</div><div class="line active">      _, headers, _ = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">      request_time = Utils.clock_time - start_time
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-69">
+      <div class="info">
+        Extracted source (around line <strong>#29</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          def call(env)
+</div><div class="line">            LocalCacheRegistry.set_cache_for(local_cache_key, LocalStore.new)
+</div><div class="line active">            response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">            response[2] = ::Rack::BodyProxy.new(response[2]) do
+</div><div class="line">              LocalCacheRegistry.set_cache_for(local_cache_key, nil)
+</div><div class="line">            end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-70">
+      <div class="info">
+        Extracted source (around line <strong>#61</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>59</span>
+<span>60</span>
+<span>61</span>
+<span>62</span>
+<span>63</span>
+<span>64</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      response = nil
+</div><div class="line">      events = @subscriber.collect_events do
+</div><div class="line active">        response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      headers = response[1]
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-71">
+      <div class="info">
+        Extracted source (around line <strong>#26</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        events = []
+</div><div class="line">        ActiveSupport::IsolatedExecutionState[KEY] = events
+</div><div class="line active">        yield
+</div><div class="line">        events
+</div><div class="line">      ensure
+</div><div class="line">        ActiveSupport::IsolatedExecutionState.delete(KEY)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-72">
+      <div class="info">
+        Extracted source (around line <strong>#60</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>58</span>
+<span>59</span>
+<span>60</span>
+<span>61</span>
+<span>62</span>
+<span>63</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def call(env)
+</div><div class="line">      response = nil
+</div><div class="line active">      events = @subscriber<span class="error_highlight">.collect_events</span> do
+</div><div class="line">        response = @app.call(env)
+</div><div class="line">      end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-73">
+      <div class="info">
+        Extracted source (around line <strong>#16</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>14</span>
+<span>15</span>
+<span>16</span>
+<span>17</span>
+<span>18</span>
+<span>19</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      state = @executor.run!(reset: true)
+</div><div class="line">      begin
+</div><div class="line active">        response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">        if env[&quot;action_dispatch.report_exception&quot;]
+</div><div class="line">          error = env[&quot;action_dispatch.exception&quot;]
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-74">
+      <div class="info">
+        Extracted source (around line <strong>#27</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      @file_handler.attempt(env) || @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">    end
+</div><div class="line">  end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-75">
+      <div class="info">
+        Extracted source (around line <strong>#131</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>129</span>
+<span>130</span>
+<span>131</span>
+<span>132</span>
+<span>133</span>
+<span>134</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def call(env)
+</div><div class="line active">      _, headers, body = response = @app<span class="error_highlight">.call</span>(env)
+</div><div class="line">
+</div><div class="line">      if body.respond_to?(:to_path)
+</div><div class="line">        case type = variation(env)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-76">
+      <div class="info">
+        Extracted source (around line <strong>#535</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>533</span>
+<span>534</span>
+<span>535</span>
+<span>536</span>
+<span>537</span>
+<span>538</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    def call(env)
+</div><div class="line">      req = build_request env
+</div><div class="line active">      app<span class="error_highlight">.call</span> req.env
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    # Defines additional Rack env configuration that is added on each call.
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-77">
+      <div class="info">
+        Extracted source (around line <strong>#360</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>358</span>
+<span>359</span>
+<span>360</span>
+<span>361</span>
+<span>362</span>
+<span>363</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        env[&#39;HTTP_COOKIE&#39;] ||= cookie_jar.for(uri)
+</div><div class="line">        @last_request = Rack::Request.new(env)
+</div><div class="line active">        status, headers, body = @app<span class="error_highlight">.call</span>(env).to_a
+</div><div class="line">
+</div><div class="line">        @last_response = MockResponse.new(status, headers, body, env[&#39;rack.errors&#39;].flush)
+</div><div class="line">        close_body(body)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-78">
+      <div class="info">
+        Extracted source (around line <strong>#153</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>151</span>
+<span>152</span>
+<span>153</span>
+<span>154</span>
+<span>155</span>
+<span>156</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        uri = parse_uri(uri, env)
+</div><div class="line">        env = env_for(uri, env)
+</div><div class="line active">        <span class="error_highlight">process_request</span>(uri, env, &amp;block)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      # Issue a request using the given HTTP verb for the given URI, with optional
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-79">
+      <div class="info">
+        Extracted source (around line <strong>#287</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>285</span>
+<span>286</span>
+<span>287</span>
+<span>288</span>
+<span>289</span>
+<span>290</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        # NOTE: rack-test v0.5 doesn&#39;t build a default uri correctly Make sure requested
+</div><div class="line">        # path is always a full URI.
+</div><div class="line active">        session<span class="error_highlight">.request</span>(build_full_uri(path, request_env), request_env)
+</div><div class="line">
+</div><div class="line">        @request_count += 1
+</div><div class="line">        @request = ActionDispatch::Request.new(session.last_request.env)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-80">
+      <div class="info">
+        Extracted source (around line <strong>#25</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # ActionDispatch::Integration::Session#process for more details.
+</div><div class="line">      def post(path, **args)
+</div><div class="line active">        <span class="error_highlight">process</span>(:post, path, **args)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      # Performs a PATCH request with the given parameters. See
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-81">
+      <div class="info">
+        Extracted source (around line <strong>#378</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>376</span>
+<span>377</span>
+<span>378</span>
+<span>379</span>
+<span>380</span>
+<span>381</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            #{reset_html_document}
+</div><div class="line">
+</div><div class="line active">            result = integration_session.#{method}(...)
+</div><div class="line">            copy_session_variables!
+</div><div class="line">            result
+</div><div class="line">          end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-82">
+      <div class="info">
+        Extracted source (around line <strong>#40</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>38</span>
+<span>39</span>
+<span>40</span>
+<span>41</span>
+<span>42</span>
+<span>43</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      it &quot;投稿が作成されること&quot; do
+</div><div class="line">        expect {
+</div><div class="line active">          <span class="error_highlight">post</span> posts_path, params: post_params
+</div><div class="line">        }.to change(Post, :count).by(1)
+</div><div class="line">      rescue RSpec::Expectations::ExpectationNotMetError =&gt; e
+</div><div class="line">        puts &quot;Response Status: #{response.status}&quot;
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-83">
+      <div class="info">
+        Extracted source (around line <strong>#395</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>393</span>
+<span>394</span>
+<span>395</span>
+<span>396</span>
+<span>397</span>
+<span>398</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">          return false unless Proc === event_proc
+</div><div class="line active">          event_proc<span class="error_highlight">.call</span>
+</div><div class="line">
+</div><div class="line">          @actual_after = evaluate_value_proc
+</div><div class="line">          @actual_hash = @actual_after.hash
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-84">
+      <div class="info">
+        Extracted source (around line <strong>#146</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>144</span>
+<span>145</span>
+<span>146</span>
+<span>147</span>
+<span>148</span>
+<span>149</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        def matches?(event_proc)
+</div><div class="line">          @event_proc = event_proc
+</div><div class="line active">          @change_details<span class="error_highlight">.perform_change</span>(event_proc) &amp;&amp; @comparer.call(@change_details.actual_delta)
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        # @private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-85">
+      <div class="info">
+        Extracted source (around line <strong>#50</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>48</span>
+<span>49</span>
+<span>50</span>
+<span>51</span>
+<span>52</span>
+<span>53</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          return ::RSpec::Matchers::BuiltIn::PositiveOperatorMatcher.new(actual) unless initial_matcher
+</div><div class="line">
+</div><div class="line active">          match_result = matcher<span class="error_highlight">.matches?</span>(actual, &amp;block)
+</div><div class="line">          if custom_message &amp;&amp; match_result.respond_to?(:error_generator)
+</div><div class="line">            match_result.error_generator.opts[:message] = custom_message
+</div><div class="line">          end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-86">
+      <div class="info">
+        Extracted source (around line <strong>#26</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        check_message(message)
+</div><div class="line">        matcher = modern_matcher_from(matcher)
+</div><div class="line active">        yield matcher
+</div><div class="line">      ensure
+</div><div class="line">        ::RSpec::Matchers.last_expectation_handler = handler
+</div><div class="line">        ::RSpec::Matchers.last_matcher = matcher
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-87">
+      <div class="info">
+        Extracted source (around line <strong>#47</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>45</span>
+<span>46</span>
+<span>47</span>
+<span>48</span>
+<span>49</span>
+<span>50</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">    class PositiveExpectationHandler
+</div><div class="line">      def self.handle_matcher(actual, initial_matcher, custom_message=nil, &amp;block)
+</div><div class="line active">        ExpectationHelper<span class="error_highlight">.with_matcher</span>(self, initial_matcher, custom_message) do |matcher|
+</div><div class="line">          return ::RSpec::Matchers::BuiltIn::PositiveOperatorMatcher.new(actual) unless initial_matcher
+</div><div class="line">
+</div><div class="line">          match_result = matcher.matches?(actual, &amp;block)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-88">
+      <div class="info">
+        Extracted source (around line <strong>#65</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>63</span>
+<span>64</span>
+<span>65</span>
+<span>66</span>
+<span>67</span>
+<span>68</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        def to(matcher=nil, message=nil, &amp;block)
+</div><div class="line">          prevent_operator_matchers(:to) unless matcher
+</div><div class="line active">          RSpec::Expectations::PositiveExpectationHandler<span class="error_highlight">.handle_matcher</span>(target, matcher, message, &amp;block)
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        # Runs the given expectation, passing if `matcher` returns false.
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-89">
+      <div class="info">
+        Extracted source (around line <strong>#139</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>137</span>
+<span>138</span>
+<span>139</span>
+<span>140</span>
+<span>141</span>
+<span>142</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def to(matcher, message=nil, &amp;block)
+</div><div class="line">        enforce_block_expectation(matcher)
+</div><div class="line active">        super
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">      def not_to(matcher, message=nil, &amp;block)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-90">
+      <div class="info">
+        Extracted source (around line <strong>#41</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>39</span>
+<span>40</span>
+<span>41</span>
+<span>42</span>
+<span>43</span>
+<span>44</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        expect {
+</div><div class="line">          post posts_path, params: post_params
+</div><div class="line active">        }<span class="error_highlight">.to</span> change(Post, :count).by(1)
+</div><div class="line">      rescue RSpec::Expectations::ExpectationNotMetError =&gt; e
+</div><div class="line">        puts &quot;Response Status: #{response.status}&quot;
+</div><div class="line">        puts &quot;Response Body: #{response.body}&quot;
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-91">
+      <div class="info">
+        Extracted source (around line <strong>#263</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>261</span>
+<span>262</span>
+<span>263</span>
+<span>264</span>
+<span>265</span>
+<span>266</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">                run_before_example
+</div><div class="line">                RSpec.current_scope = :example
+</div><div class="line active">                @example_group_instance<span class="error_highlight">.instance_exec</span>(self, &amp;@example_block)
+</div><div class="line">
+</div><div class="line">                if pending?
+</div><div class="line">                  Pending.mark_fixed! self
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-92">
+      <div class="info">
+        Extracted source (around line <strong>#263</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>261</span>
+<span>262</span>
+<span>263</span>
+<span>264</span>
+<span>265</span>
+<span>266</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">                run_before_example
+</div><div class="line">                RSpec.current_scope = :example
+</div><div class="line active">                @example_group_instance<span class="error_highlight">.instance_exec</span>(self, &amp;@example_block)
+</div><div class="line">
+</div><div class="line">                if pending?
+</div><div class="line">                  Pending.mark_fixed! self
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-93">
+      <div class="info">
+        Extracted source (around line <strong>#511</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>509</span>
+<span>510</span>
+<span>511</span>
+<span>512</span>
+<span>513</span>
+<span>514</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        singleton_context_hooks_host = example_group_instance.singleton_class
+</div><div class="line">        singleton_context_hooks_host.run_before_context_hooks(example_group_instance)
+</div><div class="line active">        with_around_example_hooks { yield }
+</div><div class="line">      ensure
+</div><div class="line">        singleton_context_hooks_host.run_after_context_hooks(example_group_instance)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-94">
+      <div class="info">
+        Extracted source (around line <strong>#468</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>466</span>
+<span>467</span>
+<span>468</span>
+<span>469</span>
+<span>470</span>
+<span>471</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def with_around_example_hooks
+</div><div class="line">        RSpec.current_scope = :before_example_hook
+</div><div class="line active">        hooks.run(:around, :example, self) { yield }
+</div><div class="line">      rescue Support::AllExceptionsExceptOnesWeMustNotRescue =&gt; e
+</div><div class="line">        set_exception(e)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-95">
+      <div class="info">
+        Extracted source (around line <strong>#486</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>484</span>
+<span>485</span>
+<span>486</span>
+<span>487</span>
+<span>488</span>
+<span>489</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            when :before then run_example_hooks_for(example_or_group, :before, :reverse_each)
+</div><div class="line">            when :after  then run_example_hooks_for(example_or_group, :after,  :each)
+</div><div class="line active">            when :around then run_around_example_hooks_for(example_or_group) { yield }
+</div><div class="line">            end
+</div><div class="line">          end
+</div><div class="line">        end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-96">
+      <div class="info">
+        Extracted source (around line <strong>#626</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>624</span>
+<span>625</span>
+<span>626</span>
+<span>627</span>
+<span>628</span>
+<span>629</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          return yield if hooks.empty? # exit early to avoid the extra allocation cost of `Example::Procsy`
+</div><div class="line">
+</div><div class="line active">          initial_procsy = Example::Procsy.new(example) { yield }
+</div><div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
+</div><div class="line">            procsy.wrap { around_hook.execute_with(example, procsy) }
+</div><div class="line">          end.call
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-97">
+      <div class="info">
+        Extracted source (around line <strong>#352</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>350</span>
+<span>351</span>
+<span>352</span>
+<span>353</span>
+<span>354</span>
+<span>355</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        def call(*args, &amp;block)
+</div><div class="line">          @executed = true
+</div><div class="line active">          @proc<span class="error_highlight">.call</span>(*args, &amp;block)
+</div><div class="line">        end
+</div><div class="line">        alias run call
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-98">
+      <div class="info">
+        Extracted source (around line <strong>#75</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>73</span>
+<span>74</span>
+<span>75</span>
+<span>76</span>
+<span>77</span>
+<span>78</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        group.around do |example|
+</div><div class="line">          before_setup
+</div><div class="line active">          example<span class="error_highlight">.run</span>
+</div><div class="line">          after_teardown
+</div><div class="line">        end
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-99">
+      <div class="info">
+        Extracted source (around line <strong>#457</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>455</span>
+<span>456</span>
+<span>457</span>
+<span>458</span>
+<span>459</span>
+<span>460</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # @private
+</div><div class="line">      def instance_exec(*args, &amp;block)
+</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">    private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-100">
+      <div class="info">
+        Extracted source (around line <strong>#457</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>455</span>
+<span>456</span>
+<span>457</span>
+<span>458</span>
+<span>459</span>
+<span>460</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # @private
+</div><div class="line">      def instance_exec(*args, &amp;block)
+</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">    private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-101">
+      <div class="info">
+        Extracted source (around line <strong>#390</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>388</span>
+<span>389</span>
+<span>390</span>
+<span>391</span>
+<span>392</span>
+<span>393</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      class AroundHook &lt; Hook
+</div><div class="line">        def execute_with(example, procsy)
+</div><div class="line active">          example<span class="error_highlight">.instance_exec</span>(procsy, &amp;block)
+</div><div class="line">          return if procsy.executed?
+</div><div class="line">          Pending.mark_skipped!(example,
+</div><div class="line">                                &quot;#{hook_description} did not execute the example&quot;)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-102">
+      <div class="info">
+        Extracted source (around line <strong>#628</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>626</span>
+<span>627</span>
+<span>628</span>
+<span>629</span>
+<span>630</span>
+<span>631</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          initial_procsy = Example::Procsy.new(example) { yield }
+</div><div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
+</div><div class="line active">            procsy.wrap { around_hook<span class="error_highlight">.execute_with</span>(example, procsy) }
+</div><div class="line">          end.call
+</div><div class="line">        end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-103">
+      <div class="info">
+        Extracted source (around line <strong>#352</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>350</span>
+<span>351</span>
+<span>352</span>
+<span>353</span>
+<span>354</span>
+<span>355</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        def call(*args, &amp;block)
+</div><div class="line">          @executed = true
+</div><div class="line active">          @proc<span class="error_highlight">.call</span>(*args, &amp;block)
+</div><div class="line">        end
+</div><div class="line">        alias run call
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-104">
+      <div class="info">
+        Extracted source (around line <strong>#39</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>37</span>
+<span>38</span>
+<span>39</span>
+<span>40</span>
+<span>41</span>
+<span>42</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">  config.around(:each) do |example|
+</div><div class="line active">    example<span class="error_highlight">.run</span>
+</div><div class="line">    WebMock.reset!
+</div><div class="line">  end
+</div><div class="line">}
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-105">
+      <div class="info">
+        Extracted source (around line <strong>#457</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>455</span>
+<span>456</span>
+<span>457</span>
+<span>458</span>
+<span>459</span>
+<span>460</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # @private
+</div><div class="line">      def instance_exec(*args, &amp;block)
+</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">    private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-106">
+      <div class="info">
+        Extracted source (around line <strong>#457</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>455</span>
+<span>456</span>
+<span>457</span>
+<span>458</span>
+<span>459</span>
+<span>460</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # @private
+</div><div class="line">      def instance_exec(*args, &amp;block)
+</div><div class="line active">        @example_group_instance<span class="error_highlight">.instance_exec</span>(*args, &amp;block)
+</div><div class="line">      end
+</div><div class="line">
+</div><div class="line">    private
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-107">
+      <div class="info">
+        Extracted source (around line <strong>#390</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>388</span>
+<span>389</span>
+<span>390</span>
+<span>391</span>
+<span>392</span>
+<span>393</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      class AroundHook &lt; Hook
+</div><div class="line">        def execute_with(example, procsy)
+</div><div class="line active">          example<span class="error_highlight">.instance_exec</span>(procsy, &amp;block)
+</div><div class="line">          return if procsy.executed?
+</div><div class="line">          Pending.mark_skipped!(example,
+</div><div class="line">                                &quot;#{hook_description} did not execute the example&quot;)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-108">
+      <div class="info">
+        Extracted source (around line <strong>#628</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>626</span>
+<span>627</span>
+<span>628</span>
+<span>629</span>
+<span>630</span>
+<span>631</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          initial_procsy = Example::Procsy.new(example) { yield }
+</div><div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
+</div><div class="line active">            procsy.wrap { around_hook<span class="error_highlight">.execute_with</span>(example, procsy) }
+</div><div class="line">          end.call
+</div><div class="line">        end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-109">
+      <div class="info">
+        Extracted source (around line <strong>#352</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>350</span>
+<span>351</span>
+<span>352</span>
+<span>353</span>
+<span>354</span>
+<span>355</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        def call(*args, &amp;block)
+</div><div class="line">          @executed = true
+</div><div class="line active">          @proc<span class="error_highlight">.call</span>(*args, &amp;block)
+</div><div class="line">        end
+</div><div class="line">        alias run call
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-110">
+      <div class="info">
+        Extracted source (around line <strong>#629</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>627</span>
+<span>628</span>
+<span>629</span>
+<span>630</span>
+<span>631</span>
+<span>632</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          hooks.inject(initial_procsy) do |procsy, around_hook|
+</div><div class="line">            procsy.wrap { around_hook.execute_with(example, procsy) }
+</div><div class="line active">          end<span class="error_highlight">.call</span>
+</div><div class="line">        end
+</div><div class="line">
+</div><div class="line">        if respond_to?(:singleton_class) &amp;&amp; singleton_class.ancestors.include?(singleton_class)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-111">
+      <div class="info">
+        Extracted source (around line <strong>#486</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>484</span>
+<span>485</span>
+<span>486</span>
+<span>487</span>
+<span>488</span>
+<span>489</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            when :before then run_example_hooks_for(example_or_group, :before, :reverse_each)
+</div><div class="line">            when :after  then run_example_hooks_for(example_or_group, :after,  :each)
+</div><div class="line active">            when :around then <span class="error_highlight">run_around_example_hooks_for</span>(example_or_group) { yield }
+</div><div class="line">            end
+</div><div class="line">          end
+</div><div class="line">        end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-112">
+      <div class="info">
+        Extracted source (around line <strong>#468</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>466</span>
+<span>467</span>
+<span>468</span>
+<span>469</span>
+<span>470</span>
+<span>471</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def with_around_example_hooks
+</div><div class="line">        RSpec.current_scope = :before_example_hook
+</div><div class="line active">        hooks<span class="error_highlight">.run</span>(:around, :example, self) { yield }
+</div><div class="line">      rescue Support::AllExceptionsExceptOnesWeMustNotRescue =&gt; e
+</div><div class="line">        set_exception(e)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-113">
+      <div class="info">
+        Extracted source (around line <strong>#511</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>509</span>
+<span>510</span>
+<span>511</span>
+<span>512</span>
+<span>513</span>
+<span>514</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        singleton_context_hooks_host = example_group_instance.singleton_class
+</div><div class="line">        singleton_context_hooks_host.run_before_context_hooks(example_group_instance)
+</div><div class="line active">        <span class="error_highlight">with_around_example_hooks</span> { yield }
+</div><div class="line">      ensure
+</div><div class="line">        singleton_context_hooks_host.run_after_context_hooks(example_group_instance)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-114">
+      <div class="info">
+        Extracted source (around line <strong>#259</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>257</span>
+<span>258</span>
+<span>259</span>
+<span>260</span>
+<span>261</span>
+<span>262</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            Pending.mark_pending! self, skip
+</div><div class="line">          elsif !RSpec.configuration.dry_run?
+</div><div class="line active">            <span class="error_highlight">with_around_and_singleton_context_hooks</span> do
+</div><div class="line">              begin
+</div><div class="line">                run_before_example
+</div><div class="line">                RSpec.current_scope = :example
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-115">
+      <div class="info">
+        Extracted source (around line <strong>#653</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>651</span>
+<span>652</span>
+<span>653</span>
+<span>654</span>
+<span>655</span>
+<span>656</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          instance = new(example.inspect_output)
+</div><div class="line">          set_ivars(instance, before_context_ivars)
+</div><div class="line active">          succeeded = example<span class="error_highlight">.run</span>(instance, reporter)
+</div><div class="line">          if !succeeded &amp;&amp; reporter.fail_fast_limit_met?
+</div><div class="line">            RSpec.world.wants_to_quit = true
+</div><div class="line">          end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-116">
+      <div class="info">
+        Extracted source (around line <strong>#649</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>647</span>
+<span>648</span>
+<span>649</span>
+<span>650</span>
+<span>651</span>
+<span>652</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # @private
+</div><div class="line">      def self.run_examples(reporter)
+</div><div class="line active">        ordering_strategy.order(filtered_examples)<span class="error_highlight">.map</span> do |example|
+</div><div class="line">          next if RSpec.world.wants_to_quit
+</div><div class="line">          instance = new(example.inspect_output)
+</div><div class="line">          set_ivars(instance, before_context_ivars)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-117">
+      <div class="info">
+        Extracted source (around line <strong>#649</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>647</span>
+<span>648</span>
+<span>649</span>
+<span>650</span>
+<span>651</span>
+<span>652</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      # @private
+</div><div class="line">      def self.run_examples(reporter)
+</div><div class="line active">        ordering_strategy.order(filtered_examples)<span class="error_highlight">.map</span> do |example|
+</div><div class="line">          next if RSpec.world.wants_to_quit
+</div><div class="line">          instance = new(example.inspect_output)
+</div><div class="line">          set_ivars(instance, before_context_ivars)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-118">
+      <div class="info">
+        Extracted source (around line <strong>#614</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>612</span>
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          RSpec.current_scope = :before_context_hook
+</div><div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line active">          result_for_this_group = <span class="error_highlight">run_examples</span>(reporter)
+</div><div class="line">          results_for_descendants = ordering_strategy.order(children).map { |child| child.run(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-119">
+      <div class="info">
+        Extracted source (around line <strong>#615</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+<span>618</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line">          result_for_this_group = run_examples(reporter)
+</div><div class="line active">          results_for_descendants = ordering_strategy.order(children).map { |child| child<span class="error_highlight">.run</span>(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-120">
+      <div class="info">
+        Extracted source (around line <strong>#615</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+<span>618</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line">          result_for_this_group = run_examples(reporter)
+</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-121">
+      <div class="info">
+        Extracted source (around line <strong>#615</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+<span>618</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line">          result_for_this_group = run_examples(reporter)
+</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-122">
+      <div class="info">
+        Extracted source (around line <strong>#615</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+<span>618</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line">          result_for_this_group = run_examples(reporter)
+</div><div class="line active">          results_for_descendants = ordering_strategy.order(children).map { |child| child<span class="error_highlight">.run</span>(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-123">
+      <div class="info">
+        Extracted source (around line <strong>#615</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+<span>618</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line">          result_for_this_group = run_examples(reporter)
+</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-124">
+      <div class="info">
+        Extracted source (around line <strong>#615</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>613</span>
+<span>614</span>
+<span>615</span>
+<span>616</span>
+<span>617</span>
+<span>618</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          run_before_context_hooks(new(&#39;before(:context) hook&#39;)) if should_run_context_hooks
+</div><div class="line">          result_for_this_group = run_examples(reporter)
+</div><div class="line active">          results_for_descendants = ordering_strategy.order(children)<span class="error_highlight">.map</span> { |child| child.run(reporter) }.all?
+</div><div class="line">          result_for_this_group &amp;&amp; results_for_descendants
+</div><div class="line">        rescue Pending::SkipDeclaredInExample =&gt; ex
+</div><div class="line">          for_filtered_examples(reporter) { |example| example.skip_with_exception(reporter, ex) }
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-125">
+      <div class="info">
+        Extracted source (around line <strong>#121</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>119</span>
+<span>120</span>
+<span>121</span>
+<span>122</span>
+<span>123</span>
+<span>124</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            end
+</div><div class="line">
+</div><div class="line active">            example_groups.map { |g| g<span class="error_highlight">.run</span>(reporter) }.all?
+</div><div class="line">          end
+</div><div class="line">        end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-126">
+      <div class="info">
+        Extracted source (around line <strong>#121</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>119</span>
+<span>120</span>
+<span>121</span>
+<span>122</span>
+<span>123</span>
+<span>124</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            end
+</div><div class="line">
+</div><div class="line active">            example_groups<span class="error_highlight">.map</span> { |g| g.run(reporter) }.all?
+</div><div class="line">          end
+</div><div class="line">        end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-127">
+      <div class="info">
+        Extracted source (around line <strong>#121</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>119</span>
+<span>120</span>
+<span>121</span>
+<span>122</span>
+<span>123</span>
+<span>124</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">            end
+</div><div class="line">
+</div><div class="line active">            example_groups<span class="error_highlight">.map</span> { |g| g.run(reporter) }.all?
+</div><div class="line">          end
+</div><div class="line">        end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-128">
+      <div class="info">
+        Extracted source (around line <strong>#2097</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>2095</span>
+<span>2096</span>
+<span>2097</span>
+<span>2098</span>
+<span>2099</span>
+<span>2100</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          RSpec.current_scope = :before_suite_hook
+</div><div class="line">          run_suite_hooks(&quot;a `before(:suite)` hook&quot;, @before_suite_hooks)
+</div><div class="line active">          yield
+</div><div class="line">        ensure
+</div><div class="line">          RSpec.current_scope = :after_suite_hook
+</div><div class="line">          run_suite_hooks(&quot;an `after(:suite)` hook&quot;, @after_suite_hooks)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-129">
+      <div class="info">
+        Extracted source (around line <strong>#116</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>114</span>
+<span>115</span>
+<span>116</span>
+<span>117</span>
+<span>118</span>
+<span>119</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        examples_count = @world.example_count(example_groups)
+</div><div class="line">        examples_passed = @configuration.reporter.report(examples_count) do |reporter|
+</div><div class="line active">          @configuration<span class="error_highlight">.with_suite_hooks</span> do
+</div><div class="line">            if examples_count == 0 &amp;&amp; @configuration.fail_if_no_examples
+</div><div class="line">              return @configuration.failure_exit_code
+</div><div class="line">            end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-130">
+      <div class="info">
+        Extracted source (around line <strong>#74</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>72</span>
+<span>73</span>
+<span>74</span>
+<span>75</span>
+<span>76</span>
+<span>77</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      start(expected_example_count)
+</div><div class="line">      begin
+</div><div class="line active">        yield self
+</div><div class="line">      ensure
+</div><div class="line">        finish
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-131">
+      <div class="info">
+        Extracted source (around line <strong>#115</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>113</span>
+<span>114</span>
+<span>115</span>
+<span>116</span>
+<span>117</span>
+<span>118</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def run_specs(example_groups)
+</div><div class="line">        examples_count = @world.example_count(example_groups)
+</div><div class="line active">        examples_passed = @configuration.reporter<span class="error_highlight">.report</span>(examples_count) do |reporter|
+</div><div class="line">          @configuration.with_suite_hooks do
+</div><div class="line">            if examples_count == 0 &amp;&amp; @configuration.fail_if_no_examples
+</div><div class="line">              return @configuration.failure_exit_code
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-132">
+      <div class="info">
+        Extracted source (around line <strong>#89</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>87</span>
+<span>88</span>
+<span>89</span>
+<span>90</span>
+<span>91</span>
+<span>92</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">        return @configuration.reporter.exit_early(exit_code) if RSpec.world.wants_to_quit
+</div><div class="line">
+</div><div class="line active">        <span class="error_highlight">run_specs</span>(@world.ordered_example_groups).tap do
+</div><div class="line">          persist_example_statuses
+</div><div class="line">        end
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-133">
+      <div class="info">
+        Extracted source (around line <strong>#71</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>69</span>
+<span>70</span>
+<span>71</span>
+<span>72</span>
+<span>73</span>
+<span>74</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">          options.options[:runner].call(options, err, out)
+</div><div class="line">        else
+</div><div class="line active">          new(options)<span class="error_highlight">.run</span>(err, out)
+</div><div class="line">        end
+</div><div class="line">      end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-134">
+      <div class="info">
+        Extracted source (around line <strong>#45</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>43</span>
+<span>44</span>
+<span>45</span>
+<span>46</span>
+<span>47</span>
+<span>48</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def self.invoke
+</div><div class="line">        disable_autorun!
+</div><div class="line active">        status = <span class="error_highlight">run</span>(ARGV, $stderr, $stdout).to_i
+</div><div class="line">        exit(status) if status != 0
+</div><div class="line">      end
+</div><div class="line">
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-135">
+      <div class="info">
+        Extracted source (around line <strong>#4</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>2</span>
+<span>3</span>
+<span>4</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">require &#39;rspec/core&#39;
+</div><div class="line active">RSpec::Core::Runner<span class="error_highlight">.invoke</span>
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-136">
+      <div class="info">
+        Extracted source (around line <strong>#25</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">if Gem.respond_to?(:activate_bin_path)
+</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;rspec-core&#39;, &#39;rspec&#39;, version)
+</div><div class="line">else
+</div><div class="line">gem &quot;rspec-core&quot;, version
+</div><div class="line">load Gem.bin_path(&quot;rspec-core&quot;, &quot;rspec&quot;, version)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-137">
+      <div class="info">
+        Extracted source (around line <strong>#25</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">if Gem.respond_to?(:activate_bin_path)
+</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;rspec-core&#39;, &#39;rspec&#39;, version)
+</div><div class="line">else
+</div><div class="line">gem &quot;rspec-core&quot;, version
+</div><div class="line">load Gem.bin_path(&quot;rspec-core&quot;, &quot;rspec&quot;, version)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-138">
+      <div class="info">
+        Extracted source (around line <strong>#58</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>56</span>
+<span>57</span>
+<span>58</span>
+<span>59</span>
+<span>60</span>
+<span>61</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      require_relative &quot;../setup&quot;
+</div><div class="line">      TRAPPED_SIGNALS.each {|s| trap(s, &quot;DEFAULT&quot;) }
+</div><div class="line active">      Kernel<span class="error_highlight">.load</span>(file)
+</div><div class="line">    rescue SystemExit, SignalException
+</div><div class="line">      raise
+</div><div class="line">    rescue Exception # rubocop:disable Lint/RescueException
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-139">
+      <div class="info">
+        Extracted source (around line <strong>#58</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>56</span>
+<span>57</span>
+<span>58</span>
+<span>59</span>
+<span>60</span>
+<span>61</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      require_relative &quot;../setup&quot;
+</div><div class="line">      TRAPPED_SIGNALS.each {|s| trap(s, &quot;DEFAULT&quot;) }
+</div><div class="line active">      Kernel<span class="error_highlight">.load</span>(file)
+</div><div class="line">    rescue SystemExit, SignalException
+</div><div class="line">      raise
+</div><div class="line">    rescue Exception # rubocop:disable Lint/RescueException
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-140">
+      <div class="info">
+        Extracted source (around line <strong>#23</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>21</span>
+<span>22</span>
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      if bin_path = Bundler.which(cmd)
+</div><div class="line">        if !Bundler.settings[:disable_exec_load] &amp;&amp; ruby_shebang?(bin_path)
+</div><div class="line active">          return <span class="error_highlight">kernel_load</span>(bin_path, *args)
+</div><div class="line">        end
+</div><div class="line">        kernel_exec(bin_path, *args)
+</div><div class="line">      else
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-141">
+      <div class="info">
+        Extracted source (around line <strong>#492</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>490</span>
+<span>491</span>
+<span>492</span>
+<span>493</span>
+<span>494</span>
+<span>495</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">      require_relative &quot;cli/exec&quot;
+</div><div class="line active">      Exec.new(options, args)<span class="error_highlight">.run</span>
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    map aliases_for(&quot;exec&quot;)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-142">
+      <div class="info">
+        Extracted source (around line <strong>#27</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      elsif public_method?(instance)
+</div><div class="line">        arity = instance.method(name).arity
+</div><div class="line active">        instance<span class="error_highlight">.__send__</span>(name, *args)
+</div><div class="line">      elsif local_method?(instance, :method_missing)
+</div><div class="line">        instance.__send__(:method_missing, name.to_sym, *args)
+</div><div class="line">      else
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-143">
+      <div class="info">
+        Extracted source (around line <strong>#127</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>125</span>
+<span>126</span>
+<span>127</span>
+<span>128</span>
+<span>129</span>
+<span>130</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      unless current.include?(command.name)
+</div><div class="line">        current &lt;&lt; command.name
+</div><div class="line active">        command<span class="error_highlight">.run</span>(self, *args)
+</div><div class="line">      end
+</div><div class="line">    end
+</div><div class="line">    alias_method :invoke_task, :invoke_command
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-144">
+      <div class="info">
+        Extracted source (around line <strong>#392</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>390</span>
+<span>391</span>
+<span>392</span>
+<span>393</span>
+<span>394</span>
+<span>395</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      args = instance.args
+</div><div class="line">      trailing = args[Range.new(arguments.size, -1)]
+</div><div class="line active">      instance<span class="error_highlight">.invoke_command</span>(command, trailing || [])
+</div><div class="line">    end
+</div><div class="line">
+</div><div class="line">    # The banner for this class. You can customize it if you are invoking the
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-145">
+      <div class="info">
+        Extracted source (around line <strong>#34</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>32</span>
+<span>33</span>
+<span>34</span>
+<span>35</span>
+<span>36</span>
+<span>37</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">    def self.dispatch(*)
+</div><div class="line active">      super do |i|
+</div><div class="line">        i.send(:print_command)
+</div><div class="line">        i.send(:warn_on_outdated_bundler)
+</div><div class="line">      end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-146">
+      <div class="info">
+        Extracted source (around line <strong>#485</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>483</span>
+<span>484</span>
+<span>485</span>
+<span>486</span>
+<span>487</span>
+<span>488</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      def start(given_args = ARGV, config = {})
+</div><div class="line">        config[:shell] ||= Bundler::Thor::Base.shell.new
+</div><div class="line active">        <span class="error_highlight">dispatch</span>(nil, given_args.dup, nil, config)
+</div><div class="line">      rescue Bundler::Thor::Error =&gt; e
+</div><div class="line">        config[:debug] || ENV[&quot;THOR_DEBUG&quot;] == &quot;1&quot; ? (raise e) : config[:shell].error(e.message)
+</div><div class="line">        exit(false) if exit_on_failure?
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-147">
+      <div class="info">
+        Extracted source (around line <strong>#28</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>26</span>
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">      check_deprecated_ext_option(ARGV) if ARGV.include?(&quot;--ext&quot;)
+</div><div class="line">
+</div><div class="line active">      super
+</div><div class="line">    ensure
+</div><div class="line">      Bundler::SharedHelpers.print_major_deprecations!
+</div><div class="line">    end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-148">
+      <div class="info">
+        Extracted source (around line <strong>#37</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>35</span>
+<span>36</span>
+<span>37</span>
+<span>38</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">  args = help_flag_used ? Bundler::CLI.reformatted_help_args(ARGV) : ARGV
+</div><div class="line">
+</div><div class="line active">  Bundler::CLI<span class="error_highlight">.start</span>(args, :debug =&gt; true)
+</div><div class="line">end
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-149">
+      <div class="info">
+        Extracted source (around line <strong>#117</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>115</span>
+<span>116</span>
+<span>117</span>
+<span>118</span>
+<span>119</span>
+<span>120</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">  def self.with_friendly_errors
+</div><div class="line">    FriendlyErrors.enable!
+</div><div class="line active">    yield
+</div><div class="line">  rescue SignalException
+</div><div class="line">    raise
+</div><div class="line">  rescue Exception =&gt; e # rubocop:disable Lint/RescueException
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-150">
+      <div class="info">
+        Extracted source (around line <strong>#29</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>27</span>
+<span>28</span>
+<span>29</span>
+<span>30</span>
+<span>31</span>
+<span>32</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">require &quot;bundler/friendly_errors&quot;
+</div><div class="line">
+</div><div class="line active">Bundler<span class="error_highlight">.with_friendly_errors</span> do
+</div><div class="line">  require &quot;bundler/cli&quot;
+</div><div class="line">
+</div><div class="line">  # Allow any command to use --help flag to show help for that command
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-151">
+      <div class="info">
+        Extracted source (around line <strong>#25</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">if Gem.respond_to?(:activate_bin_path)
+</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;bundler&#39;, &#39;bundle&#39;, version)
+</div><div class="line">else
+</div><div class="line">gem &quot;bundler&quot;, version
+</div><div class="line">load Gem.bin_path(&quot;bundler&quot;, &quot;bundle&quot;, version)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+    <div class="source hidden" id="frame-source-0-152">
+      <div class="info">
+        Extracted source (around line <strong>#25</strong>):
+      </div>
+      <div class="data">
+        <table cellpadding="0" cellspacing="0" class="lines">
+          <tr>
+            <td>
+              <pre class="line_numbers">
+<span>23</span>
+<span>24</span>
+<span>25</span>
+<span>26</span>
+<span>27</span>
+<span>28</span>
+              </pre>
+            </td>
+<td width="100%">
+<pre>
+<div class="line">
+</div><div class="line">if Gem.respond_to?(:activate_bin_path)
+</div><div class="line active"><span class="error_highlight">load</span> Gem.activate_bin_path(&#39;bundler&#39;, &#39;bundle&#39;, version)
+</div><div class="line">else
+</div><div class="line">gem &quot;bundler&quot;, version
+</div><div class="line">load Gem.bin_path(&quot;bundler&quot;, &quot;bundle&quot;, version)
+</div>
+</pre>
+</td>
+          </tr>
+        </table>
+      </div>
+    </div>
+<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb -->
+  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb -->
+<p><code>Rails.root: /rails</code></p>
+
+<div id="traces-0">
+    <a href="#" onclick="hide(&#39;Framework-Trace-0&#39;);hide(&#39;Full-Trace-0&#39;);show(&#39;Application-Trace-0&#39;);; return false;">Application Trace</a> |
+    <a href="#" onclick="hide(&#39;Application-Trace-0&#39;);hide(&#39;Full-Trace-0&#39;);show(&#39;Framework-Trace-0&#39;);; return false;">Framework Trace</a> |
+    <a href="#" onclick="hide(&#39;Application-Trace-0&#39;);hide(&#39;Framework-Trace-0&#39;);show(&#39;Full-Trace-0&#39;);; return false;">Full Trace</a> 
+
+    <div id="Application-Trace-0" style="display: none;">
+      <code class="traces">
+      </code>
+    </div>
+    <div id="Framework-Trace-0" style="display: none;">
+      <code class="traces">
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="0" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:314:in `handle_unverified_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="1" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:408:in `handle_unverified_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="2" href="#">
+            devise (4.9.4) lib/devise/controllers/helpers.rb:257:in `handle_unverified_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="3" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:397:in `verify_authenticity_token&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="4" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:362:in `block in make_lambda&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="5" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:179:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="6" href="#">
+            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in &lt;module:Callbacks&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="7" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:180:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="8" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `block in invoke_before&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="9" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `each&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="10" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `invoke_before&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="11" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:119:in `block in run_callbacks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="12" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:141:in `run_callbacks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="13" href="#">
+            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:260:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="14" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/rescue.rb:27:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="15" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:77:in `block in process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="16" href="#">
+            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `block in instrument&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="17" href="#">
+            activesupport (7.2.3) lib/active_support/notifications/instrumenter.rb:58:in `instrument&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="18" href="#">
+            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `instrument&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="19" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:76:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="20" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/params_wrapper.rb:259:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="21" href="#">
+            activerecord (7.2.3) lib/active_record/railties/controller_runtime.rb:39:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="22" href="#">
+            actionpack (7.2.3) lib/abstract_controller/base.rb:152:in `process&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="23" href="#">
+            actionview (7.2.3) lib/action_view/rendering.rb:40:in `process&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="24" href="#">
+            actionpack (7.2.3) lib/action_controller/metal.rb:252:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="25" href="#">
+            actionpack (7.2.3) lib/action_controller/metal.rb:335:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="26" href="#">
+            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="27" href="#">
+            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:50:in `serve&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="28" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:53:in `block in serve&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="29" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="30" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `each&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="31" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `find_routes&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="32" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:34:in `serve&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="33" href="#">
+            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:896:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="34" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:478:in `call_app!&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="35" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:317:in `mock_call!&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="36" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:189:in `call!&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="37" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:169:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="38" href="#">
+            warden (1.2.9) lib/warden/manager.rb:36:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="39" href="#">
+            warden (1.2.9) lib/warden/manager.rb:34:in `catch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="40" href="#">
+            warden (1.2.9) lib/warden/manager.rb:34:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="41" href="#">
+            rack (3.2.4) lib/rack/tempfile_reaper.rb:20:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="42" href="#">
+            rack (3.2.4) lib/rack/etag.rb:29:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="43" href="#">
+            rack (3.2.4) lib/rack/conditional_get.rb:44:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="44" href="#">
+            rack (3.2.4) lib/rack/head.rb:15:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="45" href="#">
+            actionpack (7.2.3) lib/action_dispatch/http/permissions_policy.rb:38:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="46" href="#">
+            actionpack (7.2.3) lib/action_dispatch/http/content_security_policy.rb:38:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="47" href="#">
+            rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="48" href="#">
+            rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="49" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/cookies.rb:704:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="50" href="#">
+            activerecord (7.2.3) lib/active_record/migration.rb:674:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="51" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="52" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:101:in `run_callbacks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="53" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:30:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="54" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="55" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="56" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="57" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="58" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="59" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="60" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:17:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="61" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="62" href="#">
+            railties (7.2.3) lib/rails/rack/logger.rb:41:in `call_app&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="63" href="#">
+            railties (7.2.3) lib/rails/rack/logger.rb:29:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="64" href="#">
+            sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="65" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="66" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/request_id.rb:33:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="67" href="#">
+            rack (3.2.4) lib/rack/method_override.rb:28:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="68" href="#">
+            rack (3.2.4) lib/rack/runtime.rb:24:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="69" href="#">
+            activesupport (7.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="70" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="71" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="72" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:60:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="73" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="74" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/static.rb:27:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="75" href="#">
+            rack (3.2.4) lib/rack/sendfile.rb:131:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="76" href="#">
+            railties (7.2.3) lib/rails/engine.rb:535:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="77" href="#">
+            rack-test (2.2.0) lib/rack/test.rb:360:in `process_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="78" href="#">
+            rack-test (2.2.0) lib/rack/test.rb:153:in `request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="79" href="#">
+            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:287:in `process&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="80" href="#">
+            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:25:in `post&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="81" href="#">
+            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:378:in `post&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="82" href="#">
+            spec/requests/posts_spec.rb:40:in `block (5 levels) in &lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="83" href="#">
+            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:395:in `perform_change&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="84" href="#">
+            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:146:in `matches?&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="85" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:50:in `block in handle_matcher&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="86" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:26:in `with_matcher&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="87" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:47:in `handle_matcher&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="88" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:65:in `to&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="89" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:139:in `to&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="90" href="#">
+            spec/requests/posts_spec.rb:39:in `block (4 levels) in &lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="91" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="92" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="93" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `block in with_around_and_singleton_context_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="94" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `block in with_around_example_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="95" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="96" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:626:in `block in run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="97" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="98" href="#">
+            rspec-rails (8.0.2) lib/rspec/rails/adapters.rb:75:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="99" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="100" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="101" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="102" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="103" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="104" href="#">
+            webmock (3.26.1) lib/webmock/rspec.rb:39:in `block (2 levels) in &lt;main&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="105" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="106" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="107" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="108" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="109" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="110" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:629:in `run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="111" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="112" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `with_around_example_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="113" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `with_around_and_singleton_context_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="114" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:259:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="115" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:653:in `block in run_examples&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="116" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="117" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `run_examples&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="118" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:614:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="119" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="120" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="121" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="122" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="123" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="124" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="125" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (3 levels) in run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="126" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="127" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (2 levels) in run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="128" href="#">
+            rspec-core (3.13.6) lib/rspec/core/configuration.rb:2097:in `with_suite_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="129" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:116:in `block in run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="130" href="#">
+            rspec-core (3.13.6) lib/rspec/core/reporter.rb:74:in `report&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="131" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:115:in `run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="132" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:89:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="133" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:71:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="134" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:45:in `invoke&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="135" href="#">
+            rspec-core (3.13.6) exe/rspec:4:in `&lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="136" href="#">
+            /usr/local/bundle/bin/rspec:25:in `load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="137" href="#">
+            /usr/local/bundle/bin/rspec:25:in `&lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="138" href="#">
+            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="139" href="#">
+            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `kernel_load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="140" href="#">
+            bundler (2.4.20) lib/bundler/cli/exec.rb:23:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="141" href="#">
+            bundler (2.4.20) lib/bundler/cli.rb:492:in `exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="142" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="143" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in `invoke_command&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="144" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor.rb:392:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="145" href="#">
+            bundler (2.4.20) lib/bundler/cli.rb:34:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="146" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/base.rb:485:in `start&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="147" href="#">
+            bundler (2.4.20) lib/bundler/cli.rb:28:in `start&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="148" href="#">
+            bundler (2.4.20) exe/bundle:37:in `block in &lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="149" href="#">
+            bundler (2.4.20) lib/bundler/friendly_errors.rb:117:in `with_friendly_errors&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="150" href="#">
+            bundler (2.4.20) exe/bundle:29:in `&lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="151" href="#">
+            /usr/local/bundle/bin/bundle:25:in `load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="152" href="#">
+            /usr/local/bundle/bin/bundle:25:in `&lt;main&gt;&#39;
+          </a>
+          <br>
+      </code>
+    </div>
+    <div id="Full-Trace-0" style="display: block;">
+      <code class="traces">
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="0" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:314:in `handle_unverified_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="1" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:408:in `handle_unverified_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="2" href="#">
+            devise (4.9.4) lib/devise/controllers/helpers.rb:257:in `handle_unverified_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="3" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/request_forgery_protection.rb:397:in `verify_authenticity_token&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="4" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:362:in `block in make_lambda&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="5" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:179:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="6" href="#">
+            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in &lt;module:Callbacks&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="7" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:180:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="8" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `block in invoke_before&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="9" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `each&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="10" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:560:in `invoke_before&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="11" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:119:in `block in run_callbacks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="12" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:141:in `run_callbacks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="13" href="#">
+            actionpack (7.2.3) lib/abstract_controller/callbacks.rb:260:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="14" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/rescue.rb:27:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="15" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:77:in `block in process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="16" href="#">
+            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `block in instrument&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="17" href="#">
+            activesupport (7.2.3) lib/active_support/notifications/instrumenter.rb:58:in `instrument&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="18" href="#">
+            activesupport (7.2.3) lib/active_support/notifications.rb:210:in `instrument&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="19" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/instrumentation.rb:76:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="20" href="#">
+            actionpack (7.2.3) lib/action_controller/metal/params_wrapper.rb:259:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="21" href="#">
+            activerecord (7.2.3) lib/active_record/railties/controller_runtime.rb:39:in `process_action&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="22" href="#">
+            actionpack (7.2.3) lib/abstract_controller/base.rb:152:in `process&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="23" href="#">
+            actionview (7.2.3) lib/action_view/rendering.rb:40:in `process&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="24" href="#">
+            actionpack (7.2.3) lib/action_controller/metal.rb:252:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="25" href="#">
+            actionpack (7.2.3) lib/action_controller/metal.rb:335:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="26" href="#">
+            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="27" href="#">
+            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:50:in `serve&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="28" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:53:in `block in serve&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="29" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="30" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `each&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="31" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:126:in `find_routes&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="32" href="#">
+            actionpack (7.2.3) lib/action_dispatch/journey/router.rb:34:in `serve&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="33" href="#">
+            actionpack (7.2.3) lib/action_dispatch/routing/route_set.rb:896:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="34" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:478:in `call_app!&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="35" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:317:in `mock_call!&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="36" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:189:in `call!&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="37" href="#">
+            omniauth (2.1.4) lib/omniauth/strategy.rb:169:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="38" href="#">
+            warden (1.2.9) lib/warden/manager.rb:36:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="39" href="#">
+            warden (1.2.9) lib/warden/manager.rb:34:in `catch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="40" href="#">
+            warden (1.2.9) lib/warden/manager.rb:34:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="41" href="#">
+            rack (3.2.4) lib/rack/tempfile_reaper.rb:20:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="42" href="#">
+            rack (3.2.4) lib/rack/etag.rb:29:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="43" href="#">
+            rack (3.2.4) lib/rack/conditional_get.rb:44:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="44" href="#">
+            rack (3.2.4) lib/rack/head.rb:15:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="45" href="#">
+            actionpack (7.2.3) lib/action_dispatch/http/permissions_policy.rb:38:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="46" href="#">
+            actionpack (7.2.3) lib/action_dispatch/http/content_security_policy.rb:38:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="47" href="#">
+            rack-session (2.1.1) lib/rack/session/abstract/id.rb:274:in `context&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="48" href="#">
+            rack-session (2.1.1) lib/rack/session/abstract/id.rb:268:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="49" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/cookies.rb:704:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="50" href="#">
+            activerecord (7.2.3) lib/active_record/migration.rb:674:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="51" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="52" href="#">
+            activesupport (7.2.3) lib/active_support/callbacks.rb:101:in `run_callbacks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="53" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/callbacks.rb:30:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="54" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="55" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="56" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="57" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="58" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="59" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="60" href="#">
+            web-console (4.2.1) lib/web_console/middleware.rb:17:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="61" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="62" href="#">
+            railties (7.2.3) lib/rails/rack/logger.rb:41:in `call_app&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="63" href="#">
+            railties (7.2.3) lib/rails/rack/logger.rb:29:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="64" href="#">
+            sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="65" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="66" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/request_id.rb:33:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="67" href="#">
+            rack (3.2.4) lib/rack/method_override.rb:28:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="68" href="#">
+            rack (3.2.4) lib/rack/runtime.rb:24:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="69" href="#">
+            activesupport (7.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="70" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="71" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="72" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/server_timing.rb:60:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="73" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/executor.rb:16:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="74" href="#">
+            actionpack (7.2.3) lib/action_dispatch/middleware/static.rb:27:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="75" href="#">
+            rack (3.2.4) lib/rack/sendfile.rb:131:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="76" href="#">
+            railties (7.2.3) lib/rails/engine.rb:535:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="77" href="#">
+            rack-test (2.2.0) lib/rack/test.rb:360:in `process_request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="78" href="#">
+            rack-test (2.2.0) lib/rack/test.rb:153:in `request&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="79" href="#">
+            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:287:in `process&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="80" href="#">
+            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:25:in `post&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="81" href="#">
+            actionpack (7.2.3) lib/action_dispatch/testing/integration.rb:378:in `post&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="82" href="#">
+            spec/requests/posts_spec.rb:40:in `block (5 levels) in &lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="83" href="#">
+            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:395:in `perform_change&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="84" href="#">
+            rspec-expectations (3.13.5) lib/rspec/matchers/built_in/change.rb:146:in `matches?&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="85" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:50:in `block in handle_matcher&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="86" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:26:in `with_matcher&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="87" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/handler.rb:47:in `handle_matcher&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="88" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:65:in `to&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="89" href="#">
+            rspec-expectations (3.13.5) lib/rspec/expectations/expectation_target.rb:139:in `to&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="90" href="#">
+            spec/requests/posts_spec.rb:39:in `block (4 levels) in &lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="91" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="92" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:263:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="93" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `block in with_around_and_singleton_context_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="94" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `block in with_around_example_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="95" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="96" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:626:in `block in run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="97" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="98" href="#">
+            rspec-rails (8.0.2) lib/rspec/rails/adapters.rb:75:in `block (2 levels) in &lt;module:MinitestLifecycleAdapter&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="99" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="100" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="101" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="102" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="103" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="104" href="#">
+            webmock (3.26.1) lib/webmock/rspec.rb:39:in `block (2 levels) in &lt;main&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="105" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="106" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:457:in `instance_exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="107" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:390:in `execute_with&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="108" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:628:in `block (2 levels) in run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="109" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:352:in `call&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="110" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:629:in `run_around_example_hooks_for&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="111" href="#">
+            rspec-core (3.13.6) lib/rspec/core/hooks.rb:486:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="112" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:468:in `with_around_example_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="113" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:511:in `with_around_and_singleton_context_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="114" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example.rb:259:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="115" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:653:in `block in run_examples&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="116" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="117" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:649:in `run_examples&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="118" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:614:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="119" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="120" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="121" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="122" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `block in run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="123" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="124" href="#">
+            rspec-core (3.13.6) lib/rspec/core/example_group.rb:615:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="125" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (3 levels) in run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="126" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `map&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="127" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:121:in `block (2 levels) in run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="128" href="#">
+            rspec-core (3.13.6) lib/rspec/core/configuration.rb:2097:in `with_suite_hooks&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="129" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:116:in `block in run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="130" href="#">
+            rspec-core (3.13.6) lib/rspec/core/reporter.rb:74:in `report&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="131" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:115:in `run_specs&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="132" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:89:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="133" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:71:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="134" href="#">
+            rspec-core (3.13.6) lib/rspec/core/runner.rb:45:in `invoke&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="135" href="#">
+            rspec-core (3.13.6) exe/rspec:4:in `&lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="136" href="#">
+            /usr/local/bundle/bin/rspec:25:in `load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="137" href="#">
+            /usr/local/bundle/bin/rspec:25:in `&lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="138" href="#">
+            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="139" href="#">
+            bundler (2.4.20) lib/bundler/cli/exec.rb:58:in `kernel_load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="140" href="#">
+            bundler (2.4.20) lib/bundler/cli/exec.rb:23:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="141" href="#">
+            bundler (2.4.20) lib/bundler/cli.rb:492:in `exec&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="142" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="143" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in `invoke_command&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="144" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor.rb:392:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="145" href="#">
+            bundler (2.4.20) lib/bundler/cli.rb:34:in `dispatch&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="146" href="#">
+            bundler (2.4.20) lib/bundler/vendor/thor/lib/thor/base.rb:485:in `start&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="147" href="#">
+            bundler (2.4.20) lib/bundler/cli.rb:28:in `start&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="148" href="#">
+            bundler (2.4.20) exe/bundle:37:in `block in &lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="149" href="#">
+            bundler (2.4.20) lib/bundler/friendly_errors.rb:117:in `with_friendly_errors&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="150" href="#">
+            bundler (2.4.20) exe/bundle:29:in `&lt;top (required)&gt;&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="151" href="#">
+            /usr/local/bundle/bin/bundle:25:in `load&#39;
+          </a>
+          <br>
+          <a class="trace-frames trace-frames-0" data-exception-object-id="40720" data-frame-id="152" href="#">
+            /usr/local/bundle/bin/bundle:25:in `&lt;main&gt;&#39;
+          </a>
+          <br>
+      </code>
+    </div>
+
+  <script>
+    (function() {
+      var traceFrames = document.getElementsByClassName('trace-frames-0');
+      var selectedFrame, currentSource = document.getElementById('frame-source-0-0');
+
+      // Add click listeners for all stack frames
+      for (var i = 0; i < traceFrames.length; i++) {
+        traceFrames[i].addEventListener('click', function(e) {
+          e.preventDefault();
+          var target = e.target;
+          var frame_id = target.dataset.frameId;
+
+          if (selectedFrame) {
+            selectedFrame.className = selectedFrame.className.replace("selected", "");
+          }
+
+          target.className += " selected";
+          selectedFrame = target;
+
+          // Change the extracted source code
+          changeSourceExtract(frame_id);
+        });
+
+        function changeSourceExtract(frame_id) {
+          var el = document.getElementById('frame-source-0-' + frame_id);
+          if (currentSource && el) {
+            currentSource.className += " hidden";
+            el.className = el.className.replace(" hidden", "");
+            currentSource = el;
+          }
+        }
+      }
+    })();
+  </script>
+</div>
+<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb -->
+
+
+
+  <!-- BEGIN /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb --><h2 class="request-heading">Request</h2>
+  <p><b>Parameters</b>:</p> <pre>{&quot;post&quot;=&gt;{&quot;body&quot;=&gt;&quot;新しい投稿&quot;, &quot;weather&quot;=&gt;&quot;sunny&quot;, &quot;feeling&quot;=&gt;&quot;great&quot;}}
+</pre>
+
+<div class="details">
+  <div class="summary"><a href="#" onclick="return toggleSessionDump()">Toggle session dump</a></div>
+  <div id="session_dump" class="hidden"><pre>session_id: &quot;4e8f21b80b22bdf8973c945a40df6333&quot;
+warden.user.user.key: [[133], &quot;$2a$12$vOmPqXBEr.Jv6l4FSsF7me&quot;]</pre></div>
+</div>
+
+<div class="details">
+  <div class="summary"><a href="#" onclick="return toggleEnvDump()">Toggle env dump</a></div>
+  <div id="env_dump" class="hidden"><pre>HTTP_ACCEPT: &quot;text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5&quot;
+ORIGINAL_SCRIPT_NAME: &quot;&quot;
+REMOTE_ADDR: &quot;127.0.0.1&quot;
+SERVER_NAME: &quot;www.example.com&quot;
+SERVER_PROTOCOL: &quot;HTTP/1.0&quot;</pre></div>
+</div>
+
+<h2 class="response-heading">Response</h2>
+<p><b>Headers</b>:</p> <pre>None</pre>
+<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb -->
+</main>
+<!-- END /usr/local/bundle/gems/actionpack-7.2.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb -->
+
+<!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/index.html.erb --><!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_markup.html.erb --><div id="console"
+  data-mount-point='/__web_console'
+  data-session-id='da80482e143713ffea6d1da6bb6addfd'
+  data-prompt-label='>> '>
+</div>
+<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_markup.html.erb -->
+
+<script type="text/javascript" data-template="console" nonce="">
+(function() {
+  /**
+ * Constructor for command storage.
+ * It uses localStorage if available. Otherwise fallback to normal JS array.
+ */
+function CommandStorage() {
+  this.previousCommands = [];
+  var previousCommandOffset = 0;
+  var hasLocalStorage = typeof window.localStorage !== 'undefined';
+  var STORAGE_KEY = "web_console_previous_commands";
+  var MAX_STORAGE = 100;
+
+  if (hasLocalStorage) {
+    this.previousCommands = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
+    previousCommandOffset = this.previousCommands.length;
+  }
+
+  this.addCommand = function(command) {
+    previousCommandOffset = this.previousCommands.push(command);
+
+    if (previousCommandOffset > MAX_STORAGE) {
+      this.previousCommands.splice(0, 1);
+      previousCommandOffset = MAX_STORAGE;
+    }
+
+    if (hasLocalStorage) {
+      localStorage.setItem(STORAGE_KEY, JSON.stringify(this.previousCommands));
+    }
+  };
+
+  this.navigate = function(offset) {
+    previousCommandOffset += offset;
+
+    if (previousCommandOffset < 0) {
+      previousCommandOffset = -1;
+      return null;
+    }
+
+    if (previousCommandOffset >= this.previousCommands.length) {
+      previousCommandOffset = this.previousCommands.length;
+      return null;
+    }
+
+    return this.previousCommands[previousCommandOffset];
+  }
+}
+
+function Autocomplete(_words, prefix) {
+  this.words = prepareWords(_words);
+  this.current = -1;
+  this.left = 0; // [left, right)
+  this.right = this.words.length;
+  this.confirmed = false;
+
+  function createSpan(label, className) {
+    var el = document.createElement('span');
+    addClass(el, className);
+    el.innerText = label;
+    return el;
+  }
+
+  function prepareWords(words) {
+    // convert into an object with priority and element
+    var res = new Array(words.length);
+    for (var i = 0, ind = 0; i < words.length; ++i) {
+      res[i] = new Array(words[i].length);
+      for (var j = 0; j < words[i].length; ++j) {
+        res[i][j] = {
+          word: words[i][j],
+          priority: i,
+          element: createSpan(words[i][j], 'trimmed keyword')
+        };
+      }
+    }
+    // flatten and sort by alphabetical order to refine incrementally
+    res = flatten(res);
+    res.sort(function(a, b) { return a.word == b.word ? 0 : (a.word < b.word ? -1 : 1); });
+    for (var i = 0; i < res.length; ++i) res[i].element.dataset.index = i;
+    return res;
+  }
+
+  this.view = document.createElement('pre');
+  addClass(this.view, 'auto-complete console-message');
+  this.view.appendChild(this.prefix = createSpan('...', 'trimmed keyword'));
+  this.view.appendChild(this.stage = document.createElement('span'));
+  this.elements = this.stage.children;
+  this.view.appendChild(this.suffix = createSpan('...', 'trimmed keyword'));
+
+  this.refine(prefix || '');
+}
+
+Autocomplete.prototype.getSelectedWord = function() {
+  return this.lastSelected && this.lastSelected.innerText;
+};
+
+Autocomplete.prototype.onFinished = function(callback) {
+  this.onFinishedCallback = callback;
+  if (this.confirmed) callback(this.confirmed);
+};
+
+Autocomplete.prototype.onKeyDown = function(ev) {
+  var self = this;
+  if (!this.elements.length) return;
+
+  function move(nextCurrent) {
+    if (self.lastSelected) removeClass(self.lastSelected, 'selected');
+    addClass(self.lastSelected = self.elements[nextCurrent], 'selected');
+    self.trim(self.current, true);
+    self.trim(nextCurrent, false);
+    self.current = nextCurrent;
+  }
+
+  switch (ev.keyCode) {
+    case 69:
+      if (ev.ctrlKey) {
+        move(this.current + 1 >= this.elements.length ? 0 : this.current + 1);
+        return true;
+      }
+      return false;
+    case 9: // Tab
+      if (ev.shiftKey) { // move back
+        move(this.current - 1 < 0 ? this.elements.length - 1 : this.current - 1);
+      } else { // move next
+        move(this.current + 1 >= this.elements.length ? 0 : this.current + 1);
+      }
+      return true;
+    case 13: // Enter
+      this.finish();
+      return true;
+    case 27: // Esc
+      this.cancel();
+      return true;
+    case 37: case 38: case 39: case 40: // disable using arrow keys on completing
+      return true;
+  }
+
+  return false;
+};
+
+Autocomplete.prototype.trim = function(from, needToTrim) {
+  var self = this;
+  var num = 5;
+
+  if (this.elements.length > num) {
+    (0 < from ? removeClass : addClass)(this.prefix, 'trimmed');
+    (from + num < this.elements.length ? removeClass : addClass)(this.suffix, 'trimmed');
+  } else {
+    addClass(this.prefix, 'trimmed');
+    addClass(this.suffix, 'trimmed');
+  }
+
+  function iterate(x) {
+    for (var i = 0; i < num; ++i, ++x) if (0 <= x && x < self.elements.length) {
+      toggleClass(self.elements[x], 'trimmed');
+    }
+  }
+
+  var toggleClass = needToTrim ? addClass : removeClass;
+  if (from < 0) {
+    iterate(0);
+  } else if (from + num - 1 >= this.elements.length) {
+    iterate(this.elements.length - num);
+  } else {
+    iterate(from);
+  }
+};
+
+Autocomplete.prototype.refine = function(prefix) {
+  if (this.confirmed) return;
+  var inc = !this.prev || (prefix.length >= this.prev.length);
+  this.prev = prefix;
+  var self = this;
+
+  function remove(parent, child) {
+    if (parent == child.parentNode) parent.removeChild(child);
+  }
+
+  function toggle(el) {
+    return inc ? remove(self.stage, el) : self.stage.appendChild(el);
+  }
+
+  function startsWith(str, prefix) {
+    return !prefix || str.substr(0, prefix.length) === prefix;
+  }
+
+  function moveRight(l, r) {
+    while (l < r && inc !== startsWith(self.words[l].word, prefix)) toggle(self.words[l++].element);
+    return l;
+  }
+
+  function moveLeft(l, r) {
+    while (l < r - 1 && inc !== startsWith(self.words[r-1].word, prefix)) toggle(self.words[--r].element);
+    return r;
+  }
+
+  self.trim(self.current, true); // reset trimming
+
+  // Refine the range of words having same prefix
+  if (inc) {
+    self.left = moveRight(self.left, self.right);
+    self.right = moveLeft(self.left, self.right);
+  } else {
+    self.left = moveLeft(-1, self.left);
+    self.right = moveRight(self.right, self.words.length);
+  }
+
+  // Render elements with sorting by scope groups
+  var words = this.words.slice(this.left, this.right);
+  words.sort(function(a, b) { return a.priority == b.priority ? (a.word < b.word ? -1 : 1) : (a.priority < b.priority ? -1 : 1); });
+  removeAllChildren(this.elements);
+  for (var i = 0; i < words.length; ++i) {
+    this.stage.appendChild(words[i].element);
+  }
+
+  // Keep a previous selected element if the refined range includes the element
+  if (this.lastSelected && this.left <= this.lastSelected.dataset.index && this.lastSelected.dataset.index < this.right) {
+    this.current = Array.prototype.indexOf.call(this.elements, this.lastSelected);
+    this.trim(this.current, false);
+  } else {
+    if (this.lastSelected) removeClass(this.lastSelected, 'selected');
+    this.lastSelected = null;
+    this.current = -1;
+    this.trim(0, false);
+  }
+
+  if (self.left + 1 == self.right) {
+    self.current = 0;
+    self.finish();
+  } else if (self.left == self.right) {
+    self.cancel();
+  }
+};
+
+Autocomplete.prototype.finish = function() {
+  if (0 <= this.current && this.current < this.elements.length) {
+    this.confirmed = this.elements[this.current].innerText;
+    if (this.onFinishedCallback) this.onFinishedCallback(this.confirmed);
+    this.removeView();
+  } else {
+    this.cancel();
+  }
+};
+
+Autocomplete.prototype.cancel = function() {
+  if (this.onFinishedCallback) this.onFinishedCallback();
+  this.removeView();
+};
+
+Autocomplete.prototype.removeView = function() {
+  if (this.view.parentNode) this.view.parentNode.removeChild(this.view);
+  removeAllChildren(this.view);
+}
+
+// HTML strings for dynamic elements.
+var consoleInnerHtml = `<!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_inner_console_markup.html.erb --><div class=\'resizer layer\'><\/div>\n<div class=\'console-outer layer\'>\n  <div class=\'console-actions\'>\n    <div class=\'close-button button\' title=\'close\'>x<\/div>\n  <\/div>\n  <div class=\'console-inner\'><\/div>\n<\/div>\n<input class=\'clipboard\' type=\'text\'>\n<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_inner_console_markup.html.erb -->`
+;
+var promptBoxHtml = `<!-- BEGIN /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_prompt_box_markup.html.erb --><span class=\'console-prompt-label\'><\/span>\n<pre class=\'console-prompt-display\'><\/pre>\n<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/_prompt_box_markup.html.erb -->`
+;
+// CSS
+var consoleStyleCss = `.console .pos-absolute {\n  position: absolute;\n}\n\n.console .pos-fixed {\n  position: fixed;\n}\n\n.console .pos-right {\n  right: 0;\n}\n\n.console .border-box {\n  box-sizing: border-box;\n}\n\n.console .layer {\n  width: 100%;\n  height: 100%;\n}\n\n.console .layer.console-outer {\n  z-index: 1;\n}\n\n.console .layer.resizer {\n  z-index: 2;\n}\n\n.console {\n  position: fixed;\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 148px;\n  padding: 0;\n  margin: 0;\n  background: none repeat scroll 0% 0% #333;\n  z-index: 9999;\n}\n\n.console .console-outer {\n  overflow: auto;\n  padding-top: 4px;\n}\n\n.console .console-inner {\n  font-family: monospace;\n  font-size: 11px;\n  width: 100%;\n  height: 100%;\n  overflow: unset;\n  background: #333;\n}\n\n.console .console-prompt-box {\n  color: #fff;\n}\n\n.console .console-message {\n  color: #1ad027;\n  margin: 0;\n  border: 0;\n  white-space: pre-wrap;\n  background-color: #333;\n  padding: 0;\n}\n\n.console .console-message.error-message {\n  color: #fc9;\n}\n\n.console .console-message.notification-message {\n  color: #99f;\n}\n\n.console .console-message.auto-complete {\n  word-break: break-all;\n}\n\n.console .console-message.auto-complete .keyword {\n  margin-right: 11px;\n}\n\n.console .console-message.auto-complete .keyword.selected {\n  background: #fff;\n  color: #000;\n}\n\n.console .console-message.auto-complete .hidden {\n  display: none;\n}\n\n.console .console-message.auto-complete .trimmed {\n  display: none;\n}\n\n.console .console-hint {\n  color: #096;\n}\n\n.console .console-focus .console-cursor {\n  background: #fefefe;\n  color: #333;\n  font-weight: bold;\n}\n\n.console .resizer {\n  background: #333;\n  width: 100%;\n  height: 4px;\n  cursor: ns-resize;\n}\n\n.console .console-actions {\n  padding-right: 3px;\n}\n\n.console .console-actions .button {\n  float: left;\n}\n\n.console .button {\n  cursor: pointer;\n  border-radius: 1px;\n  font-family: monospace;\n  font-size: 13px;\n  width: 14px;\n  height: 14px;\n  line-height: 14px;\n  text-align: center;\n  color: #ccc;\n}\n\n.console .button:hover {\n  background: #666;\n  color: #fff;\n}\n\n.console .button.close-button:hover {\n  background: #966;\n}\n\n.console .clipboard {\n  height: 0px;\n  padding: 0px;\n  margin: 0px;\n  width: 0px;\n  margin-left: -1000px;\n}\n\n.console .console-prompt-label {\n  display: inline;\n  color: #fff;\n  background: none repeat scroll 0% 0% #333;\n  border: 0;\n  padding: 0;\n}\n\n.console .console-prompt-display {\n  display: inline;\n  color: #fff;\n  background: none repeat scroll 0% 0% #333;\n  border: 0;\n  padding: 0;\n}\n\n.console.full-screen {\n  height: 100%;\n}\n\n.console.full-screen .console-outer {\n  padding-top: 3px;\n}\n\n.console.full-screen .resizer {\n  display: none;\n}\n\n.console.full-screen .close-button {\n  display: none;\n}\n`
+;
+// Insert a style element with the unique ID
+var styleElementId = 'sr02459pvbvrmhco';
+// Nonce to use for CSP
+var styleElementNonce = '';
+
+// REPLConsole Constructor
+function REPLConsole(config) {
+  function getConfig(key, defaultValue) {
+    return config && config[key] || defaultValue;
+  }
+
+  this.commandStorage = new CommandStorage();
+  this.prompt = getConfig('promptLabel', ' >>');
+  this.mountPoint = getConfig('mountPoint');
+  this.sessionId = getConfig('sessionId');
+  this.autocomplete = false;
+}
+
+REPLConsole.prototype.getSessionUrl = function(path) {
+  var parts = [ this.mountPoint, 'repl_sessions', this.sessionId ];
+  if (path) {
+    parts.push(path);
+  }
+  // Join and remove duplicate slashes.
+  return parts.join('/').replace(/([^:]\/)\/+/g, '$1');
+};
+
+REPLConsole.prototype.contextRequest = function(keyword, callback) {
+  putRequest(this.getSessionUrl(), 'context=' + getContext(keyword), function(xhr) {
+    if (xhr.status == 200) {
+      callback(null, JSON.parse(xhr.responseText));
+    } else {
+      callback(xhr.statusText);
+    }
+  });
+};
+
+REPLConsole.prototype.commandHandle = function(line, callback) {
+  var self = this;
+  var params = 'input=' + encodeURIComponent(line);
+  callback = callback || function() {};
+
+  function isSuccess(status) {
+    return status >= 200 && status < 300 || status === 304;
+  }
+
+  function parseJSON(text) {
+    try {
+      return JSON.parse(text);
+    } catch (e) {
+      return null;
+    }
+  }
+
+  function getErrorText(xhr) {
+    if (!xhr.status) {
+      return "Connection Refused";
+    } else {
+      return xhr.status + ' ' + xhr.statusText;
+    }
+  }
+
+  putRequest(self.getSessionUrl(), params, function(xhr) {
+    var response = parseJSON(xhr.responseText);
+    var result   = isSuccess(xhr.status);
+    if (result) {
+      self.writeOutput(response.output);
+    } else {
+      if (response && response.output) {
+        self.writeError(response.output);
+      } else {
+        self.writeError(getErrorText(xhr));
+      }
+    }
+    callback(result, response);
+  });
+};
+
+REPLConsole.prototype.uninstall = function() {
+  this.container.parentNode.removeChild(this.container);
+};
+
+REPLConsole.prototype.install = function(container) {
+  var _this = this;
+
+  document.onkeydown = function(ev) {
+    if (_this.focused) { _this.onKeyDown(ev); }
+  };
+
+  document.onkeypress = function(ev) {
+    if (_this.focused) { _this.onKeyPress(ev); }
+  };
+
+  document.addEventListener('mousedown', function(ev) {
+    var el = ev.target || ev.srcElement;
+
+    if (el) {
+      do {
+        if (el === container) {
+          _this.focus();
+          return;
+        }
+      } while (el = el.parentNode);
+
+      _this.blur();
+    }
+  });
+
+  // Render the console.
+  container.innerHTML = consoleInnerHtml;
+
+  var consoleOuter = findChild(container, 'console-outer');
+  var consoleActions = findChild(consoleOuter, 'console-actions');
+
+  addClass(container, 'console');
+  addClass(container.getElementsByClassName('layer'), 'pos-absolute border-box');
+  addClass(container.getElementsByClassName('button'), 'border-box');
+  addClass(consoleActions, 'pos-fixed pos-right');
+
+  // Make the console resizable.
+  function resizeContainer(ev) {
+    var startY              = ev.clientY;
+    var startHeight         = parseInt(document.defaultView.getComputedStyle(container).height, 10);
+    var scrollTopStart      = consoleOuter.scrollTop;
+    var clientHeightStart   = consoleOuter.clientHeight;
+
+    var doDrag = function(e) {
+      var height = startHeight + startY - e.clientY;
+      consoleOuter.scrollTop = scrollTopStart + (clientHeightStart - consoleOuter.clientHeight);
+      if (height > document.documentElement.clientHeight) {
+        container.style.height = document.documentElement.clientHeight;
+      } else {
+        container.style.height = height + 'px';
+      }
+      shiftConsoleActions();
+    };
+
+    var stopDrag = function(e) {
+      document.documentElement.removeEventListener('mousemove', doDrag, false);
+      document.documentElement.removeEventListener('mouseup', stopDrag, false);
+    };
+
+    document.documentElement.addEventListener('mousemove', doDrag, false);
+    document.documentElement.addEventListener('mouseup', stopDrag, false);
+  }
+
+  function closeContainer(ev) {
+    container.parentNode.removeChild(container);
+  }
+
+  var shifted = false;
+  function shiftConsoleActions() {
+    if (consoleOuter.scrollHeight > consoleOuter.clientHeight) {
+      var widthDiff = document.documentElement.clientWidth - consoleOuter.clientWidth;
+      if (shifted || ! widthDiff) return;
+      shifted = true;
+      consoleActions.style.marginRight = widthDiff + 'px';
+    } else if (shifted) {
+      shifted = false;
+      consoleActions.style.marginRight = '0px';
+    }
+  }
+
+  var observer = new MutationObserver(function(mutationsList) {
+    for (let mutation of mutationsList) {
+      if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
+        shiftConsoleActions();
+      }
+    }
+  });
+
+  // Initialize
+  this.container = container;
+  this.outer = consoleOuter;
+  this.inner = findChild(this.outer, 'console-inner');
+  this.clipboard = findChild(container, 'clipboard');
+  this.suggestWait = 1500;
+  this.newPromptBox();
+  this.insertCss();
+
+  findChild(container, 'resizer').addEventListener('mousedown', resizeContainer);
+  findChild(consoleActions, 'close-button').addEventListener('click', closeContainer);
+  observer.observe(consoleOuter, { childList: true, subtree: true });
+
+  REPLConsole.currentSession = this;
+};
+
+// Add CSS styles dynamically. This probably doesnt work for IE <8.
+REPLConsole.prototype.insertCss = function() {
+  if (document.getElementById(styleElementId)) {
+    return; // already inserted
+  }
+  var style = document.createElement('style');
+  style.type = 'text/css';
+  style.innerHTML = consoleStyleCss;
+  style.id = styleElementId;
+  if (styleElementNonce.length > 0) {
+    style.nonce = styleElementNonce;
+  }
+  document.getElementsByTagName('head')[0].appendChild(style);
+};
+
+REPLConsole.prototype.focus = function() {
+  if (! this.focused) {
+    this.focused = true;
+    if (! hasClass(this.inner, "console-focus")) {
+      addClass(this.inner, "console-focus");
+    }
+    this.scrollToBottom();
+  }
+};
+
+REPLConsole.prototype.blur = function() {
+  this.focused = false;
+  removeClass(this.inner, "console-focus");
+};
+
+/**
+ * Add a new empty prompt box to the console.
+ */
+REPLConsole.prototype.newPromptBox = function() {
+  // Remove the caret from previous prompt display if any.
+  if (this.promptDisplay) {
+    this.removeCaretFromPrompt();
+  }
+
+  var promptBox = document.createElement('div');
+  promptBox.className = "console-prompt-box";
+  promptBox.innerHTML = promptBoxHtml;
+  this.promptLabel = promptBox.getElementsByClassName('console-prompt-label')[0];
+  this.promptDisplay = promptBox.getElementsByClassName('console-prompt-display')[0];
+  // Render the prompt box
+  this.setInput("");
+  this.promptLabel.innerHTML = this.prompt;
+  this.inner.appendChild(promptBox);
+  this.scrollToBottom();
+};
+
+/**
+ * Remove the caret from the prompt box,
+ * mainly before adding a new prompt box.
+ * For simplicity, just re-render the prompt box
+ * with caret position -1.
+ */
+REPLConsole.prototype.removeCaretFromPrompt = function() {
+  this.setInput(this._input, -1);
+};
+
+REPLConsole.prototype.getSuggestion = function(keyword) {
+  var self = this;
+
+  function show(found) {
+    if (!found) return;
+    var hint = self.promptDisplay.childNodes[1];
+    hint.className = 'console-hint';
+    hint.dataset.keyword = found;
+    hint.innerText = found.substr(self.suggestKeyword.length);
+    // clear hinting information after timeout in a few time
+    if (self.suggestTimeout) clearTimeout(self.suggestTimeout);
+    self.suggestTimeout = setTimeout(function() { self.renderInput() }, self.suggestWait);
+  }
+
+  function find(context) {
+    var k = self.suggestKeyword;
+    for (var i = 0; i < context.length; ++i) if (context[i].substr(0, k.length) === k) {
+      if (context[i] === k) return;
+      return context[i];
+    }
+  }
+
+  function request(keyword, callback) {
+    self.contextRequest(keyword, function(err, res) {
+      if (err) throw new Error(err);
+      var c = flatten(res['context']);
+      c.sort();
+      callback(c);
+    });
+  }
+
+  self.suggestKeyword = keyword;
+  var input = getContext(keyword);
+  if (keyword.length - input.length < 3) return;
+
+  if (self.suggestInput !== input) {
+    self.suggestInput = input;
+    request(keyword, function(c) {
+      show(find(self.suggestContext = c));
+    });
+  } else if (self.suggestContext) {
+    show(find(self.suggestContext));
+  }
+};
+
+REPLConsole.prototype.getHintKeyword = function() {
+  var hint = this.promptDisplay.childNodes[1];
+  return hint.className === 'console-hint' && hint.dataset.keyword;
+};
+
+REPLConsole.prototype.setInput = function(input, caretPos) {
+  if (input == null) return; // keep value if input is undefined
+  this._caretPos = caretPos === undefined ? input.length : caretPos;
+  this._input = input;
+  if (this.autocomplete) this.autocomplete.refine(this.getCurrentWord());
+  this.renderInput();
+  if (!this.autocomplete && input.length == this._caretPos) this.getSuggestion(this.getCurrentWord());
+};
+
+/**
+ * Add some text to the existing input.
+ */
+REPLConsole.prototype.addToInput = function(val, caretPos) {
+  caretPos = caretPos || this._caretPos;
+  var before = this._input.substring(0, caretPos);
+  var after = this._input.substring(caretPos, this._input.length);
+  var newInput =  before + val + after;
+  this.setInput(newInput, caretPos + val.length);
+};
+
+/**
+ * Render the input prompt. This is called whenever
+ * the user input changes, sometimes not very efficient.
+ */
+REPLConsole.prototype.renderInput = function() {
+  // Clear the current input.
+  removeAllChildren(this.promptDisplay);
+
+  var before, current, after;
+  var center = document.createElement('span');
+
+  if (this._caretPos < 0) {
+    before = this._input;
+    current = after = "";
+  } else if (this._caretPos === this._input.length) {
+    before = this._input;
+    current = "\u00A0";
+    after = "";
+  } else {
+    before = this._input.substring(0, this._caretPos);
+    current = this._input.charAt(this._caretPos);
+    after = this._input.substring(this._caretPos + 1, this._input.length);
+  }
+
+  this.promptDisplay.appendChild(document.createTextNode(before));
+  this.promptDisplay.appendChild(center);
+  this.promptDisplay.appendChild(document.createTextNode(after));
+
+  var hint = this.autocomplete && this.autocomplete.getSelectedWord();
+  addClass(center, hint ? 'console-hint' : 'console-cursor');
+  center.appendChild(document.createTextNode(hint ? hint.substr(this.getCurrentWord().length) : current));
+};
+
+REPLConsole.prototype.writeOutput = function(output) {
+  var consoleMessage = document.createElement('pre');
+  consoleMessage.className = "console-message";
+  consoleMessage.innerHTML = escapeHTML(output);
+  this.inner.appendChild(consoleMessage);
+  this.newPromptBox();
+  return consoleMessage;
+};
+
+REPLConsole.prototype.writeError = function(output) {
+  var consoleMessage = this.writeOutput(output);
+  addClass(consoleMessage, "error-message");
+  return consoleMessage;
+};
+
+REPLConsole.prototype.writeNotification = function(output) {
+  var consoleMessage = this.writeOutput(output);
+  addClass(consoleMessage, "notification-message");
+  return consoleMessage;
+};
+
+REPLConsole.prototype.onEnterKey = function() {
+  var input = this._input;
+
+  if(input != "" && input !== undefined) {
+    this.commandStorage.addCommand(input);
+  }
+
+  this.commandHandle(input);
+};
+
+REPLConsole.prototype.onTabKey = function() {
+  var self = this;
+
+  var hintKeyword;
+  if (hintKeyword = self.getHintKeyword()) {
+    self.swapCurrentWord(hintKeyword);
+    return;
+  }
+
+  if (self.autocomplete) return;
+  self.autocomplete = new Autocomplete([]);
+
+  self.contextRequest(self.getCurrentWord(), function(err, obj) {
+    if (err) return self.autocomplete = false;
+    self.autocomplete = new Autocomplete(obj['context'], self.getCurrentWord());
+    self.inner.appendChild(self.autocomplete.view);
+    self.autocomplete.onFinished(function(word) {
+      self.swapCurrentWord(word);
+      self.autocomplete = false;
+    });
+    self.scrollToBottom();
+  });
+};
+
+REPLConsole.prototype.onNavigateHistory = function(offset) {
+  var command = this.commandStorage.navigate(offset) || "";
+  this.setInput(command);
+};
+
+/**
+ * Handle control keys like up, down, left, right.
+ */
+REPLConsole.prototype.onKeyDown = function(ev) {
+  if (this.autocomplete && this.autocomplete.onKeyDown(ev)) {
+    this.renderInput();
+    ev.preventDefault();
+    ev.stopPropagation();
+    return;
+  }
+
+  switch (ev.keyCode) {
+    case 65: // Ctrl-A
+      if (ev.ctrlKey) {
+        this.setInput(this._input, 0);
+        ev.preventDefault();
+      }
+      break;
+
+    case 69: // Ctrl-E
+      if (ev.ctrlKey) {
+        this.onTabKey();
+        ev.preventDefault();
+      }
+      break;
+
+    case 87: // Ctrl-W
+      if (ev.ctrlKey) {
+        this.deleteWord();
+        ev.preventDefault();
+      }
+      break;
+
+    case 85: // Ctrl-U
+      if (ev.ctrlKey) {
+        this.deleteLine();
+        ev.preventDefault();
+      }
+      break;
+
+    case 69: // Ctrl-E
+      if (ev.ctrlKey) {
+        this.onTabKey();
+        ev.preventDefault();
+      }
+      break;
+
+    case 80: // Ctrl-P
+      if (! ev.ctrlKey) break;
+
+    case 78: // Ctrl-N
+      if (! ev.ctrlKey) break;
+
+    case 9: // Tab
+      this.onTabKey();
+      ev.preventDefault();
+      break;
+
+    case 13: // Enter key
+      this.onEnterKey();
+      ev.preventDefault();
+      break;
+
+    case 38: // Up arrow
+      this.onNavigateHistory(-1);
+      ev.preventDefault();
+      break;
+
+    case 40: // Down arrow
+      this.onNavigateHistory(1);
+      ev.preventDefault();
+      break;
+
+    case 37: // Left arrow
+      var caretPos = this._caretPos > 0 ? this._caretPos - 1 : this._caretPos;
+      this.setInput(this._input, caretPos);
+      ev.preventDefault();
+      break;
+
+    case 39: // Right arrow
+      var length = this._input.length;
+      var caretPos = this._caretPos < length ? this._caretPos + 1 : this._caretPos;
+      this.setInput(this._input, caretPos);
+      ev.preventDefault();
+      break;
+
+    case 8: // Delete
+      this.deleteAtCurrent();
+      ev.preventDefault();
+      break;
+
+    default:
+      break;
+  }
+
+  if (ev.ctrlKey || ev.metaKey) {
+    if (ev.keyCode == 86) {
+      // Set focus to our clipboard when they hit the "v" key
+      this.clipboard.focus();
+
+      // Pasting to clipboard doesn't happen immediately,
+      // so we have to wait for a while to get the pasted text.
+      var _this = this;
+      setTimeout(function() {
+        _this.addToInput(_this.clipboard.value);
+        _this.clipboard.value = "";
+        _this.clipboard.blur();
+      }, 100);
+    }
+  }
+
+  ev.stopPropagation();
+};
+
+/**
+ * Handle input key press.
+ */
+REPLConsole.prototype.onKeyPress = function(ev) {
+  // Only write to the console if it's a single key press.
+  if (ev.ctrlKey && !ev.altKey || ev.metaKey) { return; }
+  var keyCode = ev.keyCode || ev.which;
+  this.insertAtCurrent(String.fromCharCode(keyCode));
+  ev.stopPropagation();
+  ev.preventDefault();
+};
+
+/**
+ * Delete a character at the current position.
+ */
+REPLConsole.prototype.deleteAtCurrent = function() {
+  if (this._caretPos > 0) {
+    var caretPos = this._caretPos - 1;
+    var before = this._input.substring(0, caretPos);
+    var after = this._input.substring(this._caretPos, this._input.length);
+    this.setInput(before + after, caretPos);
+
+    if (!this._input) {
+      this.autocomplete && this.autocomplete.cancel();
+      this.autocomplete = false;
+    }
+  }
+};
+
+/**
+ * Deletes the current line.
+ */
+REPLConsole.prototype.deleteLine = function() {
+  if (this._caretPos > 0) {
+    this.setInput("", 0);
+
+    if (!this._input) {
+      this.autocomplete && this.autocomplete.cancel();
+      this.autocomplete = false;
+    }
+  }
+};
+
+/**
+ * Deletes the current word.
+ */
+REPLConsole.prototype.deleteWord = function() {
+  if (this._caretPos > 0) {
+    var i = 1, current = this._caretPos;
+    while (this._input[current - i++] == " ");
+
+    var deleteIndex = 0;
+    for (; current - i > 0; i++) {
+      if (this._input[current - i] == " ") {
+        deleteIndex = current - i;
+        break;
+      }
+    }
+
+    var before = this._input.substring(0, deleteIndex);
+    var after = this._input.substring(current, this._input.length);
+    this.setInput(before + after, deleteIndex);
+
+    if (!this._input) {
+      this.autocomplete && this.autocomplete.cancel();
+      this.autocomplete = false;
+    }
+  }
+};
+
+/**
+ * Insert a character at the current position.
+ */
+REPLConsole.prototype.insertAtCurrent = function(char) {
+  var before = this._input.substring(0, this._caretPos);
+  var after = this._input.substring(this._caretPos, this._input.length);
+  this.setInput(before + char + after, this._caretPos + 1);
+};
+
+REPLConsole.prototype.swapCurrentWord = function(next) {
+  function right(s, pos) {
+    var x = s.indexOf(' ', pos);
+    return x === -1 ? s.length : x;
+  }
+
+  function swap(s, pos) {
+    return s.substr(0, s.lastIndexOf(' ', pos) + 1) + next + s.substr(right(s, pos))
+  }
+
+  if (!next) return;
+  var swapped = swap(this._input, this._caretPos);
+  this.setInput(swapped, this._caretPos + swapped.length - this._input.length);
+};
+
+REPLConsole.prototype.getCurrentWord = function() {
+  return (function(s, pos) {
+    var left = s.lastIndexOf(' ', pos);
+    if (left === -1) left = 0;
+    var right = s.indexOf(' ', pos)
+    if (right === -1) right = s.length - 1;
+    return s.substr(left, right - left + 1).replace(/^\s+|\s+$/g,'');
+  })(this._input, this._caretPos);
+};
+
+REPLConsole.prototype.scrollToBottom = function() {
+  this.outer.scrollTop = this.outer.scrollHeight;
+};
+
+// Change the binding of the console.
+REPLConsole.prototype.switchBindingTo = function(frameId, exceptionObjectId, callback) {
+  var url = this.getSessionUrl('trace');
+  var params = "frame_id=" + encodeURIComponent(frameId);
+
+  if (exceptionObjectId) {
+    params = params + "&exception_object_id=" + encodeURIComponent(exceptionObjectId);
+  }
+
+  var _this = this;
+  postRequest(url, params, function() {
+    var text = "Context has changed to: " + callback();
+    _this.writeNotification(text);
+  });
+};
+
+/**
+ * Install the console into the element with a specific ID.
+ * Example: REPLConsole.installInto("target-id")
+ */
+REPLConsole.installInto = function(id, options) {
+  var consoleElement = document.getElementById(id);
+
+  options = options || {};
+
+  for (var prop in consoleElement.dataset) {
+    options[prop] = options[prop] || consoleElement.dataset[prop];
+  }
+
+  var replConsole = new REPLConsole(options);
+  replConsole.install(consoleElement);
+  return replConsole;
+};
+
+// This is to store the latest single session, and the stored session
+// is updated by the REPLConsole#install() method.
+// It allows to operate the current session from the other scripts.
+REPLConsole.currentSession = null;
+
+// This line is for the Firefox Add-on, because it doesn't have XMLHttpRequest as default.
+// And so we need to require a module compatible with XMLHttpRequest from SDK.
+REPLConsole.XMLHttpRequest = typeof XMLHttpRequest === 'undefined' ? null : XMLHttpRequest;
+
+REPLConsole.request = function request(method, url, params, callback) {
+  var xhr = new REPLConsole.XMLHttpRequest();
+
+  xhr.open(method, url, true);
+  xhr.setRequestHeader("content-type", "application/x-www-form-urlencoded");
+  xhr.setRequestHeader("x-requested-with", "XMLHttpRequest");
+  xhr.send(params);
+
+  xhr.onreadystatechange = function() {
+    if (xhr.readyState === 4) {
+      callback(xhr);
+    }
+  };
+};
+
+// DOM helpers
+function hasClass(el, className) {
+  var regex = new RegExp('(?:^|\\s)' + className + '(?!\\S)', 'g');
+  return el.className && el.className.match(regex);
+}
+
+function isNodeList(el) {
+  return typeof el.length === 'number' &&
+    typeof el.item === 'function';
+}
+
+function addClass(el, className) {
+  if (isNodeList(el)) {
+    for (var i = 0; i < el.length; ++ i) {
+      addClass(el[i], className);
+    }
+  } else if (!hasClass(el, className)) {
+    el.className += " " + className;
+  }
+}
+
+function removeClass(el, className) {
+  var regex = new RegExp('(?:^|\\s)' + className + '(?!\\S)', 'g');
+  el.className = el.className.replace(regex, '');
+}
+
+function removeAllChildren(el) {
+  while (el.firstChild) {
+    el.removeChild(el.firstChild);
+  }
+}
+
+function findChild(el, className) {
+  for (var i = 0; i < el.childNodes.length; ++ i) {
+    if (hasClass(el.childNodes[i], className)) {
+      return el.childNodes[i];
+    }
+  }
+}
+
+function escapeHTML(html) {
+  return html
+    .replace(/&/g, '&amp;')
+    .replace(/</g, '&lt;')
+    .replace(/>/g, '&gt;')
+    .replace(/"/g, '&quot;')
+    .replace(/'/g, '&#x27;')
+    .replace(/`/g, '&#x60;');
+}
+
+// XHR helpers
+function postRequest() {
+  REPLConsole.request.apply(this, ["POST"].concat([].slice.call(arguments)));
+}
+
+function putRequest() {
+  REPLConsole.request.apply(this, ["PUT"].concat([].slice.call(arguments)));
+}
+
+if (typeof exports === 'object') {
+  exports.REPLConsole = REPLConsole;
+} else {
+  window.REPLConsole = REPLConsole;
+}
+
+// Split string by module operators of ruby
+function getContext(s) {
+  var methodOp = s.lastIndexOf('.');
+  var moduleOp = s.lastIndexOf('::');
+  var x = methodOp > moduleOp ? methodOp : moduleOp;
+  return x !== -1 ? s.substr(0, x) : '';
+}
+
+function flatten(arrays) {
+  return Array.prototype.concat.apply([], arrays);
+}
+
+}).call(this);
+</script>
+
+<script type="text/javascript" data-template="main" nonce="">
+(function() {
+  REPLConsole.installInto('console');
+
+}).call(this);
+</script>
+
+
+  <script type="text/javascript" data-template="error_page" nonce="">
+(function() {
+  // Try intercept traces links in Rails 4.2.
+var traceFrames = document.getElementsByClassName('trace-frames');
+var selectedFrame, currentSource = document.getElementById('frame-source-0');
+
+// Add click listeners for all stack frames
+for (var i = 0; i < traceFrames.length; i++) {
+  traceFrames[i].addEventListener('click', function(e) {
+    e.preventDefault();
+    var target = e.target;
+    var frameId = target.dataset.frameId;
+    var exceptionObjectId = target.dataset.exceptionObjectId;
+
+    // Change the binding of the console.
+    changeBinding(frameId, exceptionObjectId, function() {
+      // Rails already handles toggling the select class
+      selectedFrame = target;
+      return target.innerHTML;
+    });
+
+    // Change the extracted source code
+    changeSourceExtract(frameId);
+  });
+}
+
+// Change the binding of the current session and prompt the user.
+function changeBinding(frameId, exceptionObjectId, callback) {
+  REPLConsole.currentSession.switchBindingTo(frameId, exceptionObjectId, callback);
+}
+
+function changeSourceExtract(frameId) {
+  var el = document.getElementById('frame-source-' + frameId);
+  if (currentSource && el) {
+    currentSource.className += " hidden";
+    el.className = el.className.replace(" hidden", "");
+    currentSource = el;
+  }
+}
+
+// Push the error page body upwards the size of the console.
+//
+// While, I wouldn't like to do that on every custom page (so I don't screw
+// user's layouts), I think a lot of developers want to see all of the content
+// on the default Rails error page.
+//
+// Since it's quite special as is now, being a bit more special in the name of
+// better user experience, won't hurt.
+document.addEventListener('DOMContentLoaded', function() {
+  var consoleElement = document.getElementById('console');
+  var resizerElement = consoleElement.getElementsByClassName('resizer')[0];
+  var containerElement = document.getElementById('container');
+
+  function setContainerElementBottomMargin(pixels) {
+    containerElement.style.marginBottom = pixels + 'px';
+  }
+
+  var currentConsoleElementHeight = consoleElement.offsetHeight;
+  setContainerElementBottomMargin(currentConsoleElementHeight);
+
+  resizerElement.addEventListener('mousedown', function(event) {
+    function recordConsoleElementHeight(event) {
+      resizerElement.removeEventListener('mouseup', recordConsoleElementHeight);
+
+      var currentConsoleElementHeight = consoleElement.offsetHeight;
+      setContainerElementBottomMargin(currentConsoleElementHeight);
+    }
+
+    resizerElement.addEventListener('mouseup', recordConsoleElementHeight);
+  });
+});
+
+}).call(this);
+</script>
+
+
+<!-- END /usr/local/bundle/gems/web-console-4.2.1/lib/web_console/templates/index.html.erb --></body>
+</html>
+FF.F..
+
+Failures:
+
+  1) Posts POST /posts 有効なパラメータの場合 投稿が作成されること
+     Failure/Error:
+       expect {
+         post posts_path, params: post_params
+       }.to change(Post, :count).by(1)
+
+       expected `Post.count` to have changed by 1, but was changed by 0
+     # ./spec/requests/posts_spec.rb:39:in `block (4 levels) in <top (required)>'
+     # /usr/local/bundle/gems/webmock-3.26.1/lib/webmock/rspec.rb:39:in `block (2 levels) in <main>'
+
+  2) Posts POST /posts 有効なパラメータの場合 投稿一覧ページにリダイレクトされること
+     Failure/Error: expect(response).to redirect_to(posts_path)
+       Expected response to be a <3XX: redirect>, but was a <422: Unprocessable Content>
+     # ./spec/requests/posts_spec.rb:50:in `block (4 levels) in <top (required)>'
+     # /usr/local/bundle/gems/webmock-3.26.1/lib/webmock/rspec.rb:39:in `block (2 levels) in <main>'
+
+  3) Posts DELETE /posts/:id 自分の投稿の場合 投稿を削除できること
+     Failure/Error:
+       expect {
+         delete post_path(my_post)
+       }.to change(Post, :count).by(-1)
+
+       expected `Post.count` to have changed by -1, but was changed by 0
+     # ./spec/requests/posts_spec.rb:71:in `block (4 levels) in <top (required)>'
+     # /usr/local/bundle/gems/webmock-3.26.1/lib/webmock/rspec.rb:39:in `block (2 levels) in <main>'
+
+Top 8 slowest examples (4.09 seconds, 99.9% of total time):
+  Posts DELETE /posts/:id 他人の投稿の場合 ルートページなどにリダイレクトされる、またはエラーになること
+    0.69029 seconds ./spec/requests/posts_spec.rb:86
+  Posts DELETE /posts/:id 他人の投稿の場合 投稿を削除できないこと
+    0.68231 seconds ./spec/requests/posts_spec.rb:80
+  Posts GET /posts ログインしている場合 投稿一覧ページにアクセスできること
+    0.64892 seconds ./spec/requests/posts_spec.rb:17
+  Posts POST /posts 有効なパラメータの場合 投稿が作成されること
+    0.53289 seconds ./spec/requests/posts_spec.rb:38
+  Posts POST /posts 無効なパラメータの場合 投稿が作成されないこと
+    0.51061 seconds ./spec/requests/posts_spec.rb:57
+  Posts POST /posts 有効なパラメータの場合 投稿一覧ページにリダイレクトされること
+    0.50854 seconds ./spec/requests/posts_spec.rb:48
+  Posts DELETE /posts/:id 自分の投稿の場合 投稿を削除できること
+    0.50119 seconds ./spec/requests/posts_spec.rb:69
+  Posts GET /posts ログインしていない場合 ログインページにリダイレクトされること
+    0.0137 seconds ./spec/requests/posts_spec.rb:25
+
+Finished in 4.09 seconds (files took 11.55 seconds to load)
+8 examples, 3 failures
+
+Failed examples:
+
+rspec ./spec/requests/posts_spec.rb:38 # Posts POST /posts 有効なパラメータの場合 投稿が作成されること
+rspec ./spec/requests/posts_spec.rb:48 # Posts POST /posts 有効なパラメータの場合 投稿一覧ページにリダイレクトされること
+rspec ./spec/requests/posts_spec.rb:69 # Posts DELETE /posts/:id 自分の投稿の場合 投稿を削除できること
+
